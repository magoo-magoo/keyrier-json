(this["webpackJsonp@keyrier/ui"]=this["webpackJsonp@keyrier/ui"]||[]).push([[1],{273:function(e,t,n){e.exports={pointer:"Output_pointer__Fhc2d"}},274:function(e,t,n){},275:function(e,t,n){e.exports={loader:"Loading_loader__1SW_q",spin:"Loading_spin__HjhGY"}},324:function(e,t,n){"use strict";n.r(t);var a=n(101),l=n(8),c=n(85),r=n.n(c),o=n(0),u=n(28),s=n(238),i=n(145),m=n(297),d=n(298),b=n(299),p=n(34),f=n(54),E=n(42),g=n(21),O=n(14),v=n(258),j=n.n(v),h=n(270),y=n(236),k=n(240),C=n(325),N=Object(o.lazy)((function(){return n.e(30).then(n.t.bind(null,320,7))})),x={border:"3px solid red"},T=function noop(){return null},w=Object(u.b)((function mapStateToProps(e){return{src:Object(g.k)(e),searchTerm:Object(g.n)(e),match:Object(g.m)(e),size:Object(g.l)(e),debugMode:Object(g.d)(e)}}),{onSearchChange:l.a.updateSearchTerm})(Object(p.a)(Object(o.memo)(Object(E.a)((function JsonView(e){var t=e.src,n=e.searchTerm,a=e.onSearchChange,l=e.match,c=e.size,r=e.debugMode,u=Object(o.useState)(4683932),s=Object(O.a)(u,2),i=s[0],m=s[1],d=c>i,b=Object(o.useCallback)((function(e){return a(e.target.value)}),[a]);return o.createElement("div",{id:"jsonView"},o.createElement(h.DebounceInput,{style:n&&""!==n&&!l?x:{},value:n,className:"form-control",onChange:b,debounceTimeout:500,placeholder:"Type your search term..."}),o.createElement(o.Suspense,{fallback:o.createElement("div",null,"Loading...")},r?o.createElement(y.a,null,o.createElement(k.a,{for:"exampleCustomRange"},"heavy object size: ",Object(f.c)(i)),o.createElement(C.a,{type:"range",id:"exampleCustomRange",name:"customRange",value:i,steps:102400,min:102400,max:1048576,onChange:function onChange(e){return m(parseInt(e.currentTarget.value,10))}})):o.createElement(o.Fragment,null),d?o.createElement(o.Fragment,null):o.createElement(N,{src:t||{},name:"data",iconStyle:"triangle",indentWidth:8,onAdd:T,onDelete:T,onEdit:T,onSelect:T})))}),"JsonView"),(function(e,t){return j()(e,t)})))),S=n(273),_=n.n(S),M=(n(274),n(249)),P=n(242),A=n(243),z=n(244),D=n(275),R=n.n(D),F=Object(u.b)((function(e){return{debugMode:Object(g.d)(e)}}))((function Loading(e){var t=e.componentName,n=e.debugMode;return o.createElement("div",{className:R.a.loader},n?t:"")})),J=n(137),B=n(276),V=n(239),G=function DefaultColumnFilter(e){return o.createElement("div",null,o.createElement("input",{className:"form-control form-control-sm",value:e.column.filterValue||"",onChange:function onChange(t){e.column.setFilter(t.target.value||void 0)}}))},I=n(16),L=n.n(I),W=n(23),H=n(25),q=n(323),Y=n(231),$=Object(o.lazy)((function(){return n.e(8).then(n.bind(null,322))})),K=Object(u.b)((function mapStateToProps(e){return{data:Object(g.o)(e),displayedColumns:Object(g.u)(e),columns:Object(g.c)(e),groupBy:Object(g.f)(e)}}),{onColumnsChange:l.a.updateTableColumns,setTableGroupBy:l.a.updateTableGroupBy,toggleModal:l.a.toggleOutputTableModal})(Object(o.memo)(Object(p.a)(Object(E.a)((function TableAdvancedOptions(e){var t=e.onColumnsChange,a=e.columns,l=e.setTableGroupBy,c=e.data,r=e.displayedColumns,u=e.toggleModal,s=Object(H.b)(),m=Object(O.a)(s,2),d=m[0],b=m[1],p=Object(o.useCallback)((function(e){if(e instanceof Array){var n=e.map((function(e){return e.value?e.value:""}));t(n)}}),[t]),f=Object(o.useCallback)(Object(W.a)(L.a.mark((function _callee(){var e,t,a;return L.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Promise.all([n.e(10),n.e(6)]).then(n.t.bind(null,321,7));case 2:e=l.sent,t=e.utils.book_new(),a=e.utils.json_to_sheet(c.map((function(e){return Object(q.a)(e,r)})),{header:r}),e.utils.book_append_sheet(t,a,"keyrier-json"),e.writeFile(t,"export-".concat((new Date).toISOString(),".xlsx"));case 7:case"end":return l.stop()}}),_callee)}))),[r,c]),E=Object(o.useCallback)((function(e){return l([e.target.value])}),[l]);if(a.length<=0)return null;var g=a.map((function(e){return{value:e,label:e}}));return o.createElement("div",{className:"d-flex flex-column py-1 justify-content-center w-100"},o.createElement(i.a,{className:"float-left  my-1 w-100",color:"primary",block:!0,onClick:b},d?"Hide advanced options":"Advanced options"),o.createElement(Y.a,{isOpen:d},o.createElement("select",{hidden:!0,className:"form-control-lg form-control",name:"select",id:"groupingSelect",onBlur:E},o.createElement("option",{key:"Group by..."},"Group by..."),r.map((function(e){return o.createElement("option",{key:e},e)}))),o.createElement(i.a,{className:"col my-1",color:"success",onClick:f},"Export to Excel (.xlsx)"),o.createElement(i.a,{className:"col my-1",block:!0,color:"dark",outline:!0,onClick:u},"Display results table fullscreen"),o.createElement(o.Suspense,{fallback:o.createElement(F,{componentName:"ReactSelect"})},o.createElement($,{options:g,value:r.map((function(e){return{value:e,label:e}})),isMulti:!0,onChange:p}))))}),"TableAdvancedOptions")))),Q=function TableCellComponent(e){var t=e.cell,n=e.onClick;if(!t)return null;var a=Object(f.d)(Object(f.b)(t.value),50);return o.createElement("td",{onClick:function onCellClick(){n(t.value)},role:"gridcell",className:"text-center text-nowrap data-test-id-cell-data"},o.createElement("button",{className:"btn"},a))},U=o.lazy((function(){return n.e(30).then(n.t.bind(null,320,7))})),X=function TableDetailModal(e){var t=e.value,n=e.onClose;return o.createElement(M.a,{isOpen:!!t,toggle:n,size:"lg"},o.createElement(P.a,null,"Details"),o.createElement(A.a,null,"object"===typeof t?o.createElement(o.Suspense,{fallback:o.createElement(F,{componentName:"ReactJson"})},o.createElement(U,{src:t||{},name:"data",iconStyle:"triangle",indentWidth:8,onAdd:function onAdd(){return null},onDelete:function onDelete(){return null},onEdit:function onEdit(){return null},onSelect:function onSelect(){return null}})):t))},Z=function NumberOfElements(e){var t=e.count;return o.createElement("div",{id:"data-test-id-output-table-length"},o.createElement("h4",null,"Number of elements: ",t))},ee=Object(u.b)((function mapStateToProps(e){return{data:Object(g.o)(e),displayedColumns:Object(g.u)(e),columns:Object(g.c)(e),groupBy:Object(g.f)(e)}}))(Object(p.a)(Object(o.memo)(Object(E.a)((function OutputTableView(e){var t=e.data,n=e.displayedColumns,l=Object(o.useState)(null),c=Object(O.a)(l,2),r=c[0],u=c[1],s=Object(o.useMemo)((function(){return t.map((function(e){return e?"object"===typeof e?e:Object(a.a)({},J.a,e):{}}))}),[t]),m=o.useMemo((function(){return n.map((function(e){return{header:e,accessor:e,Filter:G}}))}),[n]),d=Object(B.useTable)({columns:m,data:s},B.useFilters,B.useSortBy,B.usePagination),b=d.headerGroups,p=d.prepareRow,f=d.pageOptions,E=d.page,g=d.state.pageIndex,v=d.previousPage,j=d.nextPage,h=d.canPreviousPage,y=d.canNextPage;return console.log("page.length",E.length),s&&Array.isArray(s)&&0!==s.length&&!s.every((function(e){return null===e||void 0===e||"object"===typeof e&&0===Object.keys(e).length}))?o.createElement("div",{className:"d-flex flex-column overflow-hidden mb-2"},o.createElement("div",{className:"d-flex"},o.createElement(K,null)),o.createElement(o.Suspense,{fallback:o.createElement(F,{componentName:"ReactTable"})},o.createElement("table",{role:"grid",className:"table table-bordered table-hover table-responsive data-test-id-output-table flex-grow-1"},o.createElement("thead",null,b.map((function(e,t){return o.createElement("tr",{key:t},o.createElement("th",{scope:"col",className:"shadow-sm text-capitalize text-center data-test-id-column-name"}),e.headers.map((function(e,t){return o.createElement("th",{key:t,scope:"col",className:"shadow-sm text-capitalize text-center data-test-id-column-name min-vw-10",style:{minWidth:"20vh"}},o.createElement("div",e.getHeaderProps(e.getSortByToggleProps()),e.render("header"),o.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"")),e.render("Filter"))})))}))),o.createElement("tbody",null,E.map((function(e,t){return p(e),o.createElement("tr",{key:t},o.createElement("th",{scope:"row"},o.createElement("button",{onClick:function onClick(){return u(e.original)},className:"btn btn-link"},o.createElement("i",{className:"material-icons"},"open_in_browser"))),e.cells.map((function(e){return o.createElement(Q,{key:e.column.id,cell:e,onClick:u})})))})))),o.createElement("div",{className:"d-flex align-items-center"},o.createElement(V.a,{hidden:f.length<2},o.createElement(i.a,{onClick:function onClick(){return v()},disabled:!h},"Previous Page"),o.createElement(i.a,{onClick:function onClick(){return j()},disabled:!y},"Next Page")),o.createElement("div",{className:"ml-2"},"Page ".concat(g+1," of ").concat(f.length)),o.createElement("div",{className:"ml-auto align-items-center justify-content-end d-flex"},o.createElement(Z,{count:s.length})))),o.createElement(X,{value:r,onClose:function onCloseDetailModal(){return u(null)}})):o.createElement(Z,{count:s.length})}),"OutputTableView"),(function(e,t){return j()(e,t)})))),te=Object(u.b)((function mapStateToProps(e){return{data:Object(g.k)(e),isModalOpen:Object(g.v)(e)}}),{toggleModal:l.a.toggleOutputTableModal})(Object(p.a)(Object(o.memo)(Object(E.a)((function OutputTable(e){var t=e.toggleModal,n=e.isModalOpen;return o.createElement("div",{className:"output-table d-flex h-100"},o.createElement(M.a,{isOpen:n,toggle:t,className:"mw-100"},o.createElement(P.a,{toggle:t},"Table view"),o.createElement(A.a,null,o.createElement(ee,null)),o.createElement(z.a,null,o.createElement(i.a,{color:"secondary",onClick:t},"Close"))),o.createElement(ee,null))}),"OutputTable"))));t.default=Object(u.b)((function mapStateToProps(e){return{errorMessage:Object(g.i)(e),isArray:Object(g.j)(e),activeTab:Object(g.h)(e),objSize:Object(g.l)(e)}}),{setActiveTab:l.a.updateOutputTabSelection})(Object(o.memo)(Object(p.a)(Object(E.a)((function Output(e){var t=e.isArray,n=e.errorMessage,l=e.activeTab,c=e.setActiveTab,u=e.objSize,p=Object(o.useCallback)((function(){return c("Table")}),[c]),E=Object(o.useCallback)((function(){return c("RawJson")}),[c]);return o.createElement(o.Fragment,null,n&&o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-10 offset-sm-2"},o.createElement(s.a,{className:"row align-items-center",color:"danger"},o.createElement("i",{className:"material-icons mr-2"},"error"),o.createElement("span",null,n))))),o.createElement("div",{className:"d-flex flex-column h-100"},o.createElement("div",{className:"d-flex"},o.createElement("ul",{className:"nav nav-tabs"},o.createElement("li",{className:"nav-item"},o.createElement(i.a,{className:r()(Object(a.a)({active:"RawJson"===l,"nav-link":!0},_.a.pointer,!0)),onClick:E},"View raw JSON")),o.createElement("li",{className:"nav-item",hidden:!t},o.createElement(i.a,{className:r()(Object(a.a)({active:"Table"===l,"nav-link":!0},_.a.pointer,!0)),onClick:p},"View table")))),o.createElement(m.a,{className:"d-flex flex-column flex-grow-1",activeTab:l},"RawJson"===l&&o.createElement(d.a,{className:"h-100",tabId:"RawJson"},o.createElement("div",{className:"row h-100"},o.createElement("div",{className:"col-sm-2 pt-5"},o.createElement("h3",null,o.createElement(b.a,{id:"badgeSize",color:"info",pill:!0},Object(f.c)(u)))),o.createElement("div",{className:"col-sm-10"},o.createElement(w,null)))),o.createElement(d.a,{className:"h-100",tabId:"Table"},"Table"===l&&o.createElement(te,null)))))}),"Output"))))}}]);
//# sourceMappingURL=Output.afd5108c.chunk.js.map