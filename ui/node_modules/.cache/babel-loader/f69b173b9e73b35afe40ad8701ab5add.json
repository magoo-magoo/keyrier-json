{"ast":null,"code":"ace.define(\"ace/occur\", [\"require\", \"exports\", \"module\", \"ace/lib/oop\", \"ace/range\", \"ace/search\", \"ace/edit_session\", \"ace/search_highlight\", \"ace/lib/dom\"], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"./lib/oop\");\n\n  var Range = require(\"./range\").Range;\n\n  var Search = require(\"./search\").Search;\n\n  var EditSession = require(\"./edit_session\").EditSession;\n\n  var SearchHighlight = require(\"./search_highlight\").SearchHighlight;\n\n  function Occur() {}\n\n  oop.inherits(Occur, Search);\n  (function () {\n    this.enter = function (editor, options) {\n      if (!options.needle) return false;\n      var pos = editor.getCursorPosition();\n      this.displayOccurContent(editor, options);\n      var translatedPos = this.originalToOccurPosition(editor.session, pos);\n      editor.moveCursorToPosition(translatedPos);\n      return true;\n    };\n\n    this.exit = function (editor, options) {\n      var pos = options.translatePosition && editor.getCursorPosition();\n      var translatedPos = pos && this.occurToOriginalPosition(editor.session, pos);\n      this.displayOriginalContent(editor);\n      if (translatedPos) editor.moveCursorToPosition(translatedPos);\n      return true;\n    };\n\n    this.highlight = function (sess, regexp) {\n      var hl = sess.$occurHighlight = sess.$occurHighlight || sess.addDynamicMarker(new SearchHighlight(null, \"ace_occur-highlight\", \"text\"));\n      hl.setRegexp(regexp);\n\n      sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n\n    };\n\n    this.displayOccurContent = function (editor, options) {\n      this.$originalSession = editor.session;\n      var found = this.matchingLines(editor.session, options);\n      var lines = found.map(function (foundLine) {\n        return foundLine.content;\n      });\n      var occurSession = new EditSession(lines.join('\\n'));\n      occurSession.$occur = this;\n      occurSession.$occurMatchingLines = found;\n      editor.setSession(occurSession);\n      this.$useEmacsStyleLineStart = this.$originalSession.$useEmacsStyleLineStart;\n      occurSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n      this.highlight(occurSession, options.re);\n\n      occurSession._emit('changeBackMarker');\n    };\n\n    this.displayOriginalContent = function (editor) {\n      editor.setSession(this.$originalSession);\n      this.$originalSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n    };\n\n    this.originalToOccurPosition = function (session, pos) {\n      var lines = session.$occurMatchingLines;\n      var nullPos = {\n        row: 0,\n        column: 0\n      };\n      if (!lines) return nullPos;\n\n      for (var i = 0; i < lines.length; i++) {\n        if (lines[i].row === pos.row) return {\n          row: i,\n          column: pos.column\n        };\n      }\n\n      return nullPos;\n    };\n\n    this.occurToOriginalPosition = function (session, pos) {\n      var lines = session.$occurMatchingLines;\n      if (!lines || !lines[pos.row]) return pos;\n      return {\n        row: lines[pos.row].row,\n        column: pos.column\n      };\n    };\n\n    this.matchingLines = function (session, options) {\n      options = oop.mixin({}, options);\n      if (!session || !options.needle) return [];\n      var search = new Search();\n      search.set(options);\n      return search.findAll(session).reduce(function (lines, range) {\n        var row = range.start.row;\n        var last = lines[lines.length - 1];\n        return last && last.row === row ? lines : lines.concat({\n          row: row,\n          content: session.getLine(row)\n        });\n      }, []);\n    };\n  }).call(Occur.prototype);\n\n  var dom = require('./lib/dom');\n\n  dom.importCssString(\".ace_occur-highlight {\\n\\\n    border-radius: 4px;\\n\\\n    background-color: rgba(87, 255, 8, 0.25);\\n\\\n    position: absolute;\\n\\\n    z-index: 4;\\n\\\n    box-sizing: border-box;\\n\\\n    box-shadow: 0 0 4px rgb(91, 255, 50);\\n\\\n}\\n\\\n.ace_dark .ace_occur-highlight {\\n\\\n    background-color: rgb(80, 140, 85);\\n\\\n    box-shadow: 0 0 4px rgb(60, 120, 70);\\n\\\n}\\n\", \"incremental-occur-highlighting\");\n  exports.Occur = Occur;\n});\nace.define(\"ace/commands/occur_commands\", [\"require\", \"exports\", \"module\", \"ace/config\", \"ace/occur\", \"ace/keyboard/hash_handler\", \"ace/lib/oop\"], function (require, exports, module) {\n  var config = require(\"../config\"),\n      Occur = require(\"../occur\").Occur;\n\n  var occurStartCommand = {\n    name: \"occur\",\n    exec: function (editor, options) {\n      var alreadyInOccur = !!editor.session.$occur;\n      var occurSessionActive = new Occur().enter(editor, options);\n      if (occurSessionActive && !alreadyInOccur) OccurKeyboardHandler.installIn(editor);\n    },\n    readOnly: true\n  };\n  var occurCommands = [{\n    name: \"occurexit\",\n    bindKey: 'esc|Ctrl-G',\n    exec: function (editor) {\n      var occur = editor.session.$occur;\n      if (!occur) return;\n      occur.exit(editor, {});\n      if (!editor.session.$occur) OccurKeyboardHandler.uninstallFrom(editor);\n    },\n    readOnly: true\n  }, {\n    name: \"occuraccept\",\n    bindKey: 'enter',\n    exec: function (editor) {\n      var occur = editor.session.$occur;\n      if (!occur) return;\n      occur.exit(editor, {\n        translatePosition: true\n      });\n      if (!editor.session.$occur) OccurKeyboardHandler.uninstallFrom(editor);\n    },\n    readOnly: true\n  }];\n\n  var HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\n\n  var oop = require(\"../lib/oop\");\n\n  function OccurKeyboardHandler() {}\n\n  oop.inherits(OccurKeyboardHandler, HashHandler);\n  (function () {\n    this.isOccurHandler = true;\n\n    this.attach = function (editor) {\n      HashHandler.call(this, occurCommands, editor.commands.platform);\n      this.$editor = editor;\n    };\n\n    var handleKeyboard$super = this.handleKeyboard;\n\n    this.handleKeyboard = function (data, hashId, key, keyCode) {\n      var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n      return cmd && cmd.command ? cmd : undefined;\n    };\n  }).call(OccurKeyboardHandler.prototype);\n\n  OccurKeyboardHandler.installIn = function (editor) {\n    var handler = new this();\n    editor.keyBinding.addKeyboardHandler(handler);\n    editor.commands.addCommands(occurCommands);\n  };\n\n  OccurKeyboardHandler.uninstallFrom = function (editor) {\n    editor.commands.removeCommands(occurCommands);\n    var handler = editor.getKeyboardHandler();\n    if (handler.isOccurHandler) editor.keyBinding.removeKeyboardHandler(handler);\n  };\n\n  exports.occurStartCommand = occurStartCommand;\n});\nace.define(\"ace/commands/incremental_search_commands\", [\"require\", \"exports\", \"module\", \"ace/config\", \"ace/lib/oop\", \"ace/keyboard/hash_handler\", \"ace/commands/occur_commands\"], function (require, exports, module) {\n  var config = require(\"../config\");\n\n  var oop = require(\"../lib/oop\");\n\n  var HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\n\n  var occurStartCommand = require(\"./occur_commands\").occurStartCommand;\n\n  exports.iSearchStartCommands = [{\n    name: \"iSearch\",\n    bindKey: {\n      win: \"Ctrl-F\",\n      mac: \"Command-F\"\n    },\n    exec: function (editor, options) {\n      config.loadModule([\"core\", \"ace/incremental_search\"], function (e) {\n        var iSearch = e.iSearch = e.iSearch || new e.IncrementalSearch();\n        iSearch.activate(editor, options.backwards);\n        if (options.jumpToFirstMatch) iSearch.next(options);\n      });\n    },\n    readOnly: true\n  }, {\n    name: \"iSearchBackwards\",\n    exec: function (editor, jumpToNext) {\n      editor.execCommand('iSearch', {\n        backwards: true\n      });\n    },\n    readOnly: true\n  }, {\n    name: \"iSearchAndGo\",\n    bindKey: {\n      win: \"Ctrl-K\",\n      mac: \"Command-G\"\n    },\n    exec: function (editor, jumpToNext) {\n      editor.execCommand('iSearch', {\n        jumpToFirstMatch: true,\n        useCurrentOrPrevSearch: true\n      });\n    },\n    readOnly: true\n  }, {\n    name: \"iSearchBackwardsAndGo\",\n    bindKey: {\n      win: \"Ctrl-Shift-K\",\n      mac: \"Command-Shift-G\"\n    },\n    exec: function (editor) {\n      editor.execCommand('iSearch', {\n        jumpToFirstMatch: true,\n        backwards: true,\n        useCurrentOrPrevSearch: true\n      });\n    },\n    readOnly: true\n  }];\n  exports.iSearchCommands = [{\n    name: \"restartSearch\",\n    bindKey: {\n      win: \"Ctrl-F\",\n      mac: \"Command-F\"\n    },\n    exec: function (iSearch) {\n      iSearch.cancelSearch(true);\n    }\n  }, {\n    name: \"searchForward\",\n    bindKey: {\n      win: \"Ctrl-S|Ctrl-K\",\n      mac: \"Ctrl-S|Command-G\"\n    },\n    exec: function (iSearch, options) {\n      options.useCurrentOrPrevSearch = true;\n      iSearch.next(options);\n    }\n  }, {\n    name: \"searchBackward\",\n    bindKey: {\n      win: \"Ctrl-R|Ctrl-Shift-K\",\n      mac: \"Ctrl-R|Command-Shift-G\"\n    },\n    exec: function (iSearch, options) {\n      options.useCurrentOrPrevSearch = true;\n      options.backwards = true;\n      iSearch.next(options);\n    }\n  }, {\n    name: \"extendSearchTerm\",\n    exec: function (iSearch, string) {\n      iSearch.addString(string);\n    }\n  }, {\n    name: \"extendSearchTermSpace\",\n    bindKey: \"space\",\n    exec: function (iSearch) {\n      iSearch.addString(' ');\n    }\n  }, {\n    name: \"shrinkSearchTerm\",\n    bindKey: \"backspace\",\n    exec: function (iSearch) {\n      iSearch.removeChar();\n    }\n  }, {\n    name: 'confirmSearch',\n    bindKey: 'return',\n    exec: function (iSearch) {\n      iSearch.deactivate();\n    }\n  }, {\n    name: 'cancelSearch',\n    bindKey: 'esc|Ctrl-G',\n    exec: function (iSearch) {\n      iSearch.deactivate(true);\n    }\n  }, {\n    name: 'occurisearch',\n    bindKey: 'Ctrl-O',\n    exec: function (iSearch) {\n      var options = oop.mixin({}, iSearch.$options);\n      iSearch.deactivate();\n      occurStartCommand.exec(iSearch.$editor, options);\n    }\n  }, {\n    name: \"yankNextWord\",\n    bindKey: \"Ctrl-w\",\n    exec: function (iSearch) {\n      var ed = iSearch.$editor,\n          range = ed.selection.getRangeOfMovements(function (sel) {\n        sel.moveCursorWordRight();\n      }),\n          string = ed.session.getTextRange(range);\n      iSearch.addString(string);\n    }\n  }, {\n    name: \"yankNextChar\",\n    bindKey: \"Ctrl-Alt-y\",\n    exec: function (iSearch) {\n      var ed = iSearch.$editor,\n          range = ed.selection.getRangeOfMovements(function (sel) {\n        sel.moveCursorRight();\n      }),\n          string = ed.session.getTextRange(range);\n      iSearch.addString(string);\n    }\n  }, {\n    name: 'recenterTopBottom',\n    bindKey: 'Ctrl-l',\n    exec: function (iSearch) {\n      iSearch.$editor.execCommand('recenterTopBottom');\n    }\n  }, {\n    name: 'selectAllMatches',\n    bindKey: 'Ctrl-space',\n    exec: function (iSearch) {\n      var ed = iSearch.$editor,\n          hl = ed.session.$isearchHighlight,\n          ranges = hl && hl.cache ? hl.cache.reduce(function (ranges, ea) {\n        return ranges.concat(ea ? ea : []);\n      }, []) : [];\n      iSearch.deactivate(false);\n      ranges.forEach(ed.selection.addRange.bind(ed.selection));\n    }\n  }, {\n    name: 'searchAsRegExp',\n    bindKey: 'Alt-r',\n    exec: function (iSearch) {\n      iSearch.convertNeedleToRegExp();\n    }\n  }].map(function (cmd) {\n    cmd.readOnly = true;\n    cmd.isIncrementalSearchCommand = true;\n    cmd.scrollIntoView = \"animate-cursor\";\n    return cmd;\n  });\n\n  function IncrementalSearchKeyboardHandler(iSearch) {\n    this.$iSearch = iSearch;\n  }\n\n  oop.inherits(IncrementalSearchKeyboardHandler, HashHandler);\n  (function () {\n    this.attach = function (editor) {\n      var iSearch = this.$iSearch;\n      HashHandler.call(this, exports.iSearchCommands, editor.commands.platform);\n      this.$commandExecHandler = editor.commands.on('exec', function (e) {\n        if (!e.command.isIncrementalSearchCommand) return iSearch.deactivate();\n        e.stopPropagation();\n        e.preventDefault();\n        var scrollTop = editor.session.getScrollTop();\n        var result = e.command.exec(iSearch, e.args || {});\n        editor.renderer.scrollCursorIntoView(null, 0.5);\n        editor.renderer.animateScrolling(scrollTop);\n        return result;\n      });\n    };\n\n    this.detach = function (editor) {\n      if (!this.$commandExecHandler) return;\n      editor.commands.off('exec', this.$commandExecHandler);\n      delete this.$commandExecHandler;\n    };\n\n    var handleKeyboard$super = this.handleKeyboard;\n\n    this.handleKeyboard = function (data, hashId, key, keyCode) {\n      if ((hashId === 1\n      /*ctrl*/\n      || hashId === 8\n      /*command*/\n      ) && key === 'v' || hashId === 1\n      /*ctrl*/\n      && key === 'y') return null;\n      var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n\n      if (cmd && cmd.command) {\n        return cmd;\n      }\n\n      if (hashId == -1) {\n        var extendCmd = this.commands.extendSearchTerm;\n\n        if (extendCmd) {\n          return {\n            command: extendCmd,\n            args: key\n          };\n        }\n      }\n\n      return false;\n    };\n  }).call(IncrementalSearchKeyboardHandler.prototype);\n  exports.IncrementalSearchKeyboardHandler = IncrementalSearchKeyboardHandler;\n});\nace.define(\"ace/incremental_search\", [\"require\", \"exports\", \"module\", \"ace/lib/oop\", \"ace/range\", \"ace/search\", \"ace/search_highlight\", \"ace/commands/incremental_search_commands\", \"ace/lib/dom\", \"ace/commands/command_manager\", \"ace/editor\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"./lib/oop\");\n\n  var Range = require(\"./range\").Range;\n\n  var Search = require(\"./search\").Search;\n\n  var SearchHighlight = require(\"./search_highlight\").SearchHighlight;\n\n  var iSearchCommandModule = require(\"./commands/incremental_search_commands\");\n\n  var ISearchKbd = iSearchCommandModule.IncrementalSearchKeyboardHandler;\n\n  function IncrementalSearch() {\n    this.$options = {\n      wrap: false,\n      skipCurrent: false\n    };\n    this.$keyboardHandler = new ISearchKbd(this);\n  }\n\n  oop.inherits(IncrementalSearch, Search);\n\n  function isRegExp(obj) {\n    return obj instanceof RegExp;\n  }\n\n  function regExpToObject(re) {\n    var string = String(re),\n        start = string.indexOf('/'),\n        flagStart = string.lastIndexOf('/');\n    return {\n      expression: string.slice(start + 1, flagStart),\n      flags: string.slice(flagStart + 1)\n    };\n  }\n\n  function stringToRegExp(string, flags) {\n    try {\n      return new RegExp(string, flags);\n    } catch (e) {\n      return string;\n    }\n  }\n\n  function objectToRegExp(obj) {\n    return stringToRegExp(obj.expression, obj.flags);\n  }\n\n  (function () {\n    this.activate = function (editor, backwards) {\n      this.$editor = editor;\n      this.$startPos = this.$currentPos = editor.getCursorPosition();\n      this.$options.needle = '';\n      this.$options.backwards = backwards;\n      editor.keyBinding.addKeyboardHandler(this.$keyboardHandler);\n      this.$originalEditorOnPaste = editor.onPaste;\n      editor.onPaste = this.onPaste.bind(this);\n      this.$mousedownHandler = editor.on('mousedown', this.onMouseDown.bind(this));\n      this.selectionFix(editor);\n      this.statusMessage(true);\n    };\n\n    this.deactivate = function (reset) {\n      this.cancelSearch(reset);\n      var editor = this.$editor;\n      editor.keyBinding.removeKeyboardHandler(this.$keyboardHandler);\n\n      if (this.$mousedownHandler) {\n        editor.off('mousedown', this.$mousedownHandler);\n        delete this.$mousedownHandler;\n      }\n\n      editor.onPaste = this.$originalEditorOnPaste;\n      this.message('');\n    };\n\n    this.selectionFix = function (editor) {\n      if (editor.selection.isEmpty() && !editor.session.$emacsMark) {\n        editor.clearSelection();\n      }\n    };\n\n    this.highlight = function (regexp) {\n      var sess = this.$editor.session,\n          hl = sess.$isearchHighlight = sess.$isearchHighlight || sess.addDynamicMarker(new SearchHighlight(null, \"ace_isearch-result\", \"text\"));\n      hl.setRegexp(regexp);\n\n      sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n\n    };\n\n    this.cancelSearch = function (reset) {\n      var e = this.$editor;\n      this.$prevNeedle = this.$options.needle;\n      this.$options.needle = '';\n\n      if (reset) {\n        e.moveCursorToPosition(this.$startPos);\n        this.$currentPos = this.$startPos;\n      } else {\n        e.pushEmacsMark && e.pushEmacsMark(this.$startPos, false);\n      }\n\n      this.highlight(null);\n      return Range.fromPoints(this.$currentPos, this.$currentPos);\n    };\n\n    this.highlightAndFindWithNeedle = function (moveToNext, needleUpdateFunc) {\n      if (!this.$editor) return null;\n      var options = this.$options;\n\n      if (needleUpdateFunc) {\n        options.needle = needleUpdateFunc.call(this, options.needle || '') || '';\n      }\n\n      if (options.needle.length === 0) {\n        this.statusMessage(true);\n        return this.cancelSearch(true);\n      }\n\n      options.start = this.$currentPos;\n      var session = this.$editor.session,\n          found = this.find(session),\n          shouldSelect = this.$editor.emacsMark ? !!this.$editor.emacsMark() : !this.$editor.selection.isEmpty();\n\n      if (found) {\n        if (options.backwards) found = Range.fromPoints(found.end, found.start);\n        this.$editor.selection.setRange(Range.fromPoints(shouldSelect ? this.$startPos : found.end, found.end));\n        if (moveToNext) this.$currentPos = found.end;\n        this.highlight(options.re);\n      }\n\n      this.statusMessage(found);\n      return found;\n    };\n\n    this.addString = function (s) {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        if (!isRegExp(needle)) return needle + s;\n        var reObj = regExpToObject(needle);\n        reObj.expression += s;\n        return objectToRegExp(reObj);\n      });\n    };\n\n    this.removeChar = function (c) {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        if (!isRegExp(needle)) return needle.substring(0, needle.length - 1);\n        var reObj = regExpToObject(needle);\n        reObj.expression = reObj.expression.substring(0, reObj.expression.length - 1);\n        return objectToRegExp(reObj);\n      });\n    };\n\n    this.next = function (options) {\n      options = options || {};\n      this.$options.backwards = !!options.backwards;\n      this.$currentPos = this.$editor.getCursorPosition();\n      return this.highlightAndFindWithNeedle(true, function (needle) {\n        return options.useCurrentOrPrevSearch && needle.length === 0 ? this.$prevNeedle || '' : needle;\n      });\n    };\n\n    this.onMouseDown = function (evt) {\n      this.deactivate();\n      return true;\n    };\n\n    this.onPaste = function (text) {\n      this.addString(text);\n    };\n\n    this.convertNeedleToRegExp = function () {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        return isRegExp(needle) ? needle : stringToRegExp(needle, 'ig');\n      });\n    };\n\n    this.convertNeedleToString = function () {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        return isRegExp(needle) ? regExpToObject(needle).expression : needle;\n      });\n    };\n\n    this.statusMessage = function (found) {\n      var options = this.$options,\n          msg = '';\n      msg += options.backwards ? 'reverse-' : '';\n      msg += 'isearch: ' + options.needle;\n      msg += found ? '' : ' (not found)';\n      this.message(msg);\n    };\n\n    this.message = function (msg) {\n      if (this.$editor.showCommandLine) {\n        this.$editor.showCommandLine(msg);\n        this.$editor.focus();\n      }\n    };\n  }).call(IncrementalSearch.prototype);\n  exports.IncrementalSearch = IncrementalSearch;\n\n  var dom = require('./lib/dom');\n\n  dom.importCssString && dom.importCssString(\"\\\n.ace_marker-layer .ace_isearch-result {\\\n  position: absolute;\\\n  z-index: 6;\\\n  box-sizing: border-box;\\\n}\\\ndiv.ace_isearch-result {\\\n  border-radius: 4px;\\\n  background-color: rgba(255, 200, 0, 0.5);\\\n  box-shadow: 0 0 4px rgb(255, 200, 0);\\\n}\\\n.ace_dark div.ace_isearch-result {\\\n  background-color: rgb(100, 110, 160);\\\n  box-shadow: 0 0 4px rgb(80, 90, 140);\\\n}\", \"incremental-search-highlighting\");\n\n  var commands = require(\"./commands/command_manager\");\n\n  (function () {\n    this.setupIncrementalSearch = function (editor, val) {\n      if (this.usesIncrementalSearch == val) return;\n      this.usesIncrementalSearch = val;\n      var iSearchCommands = iSearchCommandModule.iSearchStartCommands;\n      var method = val ? 'addCommands' : 'removeCommands';\n      this[method](iSearchCommands);\n    };\n  }).call(commands.CommandManager.prototype);\n\n  var Editor = require(\"./editor\").Editor;\n\n  require(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    useIncrementalSearch: {\n      set: function (val) {\n        this.keyBinding.$handlers.forEach(function (handler) {\n          if (handler.setupIncrementalSearch) {\n            handler.setupIncrementalSearch(this, val);\n          }\n        });\n\n        this._emit('incrementalSearchSettingChanged', {\n          isEnabled: val\n        });\n      }\n    }\n  });\n});\nace.define(\"ace/keyboard/emacs\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\", \"ace/incremental_search\", \"ace/commands/incremental_search_commands\", \"ace/keyboard/hash_handler\", \"ace/lib/keys\"], function (require, exports, module) {\n  \"use strict\";\n\n  var dom = require(\"../lib/dom\");\n\n  require(\"../incremental_search\");\n\n  var iSearchCommandModule = require(\"../commands/incremental_search_commands\");\n\n  var HashHandler = require(\"./hash_handler\").HashHandler;\n\n  exports.handler = new HashHandler();\n  exports.handler.isEmacs = true;\n  exports.handler.$id = \"ace/keyboard/emacs\";\n  var initialized = false;\n  var $formerLongWords;\n  var $formerLineStart;\n\n  exports.handler.attach = function (editor) {\n    if (!initialized) {\n      initialized = true;\n      dom.importCssString('\\\n            .emacs-mode .ace_cursor{\\\n                border: 1px rgba(50,250,50,0.8) solid!important;\\\n                box-sizing: border-box!important;\\\n                background-color: rgba(0,250,0,0.9);\\\n                opacity: 0.5;\\\n            }\\\n            .emacs-mode .ace_hidden-cursors .ace_cursor{\\\n                opacity: 1;\\\n                background-color: transparent;\\\n            }\\\n            .emacs-mode .ace_overwrite-cursors .ace_cursor {\\\n                opacity: 1;\\\n                background-color: transparent;\\\n                border-width: 0 0 2px 2px !important;\\\n            }\\\n            .emacs-mode .ace_text-layer {\\\n                z-index: 4\\\n            }\\\n            .emacs-mode .ace_cursor-layer {\\\n                z-index: 2\\\n            }', 'emacsMode');\n    }\n\n    $formerLongWords = editor.session.$selectLongWords;\n    editor.session.$selectLongWords = true;\n    $formerLineStart = editor.session.$useEmacsStyleLineStart;\n    editor.session.$useEmacsStyleLineStart = true;\n    editor.session.$emacsMark = null; // the active mark\n\n    editor.session.$emacsMarkRing = editor.session.$emacsMarkRing || [];\n\n    editor.emacsMark = function () {\n      return this.session.$emacsMark;\n    };\n\n    editor.setEmacsMark = function (p) {\n      this.session.$emacsMark = p;\n    };\n\n    editor.pushEmacsMark = function (p, activate) {\n      var prevMark = this.session.$emacsMark;\n      if (prevMark) this.session.$emacsMarkRing.push(prevMark);\n      if (!p || activate) this.setEmacsMark(p);else this.session.$emacsMarkRing.push(p);\n    };\n\n    editor.popEmacsMark = function () {\n      var mark = this.emacsMark();\n\n      if (mark) {\n        this.setEmacsMark(null);\n        return mark;\n      }\n\n      return this.session.$emacsMarkRing.pop();\n    };\n\n    editor.getLastEmacsMark = function (p) {\n      return this.session.$emacsMark || this.session.$emacsMarkRing.slice(-1)[0];\n    };\n\n    editor.emacsMarkForSelection = function (replacement) {\n      var sel = this.selection,\n          multiRangeLength = this.multiSelect ? this.multiSelect.getAllRanges().length : 1,\n          selIndex = sel.index || 0,\n          markRing = this.session.$emacsMarkRing,\n          markIndex = markRing.length - (multiRangeLength - selIndex),\n          lastMark = markRing[markIndex] || sel.anchor;\n\n      if (replacement) {\n        markRing.splice(markIndex, 1, \"row\" in replacement && \"column\" in replacement ? replacement : undefined);\n      }\n\n      return lastMark;\n    };\n\n    editor.on(\"click\", $resetMarkMode);\n    editor.on(\"changeSession\", $kbSessionChange);\n    editor.renderer.$blockCursor = true;\n    editor.setStyle(\"emacs-mode\");\n    editor.commands.addCommands(commands);\n    exports.handler.platform = editor.commands.platform;\n    editor.$emacsModeHandler = this;\n    editor.on('copy', this.onCopy);\n    editor.on('paste', this.onPaste);\n  };\n\n  exports.handler.detach = function (editor) {\n    editor.renderer.$blockCursor = false;\n    editor.session.$selectLongWords = $formerLongWords;\n    editor.session.$useEmacsStyleLineStart = $formerLineStart;\n    editor.off(\"click\", $resetMarkMode);\n    editor.off(\"changeSession\", $kbSessionChange);\n    editor.unsetStyle(\"emacs-mode\");\n    editor.commands.removeCommands(commands);\n    editor.off('copy', this.onCopy);\n    editor.off('paste', this.onPaste);\n    editor.$emacsModeHandler = null;\n  };\n\n  var $kbSessionChange = function (e) {\n    if (e.oldSession) {\n      e.oldSession.$selectLongWords = $formerLongWords;\n      e.oldSession.$useEmacsStyleLineStart = $formerLineStart;\n    }\n\n    $formerLongWords = e.session.$selectLongWords;\n    e.session.$selectLongWords = true;\n    $formerLineStart = e.session.$useEmacsStyleLineStart;\n    e.session.$useEmacsStyleLineStart = true;\n    if (!e.session.hasOwnProperty('$emacsMark')) e.session.$emacsMark = null;\n    if (!e.session.hasOwnProperty('$emacsMarkRing')) e.session.$emacsMarkRing = [];\n  };\n\n  var $resetMarkMode = function (e) {\n    e.editor.session.$emacsMark = null;\n  };\n\n  var keys = require(\"../lib/keys\").KEY_MODS;\n\n  var eMods = {\n    C: \"ctrl\",\n    S: \"shift\",\n    M: \"alt\",\n    CMD: \"command\"\n  };\n  var combinations = [\"C-S-M-CMD\", \"S-M-CMD\", \"C-M-CMD\", \"C-S-CMD\", \"C-S-M\", \"M-CMD\", \"S-CMD\", \"S-M\", \"C-CMD\", \"C-M\", \"C-S\", \"CMD\", \"M\", \"S\", \"C\"];\n  combinations.forEach(function (c) {\n    var hashId = 0;\n    c.split(\"-\").forEach(function (c) {\n      hashId = hashId | keys[eMods[c]];\n    });\n    eMods[hashId] = c.toLowerCase() + \"-\";\n  });\n\n  exports.handler.onCopy = function (e, editor) {\n    if (editor.$handlesEmacsOnCopy) return;\n    editor.$handlesEmacsOnCopy = true;\n    exports.handler.commands.killRingSave.exec(editor);\n    editor.$handlesEmacsOnCopy = false;\n  };\n\n  exports.handler.onPaste = function (e, editor) {\n    editor.pushEmacsMark(editor.getCursorPosition());\n  };\n\n  exports.handler.bindKey = function (key, command) {\n    if (typeof key == \"object\") key = key[this.platform];\n    if (!key) return;\n    var ckb = this.commandKeyBinding;\n    key.split(\"|\").forEach(function (keyPart) {\n      keyPart = keyPart.toLowerCase();\n      ckb[keyPart] = command;\n      var keyParts = keyPart.split(\" \").slice(0, -1);\n      keyParts.reduce(function (keyMapKeys, keyPart, i) {\n        var prefix = keyMapKeys[i - 1] ? keyMapKeys[i - 1] + ' ' : '';\n        return keyMapKeys.concat([prefix + keyPart]);\n      }, []).forEach(function (keyPart) {\n        if (!ckb[keyPart]) ckb[keyPart] = \"null\";\n      });\n    }, this);\n  };\n\n  exports.handler.getStatusText = function (editor, data) {\n    var str = \"\";\n    if (data.count) str += data.count;\n    if (data.keyChain) str += \" \" + data.keyChain;\n    return str;\n  };\n\n  exports.handler.handleKeyboard = function (data, hashId, key, keyCode) {\n    if (keyCode === -1) return undefined;\n    var editor = data.editor;\n\n    editor._signal(\"changeStatus\");\n\n    if (hashId == -1) {\n      editor.pushEmacsMark();\n\n      if (data.count) {\n        var str = new Array(data.count + 1).join(key);\n        data.count = null;\n        return {\n          command: \"insertstring\",\n          args: str\n        };\n      }\n    }\n\n    var modifier = eMods[hashId];\n\n    if (modifier == \"c-\" || data.count) {\n      var count = parseInt(key[key.length - 1]);\n\n      if (typeof count === 'number' && !isNaN(count)) {\n        data.count = Math.max(data.count, 0) || 0;\n        data.count = 10 * data.count + count;\n        return {\n          command: \"null\"\n        };\n      }\n    }\n\n    if (modifier) key = modifier + key;\n    if (data.keyChain) key = data.keyChain += \" \" + key;\n    var command = this.commandKeyBinding[key];\n    data.keyChain = command == \"null\" ? key : \"\";\n    if (!command) return undefined;\n    if (command === \"null\") return {\n      command: \"null\"\n    };\n\n    if (command === \"universalArgument\") {\n      data.count = -4;\n      return {\n        command: \"null\"\n      };\n    }\n\n    var args;\n\n    if (typeof command !== \"string\") {\n      args = command.args;\n      if (command.command) command = command.command;\n\n      if (command === \"goorselect\") {\n        command = editor.emacsMark() ? args[1] : args[0];\n        args = null;\n      }\n    }\n\n    if (typeof command === \"string\") {\n      if (command === \"insertstring\" || command === \"splitline\" || command === \"togglecomment\") {\n        editor.pushEmacsMark();\n      }\n\n      command = this.commands[command] || editor.commands.commands[command];\n      if (!command) return undefined;\n    }\n\n    if (!command.readOnly && !command.isYank) data.lastCommand = null;\n    if (!command.readOnly && editor.emacsMark()) editor.setEmacsMark(null);\n\n    if (data.count) {\n      var count = data.count;\n      data.count = 0;\n\n      if (!command || !command.handlesCount) {\n        return {\n          args: args,\n          command: {\n            exec: function (editor, args) {\n              for (var i = 0; i < count; i++) command.exec(editor, args);\n            },\n            multiSelectAction: command.multiSelectAction\n          }\n        };\n      } else {\n        if (!args) args = {};\n        if (typeof args === 'object') args.count = count;\n      }\n    }\n\n    return {\n      command: command,\n      args: args\n    };\n  };\n\n  exports.emacsKeys = {\n    \"Up|C-p\": {\n      command: \"goorselect\",\n      args: [\"golineup\", \"selectup\"]\n    },\n    \"Down|C-n\": {\n      command: \"goorselect\",\n      args: [\"golinedown\", \"selectdown\"]\n    },\n    \"Left|C-b\": {\n      command: \"goorselect\",\n      args: [\"gotoleft\", \"selectleft\"]\n    },\n    \"Right|C-f\": {\n      command: \"goorselect\",\n      args: [\"gotoright\", \"selectright\"]\n    },\n    \"C-Left|M-b\": {\n      command: \"goorselect\",\n      args: [\"gotowordleft\", \"selectwordleft\"]\n    },\n    \"C-Right|M-f\": {\n      command: \"goorselect\",\n      args: [\"gotowordright\", \"selectwordright\"]\n    },\n    \"Home|C-a\": {\n      command: \"goorselect\",\n      args: [\"gotolinestart\", \"selecttolinestart\"]\n    },\n    \"End|C-e\": {\n      command: \"goorselect\",\n      args: [\"gotolineend\", \"selecttolineend\"]\n    },\n    \"C-Home|S-M-,\": {\n      command: \"goorselect\",\n      args: [\"gotostart\", \"selecttostart\"]\n    },\n    \"C-End|S-M-.\": {\n      command: \"goorselect\",\n      args: [\"gotoend\", \"selecttoend\"]\n    },\n    \"S-Up|S-C-p\": \"selectup\",\n    \"S-Down|S-C-n\": \"selectdown\",\n    \"S-Left|S-C-b\": \"selectleft\",\n    \"S-Right|S-C-f\": \"selectright\",\n    \"S-C-Left|S-M-b\": \"selectwordleft\",\n    \"S-C-Right|S-M-f\": \"selectwordright\",\n    \"S-Home|S-C-a\": \"selecttolinestart\",\n    \"S-End|S-C-e\": \"selecttolineend\",\n    \"S-C-Home\": \"selecttostart\",\n    \"S-C-End\": \"selecttoend\",\n    \"C-l\": \"recenterTopBottom\",\n    \"M-s\": \"centerselection\",\n    \"M-g\": \"gotoline\",\n    \"C-x C-p\": \"selectall\",\n    \"C-Down\": {\n      command: \"goorselect\",\n      args: [\"gotopagedown\", \"selectpagedown\"]\n    },\n    \"C-Up\": {\n      command: \"goorselect\",\n      args: [\"gotopageup\", \"selectpageup\"]\n    },\n    \"PageDown|C-v\": {\n      command: \"goorselect\",\n      args: [\"gotopagedown\", \"selectpagedown\"]\n    },\n    \"PageUp|M-v\": {\n      command: \"goorselect\",\n      args: [\"gotopageup\", \"selectpageup\"]\n    },\n    \"S-C-Down\": \"selectpagedown\",\n    \"S-C-Up\": \"selectpageup\",\n    \"C-s\": \"iSearch\",\n    \"C-r\": \"iSearchBackwards\",\n    \"M-C-s\": \"findnext\",\n    \"M-C-r\": \"findprevious\",\n    \"S-M-5\": \"replace\",\n    \"Backspace\": \"backspace\",\n    \"Delete|C-d\": \"del\",\n    \"Return|C-m\": {\n      command: \"insertstring\",\n      args: \"\\n\"\n    },\n    // \"newline\"\n    \"C-o\": \"splitline\",\n    \"M-d|C-Delete\": {\n      command: \"killWord\",\n      args: \"right\"\n    },\n    \"C-Backspace|M-Backspace|M-Delete\": {\n      command: \"killWord\",\n      args: \"left\"\n    },\n    \"C-k\": \"killLine\",\n    \"C-y|S-Delete\": \"yank\",\n    \"M-y\": \"yankRotate\",\n    \"C-g\": \"keyboardQuit\",\n    \"C-w|C-S-W\": \"killRegion\",\n    \"M-w\": \"killRingSave\",\n    \"C-Space\": \"setMark\",\n    \"C-x C-x\": \"exchangePointAndMark\",\n    \"C-t\": \"transposeletters\",\n    \"M-u\": \"touppercase\",\n    // Doesn't work\n    \"M-l\": \"tolowercase\",\n    \"M-/\": \"autocomplete\",\n    // Doesn't work\n    \"C-u\": \"universalArgument\",\n    \"M-;\": \"togglecomment\",\n    \"C-/|C-x u|S-C--|C-z\": \"undo\",\n    \"S-C-/|S-C-x u|C--|S-C-z\": \"redo\",\n    // infinite undo?\n    \"C-x r\": \"selectRectangularRegion\",\n    \"M-x\": {\n      command: \"focusCommandLine\",\n      args: \"M-x \"\n    }\n  };\n  exports.handler.bindKeys(exports.emacsKeys);\n  exports.handler.addCommands({\n    recenterTopBottom: function (editor) {\n      var renderer = editor.renderer;\n      var pos = renderer.$cursorLayer.getPixelPosition();\n      var h = renderer.$size.scrollerHeight - renderer.lineHeight;\n      var scrollTop = renderer.scrollTop;\n\n      if (Math.abs(pos.top - scrollTop) < 2) {\n        scrollTop = pos.top - h;\n      } else if (Math.abs(pos.top - scrollTop - h * 0.5) < 2) {\n        scrollTop = pos.top;\n      } else {\n        scrollTop = pos.top - h * 0.5;\n      }\n\n      editor.session.setScrollTop(scrollTop);\n    },\n    selectRectangularRegion: function (editor) {\n      editor.multiSelect.toggleBlockSelection();\n    },\n    setMark: {\n      exec: function (editor, args) {\n        if (args && args.count) {\n          if (editor.inMultiSelectMode) editor.forEachSelection(moveToMark);else moveToMark();\n          moveToMark();\n          return;\n        }\n\n        var mark = editor.emacsMark(),\n            ranges = editor.selection.getAllRanges(),\n            rangePositions = ranges.map(function (r) {\n          return {\n            row: r.start.row,\n            column: r.start.column\n          };\n        }),\n            transientMarkModeActive = true,\n            hasNoSelection = ranges.every(function (range) {\n          return range.isEmpty();\n        });\n\n        if (transientMarkModeActive && (mark || !hasNoSelection)) {\n          if (editor.inMultiSelectMode) editor.forEachSelection({\n            exec: editor.clearSelection.bind(editor)\n          });else editor.clearSelection();\n          if (mark) editor.pushEmacsMark(null);\n          return;\n        }\n\n        if (!mark) {\n          rangePositions.forEach(function (pos) {\n            editor.pushEmacsMark(pos);\n          });\n          editor.setEmacsMark(rangePositions[rangePositions.length - 1]);\n          return;\n        }\n\n        function moveToMark() {\n          var mark = editor.popEmacsMark();\n          mark && editor.moveCursorToPosition(mark);\n        }\n      },\n      readOnly: true,\n      handlesCount: true\n    },\n    exchangePointAndMark: {\n      exec: function exchangePointAndMark$exec(editor, args) {\n        var sel = editor.selection;\n\n        if (!args.count && !sel.isEmpty()) {\n          // just invert selection\n          sel.setSelectionRange(sel.getRange(), !sel.isBackwards());\n          return;\n        }\n\n        if (args.count) {\n          // replace mark and point\n          var pos = {\n            row: sel.lead.row,\n            column: sel.lead.column\n          };\n          sel.clearSelection();\n          sel.moveCursorToPosition(editor.emacsMarkForSelection(pos));\n        } else {\n          // create selection to last mark\n          sel.selectToPosition(editor.emacsMarkForSelection());\n        }\n      },\n      readOnly: true,\n      handlesCount: true,\n      multiSelectAction: \"forEach\"\n    },\n    killWord: {\n      exec: function (editor, dir) {\n        editor.clearSelection();\n        if (dir == \"left\") editor.selection.selectWordLeft();else editor.selection.selectWordRight();\n        var range = editor.getSelectionRange();\n        var text = editor.session.getTextRange(range);\n        exports.killRing.add(text);\n        editor.session.remove(range);\n        editor.clearSelection();\n      },\n      multiSelectAction: \"forEach\"\n    },\n    killLine: function (editor) {\n      editor.pushEmacsMark(null);\n      editor.clearSelection();\n      var range = editor.getSelectionRange();\n      var line = editor.session.getLine(range.start.row);\n      range.end.column = line.length;\n      line = line.substr(range.start.column);\n      var foldLine = editor.session.getFoldLine(range.start.row);\n\n      if (foldLine && range.end.row != foldLine.end.row) {\n        range.end.row = foldLine.end.row;\n        line = \"x\";\n      }\n\n      if (/^\\s*$/.test(line)) {\n        range.end.row++;\n        line = editor.session.getLine(range.end.row);\n        range.end.column = /^\\s*$/.test(line) ? line.length : 0;\n      }\n\n      var text = editor.session.getTextRange(range);\n      if (editor.prevOp.command == this) exports.killRing.append(text);else exports.killRing.add(text);\n      editor.session.remove(range);\n      editor.clearSelection();\n    },\n    yank: function (editor) {\n      editor.onPaste(exports.killRing.get() || '');\n      editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    yankRotate: function (editor) {\n      if (editor.keyBinding.$data.lastCommand != \"yank\") return;\n      editor.undo();\n      editor.session.$emacsMarkRing.pop(); // also undo recording mark\n\n      editor.onPaste(exports.killRing.rotate());\n      editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    killRegion: {\n      exec: function (editor) {\n        exports.killRing.add(editor.getCopyText());\n        editor.commands.byName.cut.exec(editor);\n        editor.setEmacsMark(null);\n      },\n      readOnly: true,\n      multiSelectAction: \"forEach\"\n    },\n    killRingSave: {\n      exec: function (editor) {\n        editor.$handlesEmacsOnCopy = true;\n        var marks = editor.session.$emacsMarkRing.slice(),\n            deselectedMarks = [];\n        exports.killRing.add(editor.getCopyText());\n        setTimeout(function () {\n          function deselect() {\n            var sel = editor.selection,\n                range = sel.getRange(),\n                pos = sel.isBackwards() ? range.end : range.start;\n            deselectedMarks.push({\n              row: pos.row,\n              column: pos.column\n            });\n            sel.clearSelection();\n          }\n\n          editor.$handlesEmacsOnCopy = false;\n          if (editor.inMultiSelectMode) editor.forEachSelection({\n            exec: deselect\n          });else deselect();\n          editor.setEmacsMark(null);\n          editor.session.$emacsMarkRing = marks.concat(deselectedMarks.reverse());\n        }, 0);\n      },\n      readOnly: true\n    },\n    keyboardQuit: function (editor) {\n      editor.selection.clearSelection();\n      editor.setEmacsMark(null);\n      editor.keyBinding.$data.count = null;\n    },\n    focusCommandLine: function (editor, arg) {\n      if (editor.showCommandLine) editor.showCommandLine(arg);\n    }\n  });\n  exports.handler.addCommands(iSearchCommandModule.iSearchStartCommands);\n  var commands = exports.handler.commands;\n  commands.yank.isYank = true;\n  commands.yankRotate.isYank = true;\n  exports.killRing = {\n    $data: [],\n    add: function (str) {\n      str && this.$data.push(str);\n      if (this.$data.length > 30) this.$data.shift();\n    },\n    append: function (str) {\n      var idx = this.$data.length - 1;\n      var text = this.$data[idx] || \"\";\n      if (str) text += str;\n      if (text) this.$data[idx] = text;\n    },\n    get: function (n) {\n      n = n || 1;\n      return this.$data.slice(this.$data.length - n, this.$data.length).reverse().join('\\n');\n    },\n    pop: function () {\n      if (this.$data.length > 1) this.$data.pop();\n      return this.get();\n    },\n    rotate: function () {\n      this.$data.unshift(this.$data.pop());\n      return this.get();\n    }\n  };\n});\n\n(function () {\n  ace.require([\"ace/keyboard/emacs\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":{"version":3,"sources":["/home/magoo/projects/keyrier-json/node_modules/ace-builds/src-noconflict/keybinding-emacs.js"],"names":["ace","define","require","exports","module","oop","Range","Search","EditSession","SearchHighlight","Occur","inherits","enter","editor","options","needle","pos","getCursorPosition","displayOccurContent","translatedPos","originalToOccurPosition","session","moveCursorToPosition","exit","translatePosition","occurToOriginalPosition","displayOriginalContent","highlight","sess","regexp","hl","$occurHighlight","addDynamicMarker","setRegexp","_emit","$originalSession","found","matchingLines","lines","map","foundLine","content","occurSession","join","$occur","$occurMatchingLines","setSession","$useEmacsStyleLineStart","re","nullPos","row","column","i","length","mixin","search","set","findAll","reduce","range","start","last","concat","getLine","call","prototype","dom","importCssString","config","occurStartCommand","name","exec","alreadyInOccur","occurSessionActive","OccurKeyboardHandler","installIn","readOnly","occurCommands","bindKey","occur","uninstallFrom","HashHandler","isOccurHandler","attach","commands","platform","$editor","handleKeyboard$super","handleKeyboard","data","hashId","key","keyCode","cmd","command","undefined","handler","keyBinding","addKeyboardHandler","addCommands","removeCommands","getKeyboardHandler","removeKeyboardHandler","iSearchStartCommands","win","mac","loadModule","e","iSearch","IncrementalSearch","activate","backwards","jumpToFirstMatch","next","jumpToNext","execCommand","useCurrentOrPrevSearch","iSearchCommands","cancelSearch","string","addString","removeChar","deactivate","$options","ed","selection","getRangeOfMovements","sel","moveCursorWordRight","getTextRange","moveCursorRight","$isearchHighlight","ranges","cache","ea","forEach","addRange","bind","convertNeedleToRegExp","isIncrementalSearchCommand","scrollIntoView","IncrementalSearchKeyboardHandler","$iSearch","$commandExecHandler","on","stopPropagation","preventDefault","scrollTop","getScrollTop","result","args","renderer","scrollCursorIntoView","animateScrolling","detach","off","extendCmd","extendSearchTerm","iSearchCommandModule","ISearchKbd","wrap","skipCurrent","$keyboardHandler","isRegExp","obj","RegExp","regExpToObject","String","indexOf","flagStart","lastIndexOf","expression","slice","flags","stringToRegExp","objectToRegExp","$startPos","$currentPos","$originalEditorOnPaste","onPaste","$mousedownHandler","onMouseDown","selectionFix","statusMessage","reset","message","isEmpty","$emacsMark","clearSelection","$prevNeedle","pushEmacsMark","fromPoints","highlightAndFindWithNeedle","moveToNext","needleUpdateFunc","find","shouldSelect","emacsMark","end","setRange","s","reObj","c","substring","evt","text","convertNeedleToString","msg","showCommandLine","focus","setupIncrementalSearch","val","usesIncrementalSearch","method","CommandManager","Editor","defineOptions","useIncrementalSearch","$handlers","isEnabled","isEmacs","$id","initialized","$formerLongWords","$formerLineStart","$selectLongWords","$emacsMarkRing","setEmacsMark","p","prevMark","push","popEmacsMark","mark","pop","getLastEmacsMark","emacsMarkForSelection","replacement","multiRangeLength","multiSelect","getAllRanges","selIndex","index","markRing","markIndex","lastMark","anchor","splice","$resetMarkMode","$kbSessionChange","$blockCursor","setStyle","$emacsModeHandler","onCopy","unsetStyle","oldSession","hasOwnProperty","keys","KEY_MODS","eMods","C","S","M","CMD","combinations","split","toLowerCase","$handlesEmacsOnCopy","killRingSave","ckb","commandKeyBinding","keyPart","keyParts","keyMapKeys","prefix","getStatusText","str","count","keyChain","_signal","Array","modifier","parseInt","isNaN","Math","max","isYank","lastCommand","handlesCount","multiSelectAction","emacsKeys","bindKeys","recenterTopBottom","$cursorLayer","getPixelPosition","h","$size","scrollerHeight","lineHeight","abs","top","setScrollTop","selectRectangularRegion","toggleBlockSelection","setMark","inMultiSelectMode","forEachSelection","moveToMark","rangePositions","r","transientMarkModeActive","hasNoSelection","every","exchangePointAndMark","exchangePointAndMark$exec","setSelectionRange","getRange","isBackwards","lead","selectToPosition","killWord","dir","selectWordLeft","selectWordRight","getSelectionRange","killRing","add","remove","killLine","line","substr","foldLine","getFoldLine","test","prevOp","append","yank","get","$data","yankRotate","undo","rotate","killRegion","getCopyText","byName","cut","marks","deselectedMarks","setTimeout","deselect","reverse","keyboardQuit","focusCommandLine","arg","shift","idx","n","unshift","m"],"mappings":"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","sourcesContent":["ace.define(\"ace/occur\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/search\",\"ace/edit_session\",\"ace/search_highlight\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar Search = require(\"./search\").Search;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\nfunction Occur() {}\n\noop.inherits(Occur, Search);\n\n(function() {\n    this.enter = function(editor, options) {\n        if (!options.needle) return false;\n        var pos = editor.getCursorPosition();\n        this.displayOccurContent(editor, options);\n        var translatedPos = this.originalToOccurPosition(editor.session, pos);\n        editor.moveCursorToPosition(translatedPos);\n        return true;\n    };\n    this.exit = function(editor, options) {\n        var pos = options.translatePosition && editor.getCursorPosition();\n        var translatedPos = pos && this.occurToOriginalPosition(editor.session, pos);\n        this.displayOriginalContent(editor);\n        if (translatedPos)\n            editor.moveCursorToPosition(translatedPos);\n        return true;\n    };\n\n    this.highlight = function(sess, regexp) {\n        var hl = sess.$occurHighlight = sess.$occurHighlight || sess.addDynamicMarker(\n                new SearchHighlight(null, \"ace_occur-highlight\", \"text\"));\n        hl.setRegexp(regexp);\n        sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n    };\n\n    this.displayOccurContent = function(editor, options) {\n        this.$originalSession = editor.session;\n        var found = this.matchingLines(editor.session, options);\n        var lines = found.map(function(foundLine) { return foundLine.content; });\n        var occurSession = new EditSession(lines.join('\\n'));\n        occurSession.$occur = this;\n        occurSession.$occurMatchingLines = found;\n        editor.setSession(occurSession);\n        this.$useEmacsStyleLineStart = this.$originalSession.$useEmacsStyleLineStart;\n        occurSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n        this.highlight(occurSession, options.re);\n        occurSession._emit('changeBackMarker');\n    };\n\n    this.displayOriginalContent = function(editor) {\n        editor.setSession(this.$originalSession);\n        this.$originalSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n    };\n    this.originalToOccurPosition = function(session, pos) {\n        var lines = session.$occurMatchingLines;\n        var nullPos = {row: 0, column: 0};\n        if (!lines) return nullPos;\n        for (var i = 0; i < lines.length; i++) {\n            if (lines[i].row === pos.row)\n                return {row: i, column: pos.column};\n        }\n        return nullPos;\n    };\n    this.occurToOriginalPosition = function(session, pos) {\n        var lines = session.$occurMatchingLines;\n        if (!lines || !lines[pos.row])\n            return pos;\n        return {row: lines[pos.row].row, column: pos.column};\n    };\n\n    this.matchingLines = function(session, options) {\n        options = oop.mixin({}, options);\n        if (!session || !options.needle) return [];\n        var search = new Search();\n        search.set(options);\n        return search.findAll(session).reduce(function(lines, range) {\n            var row = range.start.row;\n            var last = lines[lines.length-1];\n            return last && last.row === row ?\n                lines :\n                lines.concat({row: row, content: session.getLine(row)});\n        }, []);\n    };\n\n}).call(Occur.prototype);\n\nvar dom = require('./lib/dom');\ndom.importCssString(\".ace_occur-highlight {\\n\\\n    border-radius: 4px;\\n\\\n    background-color: rgba(87, 255, 8, 0.25);\\n\\\n    position: absolute;\\n\\\n    z-index: 4;\\n\\\n    box-sizing: border-box;\\n\\\n    box-shadow: 0 0 4px rgb(91, 255, 50);\\n\\\n}\\n\\\n.ace_dark .ace_occur-highlight {\\n\\\n    background-color: rgb(80, 140, 85);\\n\\\n    box-shadow: 0 0 4px rgb(60, 120, 70);\\n\\\n}\\n\", \"incremental-occur-highlighting\");\n\nexports.Occur = Occur;\n\n});\n\nace.define(\"ace/commands/occur_commands\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/occur\",\"ace/keyboard/hash_handler\",\"ace/lib/oop\"], function(require, exports, module) {\n\nvar config = require(\"../config\"),\n    Occur = require(\"../occur\").Occur;\nvar occurStartCommand = {\n    name: \"occur\",\n    exec: function(editor, options) {\n        var alreadyInOccur = !!editor.session.$occur;\n        var occurSessionActive = new Occur().enter(editor, options);\n        if (occurSessionActive && !alreadyInOccur)\n            OccurKeyboardHandler.installIn(editor);\n    },\n    readOnly: true\n};\n\nvar occurCommands = [{\n    name: \"occurexit\",\n    bindKey: 'esc|Ctrl-G',\n    exec: function(editor) {\n        var occur = editor.session.$occur;\n        if (!occur) return;\n        occur.exit(editor, {});\n        if (!editor.session.$occur) OccurKeyboardHandler.uninstallFrom(editor);\n    },\n    readOnly: true\n}, {\n    name: \"occuraccept\",\n    bindKey: 'enter',\n    exec: function(editor) {\n        var occur = editor.session.$occur;\n        if (!occur) return;\n        occur.exit(editor, {translatePosition: true});\n        if (!editor.session.$occur) OccurKeyboardHandler.uninstallFrom(editor);\n    },\n    readOnly: true\n}];\n\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nvar oop = require(\"../lib/oop\");\n\n\nfunction OccurKeyboardHandler() {}\n\noop.inherits(OccurKeyboardHandler, HashHandler);\n\n(function() {\n\n    this.isOccurHandler = true;\n\n    this.attach = function(editor) {\n        HashHandler.call(this, occurCommands, editor.commands.platform);\n        this.$editor = editor;\n    };\n\n    var handleKeyboard$super = this.handleKeyboard;\n    this.handleKeyboard = function(data, hashId, key, keyCode) {\n        var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n        return (cmd && cmd.command) ? cmd : undefined;\n    };\n\n}).call(OccurKeyboardHandler.prototype);\n\nOccurKeyboardHandler.installIn = function(editor) {\n    var handler = new this();\n    editor.keyBinding.addKeyboardHandler(handler);\n    editor.commands.addCommands(occurCommands);\n};\n\nOccurKeyboardHandler.uninstallFrom = function(editor) {\n    editor.commands.removeCommands(occurCommands);\n    var handler = editor.getKeyboardHandler();\n    if (handler.isOccurHandler)\n        editor.keyBinding.removeKeyboardHandler(handler);\n};\n\nexports.occurStartCommand = occurStartCommand;\n\n});\n\nace.define(\"ace/commands/incremental_search_commands\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/commands/occur_commands\"], function(require, exports, module) {\n\nvar config = require(\"../config\");\nvar oop = require(\"../lib/oop\");\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nvar occurStartCommand = require(\"./occur_commands\").occurStartCommand;\nexports.iSearchStartCommands = [{\n    name: \"iSearch\",\n    bindKey: {win: \"Ctrl-F\", mac: \"Command-F\"},\n    exec: function(editor, options) {\n        config.loadModule([\"core\", \"ace/incremental_search\"], function(e) {\n            var iSearch = e.iSearch = e.iSearch || new e.IncrementalSearch();\n            iSearch.activate(editor, options.backwards);\n            if (options.jumpToFirstMatch) iSearch.next(options);\n        });\n    },\n    readOnly: true\n}, {\n    name: \"iSearchBackwards\",\n    exec: function(editor, jumpToNext) { editor.execCommand('iSearch', {backwards: true}); },\n    readOnly: true\n}, {\n    name: \"iSearchAndGo\",\n    bindKey: {win: \"Ctrl-K\", mac: \"Command-G\"},\n    exec: function(editor, jumpToNext) { editor.execCommand('iSearch', {jumpToFirstMatch: true, useCurrentOrPrevSearch: true}); },\n    readOnly: true\n}, {\n    name: \"iSearchBackwardsAndGo\",\n    bindKey: {win: \"Ctrl-Shift-K\", mac: \"Command-Shift-G\"},\n    exec: function(editor) { editor.execCommand('iSearch', {jumpToFirstMatch: true, backwards: true, useCurrentOrPrevSearch: true}); },\n    readOnly: true\n}];\nexports.iSearchCommands = [{\n    name: \"restartSearch\",\n    bindKey: {win: \"Ctrl-F\", mac: \"Command-F\"},\n    exec: function(iSearch) {\n        iSearch.cancelSearch(true);\n    }\n}, {\n    name: \"searchForward\",\n    bindKey: {win: \"Ctrl-S|Ctrl-K\", mac: \"Ctrl-S|Command-G\"},\n    exec: function(iSearch, options) {\n        options.useCurrentOrPrevSearch = true;\n        iSearch.next(options);\n    }\n}, {\n    name: \"searchBackward\",\n    bindKey: {win: \"Ctrl-R|Ctrl-Shift-K\", mac: \"Ctrl-R|Command-Shift-G\"},\n    exec: function(iSearch, options) {\n        options.useCurrentOrPrevSearch = true;\n        options.backwards = true;\n        iSearch.next(options);\n    }\n}, {\n    name: \"extendSearchTerm\",\n    exec: function(iSearch, string) {\n        iSearch.addString(string);\n    }\n}, {\n    name: \"extendSearchTermSpace\",\n    bindKey: \"space\",\n    exec: function(iSearch) { iSearch.addString(' '); }\n}, {\n    name: \"shrinkSearchTerm\",\n    bindKey: \"backspace\",\n    exec: function(iSearch) {\n        iSearch.removeChar();\n    }\n}, {\n    name: 'confirmSearch',\n    bindKey: 'return',\n    exec: function(iSearch) { iSearch.deactivate(); }\n}, {\n    name: 'cancelSearch',\n    bindKey: 'esc|Ctrl-G',\n    exec: function(iSearch) { iSearch.deactivate(true); }\n}, {\n    name: 'occurisearch',\n    bindKey: 'Ctrl-O',\n    exec: function(iSearch) {\n        var options = oop.mixin({}, iSearch.$options);\n        iSearch.deactivate();\n        occurStartCommand.exec(iSearch.$editor, options);\n    }\n}, {\n    name: \"yankNextWord\",\n    bindKey: \"Ctrl-w\",\n    exec: function(iSearch) {\n        var ed = iSearch.$editor,\n            range = ed.selection.getRangeOfMovements(function(sel) { sel.moveCursorWordRight(); }),\n            string = ed.session.getTextRange(range);\n        iSearch.addString(string);\n    }\n}, {\n    name: \"yankNextChar\",\n    bindKey: \"Ctrl-Alt-y\",\n    exec: function(iSearch) {\n        var ed = iSearch.$editor,\n            range = ed.selection.getRangeOfMovements(function(sel) { sel.moveCursorRight(); }),\n            string = ed.session.getTextRange(range);\n        iSearch.addString(string);\n    }\n}, {\n    name: 'recenterTopBottom',\n    bindKey: 'Ctrl-l',\n    exec: function(iSearch) { iSearch.$editor.execCommand('recenterTopBottom'); }\n}, {\n    name: 'selectAllMatches',\n    bindKey: 'Ctrl-space',\n    exec: function(iSearch) {\n        var ed = iSearch.$editor,\n            hl = ed.session.$isearchHighlight,\n            ranges = hl && hl.cache ? hl.cache\n                .reduce(function(ranges, ea) {\n                    return ranges.concat(ea ? ea : []); }, []) : [];\n        iSearch.deactivate(false);\n        ranges.forEach(ed.selection.addRange.bind(ed.selection));\n    }\n}, {\n    name: 'searchAsRegExp',\n    bindKey: 'Alt-r',\n    exec: function(iSearch) {\n        iSearch.convertNeedleToRegExp();\n    }\n}].map(function(cmd) {\n    cmd.readOnly = true;\n    cmd.isIncrementalSearchCommand = true;\n    cmd.scrollIntoView = \"animate-cursor\";\n    return cmd;\n});\n\nfunction IncrementalSearchKeyboardHandler(iSearch) {\n    this.$iSearch = iSearch;\n}\n\noop.inherits(IncrementalSearchKeyboardHandler, HashHandler);\n\n(function() {\n\n    this.attach = function(editor) {\n        var iSearch = this.$iSearch;\n        HashHandler.call(this, exports.iSearchCommands, editor.commands.platform);\n        this.$commandExecHandler = editor.commands.on('exec', function(e) {\n            if (!e.command.isIncrementalSearchCommand)\n                return iSearch.deactivate();\n            e.stopPropagation();\n            e.preventDefault();\n            var scrollTop = editor.session.getScrollTop();\n            var result = e.command.exec(iSearch, e.args || {});\n            editor.renderer.scrollCursorIntoView(null, 0.5);\n            editor.renderer.animateScrolling(scrollTop);\n            return result;\n        });\n    };\n\n    this.detach = function(editor) {\n        if (!this.$commandExecHandler) return;\n        editor.commands.off('exec', this.$commandExecHandler);\n        delete this.$commandExecHandler;\n    };\n\n    var handleKeyboard$super = this.handleKeyboard;\n    this.handleKeyboard = function(data, hashId, key, keyCode) {\n        if (((hashId === 1/*ctrl*/ || hashId === 8/*command*/) && key === 'v')\n         || (hashId === 1/*ctrl*/ && key === 'y')) return null;\n        var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n        if (cmd && cmd.command) { return cmd; }\n        if (hashId == -1) {\n            var extendCmd = this.commands.extendSearchTerm;\n            if (extendCmd) { return {command: extendCmd, args: key}; }\n        }\n        return false;\n    };\n\n}).call(IncrementalSearchKeyboardHandler.prototype);\n\n\nexports.IncrementalSearchKeyboardHandler = IncrementalSearchKeyboardHandler;\n\n});\n\nace.define(\"ace/incremental_search\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/search\",\"ace/search_highlight\",\"ace/commands/incremental_search_commands\",\"ace/lib/dom\",\"ace/commands/command_manager\",\"ace/editor\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar Search = require(\"./search\").Search;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\nvar iSearchCommandModule = require(\"./commands/incremental_search_commands\");\nvar ISearchKbd = iSearchCommandModule.IncrementalSearchKeyboardHandler;\nfunction IncrementalSearch() {\n    this.$options = {wrap: false, skipCurrent: false};\n    this.$keyboardHandler = new ISearchKbd(this);\n}\n\noop.inherits(IncrementalSearch, Search);\n\nfunction isRegExp(obj) {\n    return obj instanceof RegExp;\n}\n\nfunction regExpToObject(re) {\n    var string = String(re),\n        start = string.indexOf('/'),\n        flagStart = string.lastIndexOf('/');\n    return {\n        expression: string.slice(start+1, flagStart),\n        flags: string.slice(flagStart+1)\n    };\n}\n\nfunction stringToRegExp(string, flags) {\n    try {\n        return new RegExp(string, flags);\n    } catch (e) { return string; }\n}\n\nfunction objectToRegExp(obj) {\n    return stringToRegExp(obj.expression, obj.flags);\n}\n\n(function() {\n\n    this.activate = function(editor, backwards) {\n        this.$editor = editor;\n        this.$startPos = this.$currentPos = editor.getCursorPosition();\n        this.$options.needle = '';\n        this.$options.backwards = backwards;\n        editor.keyBinding.addKeyboardHandler(this.$keyboardHandler);\n        this.$originalEditorOnPaste = editor.onPaste; \n        editor.onPaste = this.onPaste.bind(this);\n        this.$mousedownHandler = editor.on('mousedown', this.onMouseDown.bind(this));\n        this.selectionFix(editor);\n        this.statusMessage(true);\n    };\n\n    this.deactivate = function(reset) {\n        this.cancelSearch(reset);\n        var editor = this.$editor;\n        editor.keyBinding.removeKeyboardHandler(this.$keyboardHandler);\n        if (this.$mousedownHandler) {\n            editor.off('mousedown', this.$mousedownHandler);\n            delete this.$mousedownHandler;\n        }\n        editor.onPaste = this.$originalEditorOnPaste;\n        this.message('');\n    };\n\n    this.selectionFix = function(editor) {\n        if (editor.selection.isEmpty() && !editor.session.$emacsMark) {\n            editor.clearSelection();\n        }\n    };\n\n    this.highlight = function(regexp) {\n        var sess = this.$editor.session,\n            hl = sess.$isearchHighlight = sess.$isearchHighlight || sess.addDynamicMarker(\n                new SearchHighlight(null, \"ace_isearch-result\", \"text\"));\n        hl.setRegexp(regexp);\n        sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n    };\n\n    this.cancelSearch = function(reset) {\n        var e = this.$editor;\n        this.$prevNeedle = this.$options.needle;\n        this.$options.needle = '';\n        if (reset) {\n            e.moveCursorToPosition(this.$startPos);\n            this.$currentPos = this.$startPos;\n        } else {\n            e.pushEmacsMark && e.pushEmacsMark(this.$startPos, false);\n        }\n        this.highlight(null);\n        return Range.fromPoints(this.$currentPos, this.$currentPos);\n    };\n\n    this.highlightAndFindWithNeedle = function(moveToNext, needleUpdateFunc) {\n        if (!this.$editor) return null;\n        var options = this.$options;\n        if (needleUpdateFunc) {\n            options.needle = needleUpdateFunc.call(this, options.needle || '') || '';\n        }\n        if (options.needle.length === 0) {\n            this.statusMessage(true);\n            return this.cancelSearch(true);\n        }\n        options.start = this.$currentPos;\n        var session = this.$editor.session,\n            found = this.find(session),\n            shouldSelect = this.$editor.emacsMark ?\n                !!this.$editor.emacsMark() : !this.$editor.selection.isEmpty();\n        if (found) {\n            if (options.backwards) found = Range.fromPoints(found.end, found.start);\n            this.$editor.selection.setRange(Range.fromPoints(shouldSelect ? this.$startPos : found.end, found.end));\n            if (moveToNext) this.$currentPos = found.end;\n            this.highlight(options.re);\n        }\n\n        this.statusMessage(found);\n\n        return found;\n    };\n\n    this.addString = function(s) {\n        return this.highlightAndFindWithNeedle(false, function(needle) {\n            if (!isRegExp(needle))\n              return needle + s;\n            var reObj = regExpToObject(needle);\n            reObj.expression += s;\n            return objectToRegExp(reObj);\n        });\n    };\n\n    this.removeChar = function(c) {\n        return this.highlightAndFindWithNeedle(false, function(needle) {\n            if (!isRegExp(needle))\n              return needle.substring(0, needle.length-1);\n            var reObj = regExpToObject(needle);\n            reObj.expression = reObj.expression.substring(0, reObj.expression.length-1);\n            return objectToRegExp(reObj);\n        });\n    };\n\n    this.next = function(options) {\n        options = options || {};\n        this.$options.backwards = !!options.backwards;\n        this.$currentPos = this.$editor.getCursorPosition();\n        return this.highlightAndFindWithNeedle(true, function(needle) {\n            return options.useCurrentOrPrevSearch && needle.length === 0 ?\n                this.$prevNeedle || '' : needle;\n        });\n    };\n\n    this.onMouseDown = function(evt) {\n        this.deactivate();\n        return true;\n    };\n\n    this.onPaste = function(text) {\n        this.addString(text);\n    };\n\n    this.convertNeedleToRegExp = function() {\n        return this.highlightAndFindWithNeedle(false, function(needle) {\n            return isRegExp(needle) ? needle : stringToRegExp(needle, 'ig');\n        });\n    };\n\n    this.convertNeedleToString = function() {\n        return this.highlightAndFindWithNeedle(false, function(needle) {\n            return isRegExp(needle) ? regExpToObject(needle).expression : needle;\n        });\n    };\n\n    this.statusMessage = function(found) {\n        var options = this.$options, msg = '';\n        msg += options.backwards ? 'reverse-' : '';\n        msg += 'isearch: ' + options.needle;\n        msg += found ? '' : ' (not found)';\n        this.message(msg);\n    };\n\n    this.message = function(msg) {\n        if (this.$editor.showCommandLine) {\n            this.$editor.showCommandLine(msg);\n            this.$editor.focus();\n        }\n    };\n\n}).call(IncrementalSearch.prototype);\n\n\nexports.IncrementalSearch = IncrementalSearch;\n\nvar dom = require('./lib/dom');\ndom.importCssString && dom.importCssString(\"\\\n.ace_marker-layer .ace_isearch-result {\\\n  position: absolute;\\\n  z-index: 6;\\\n  box-sizing: border-box;\\\n}\\\ndiv.ace_isearch-result {\\\n  border-radius: 4px;\\\n  background-color: rgba(255, 200, 0, 0.5);\\\n  box-shadow: 0 0 4px rgb(255, 200, 0);\\\n}\\\n.ace_dark div.ace_isearch-result {\\\n  background-color: rgb(100, 110, 160);\\\n  box-shadow: 0 0 4px rgb(80, 90, 140);\\\n}\", \"incremental-search-highlighting\");\nvar commands = require(\"./commands/command_manager\");\n(function() {\n    this.setupIncrementalSearch = function(editor, val) {\n        if (this.usesIncrementalSearch == val) return;\n        this.usesIncrementalSearch = val;\n        var iSearchCommands = iSearchCommandModule.iSearchStartCommands;\n        var method = val ? 'addCommands' : 'removeCommands';\n        this[method](iSearchCommands);\n    };\n}).call(commands.CommandManager.prototype);\nvar Editor = require(\"./editor\").Editor;\nrequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    useIncrementalSearch: {\n        set: function(val) {\n            this.keyBinding.$handlers.forEach(function(handler) {\n                if (handler.setupIncrementalSearch) {\n                    handler.setupIncrementalSearch(this, val);\n                }\n            });\n            this._emit('incrementalSearchSettingChanged', {isEnabled: val});\n        }\n    }\n});\n\n});\n\nace.define(\"ace/keyboard/emacs\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/incremental_search\",\"ace/commands/incremental_search_commands\",\"ace/keyboard/hash_handler\",\"ace/lib/keys\"], function(require, exports, module) {\n\"use strict\";\n\nvar dom = require(\"../lib/dom\");\nrequire(\"../incremental_search\");\nvar iSearchCommandModule = require(\"../commands/incremental_search_commands\");\n\n\nvar HashHandler = require(\"./hash_handler\").HashHandler;\nexports.handler = new HashHandler();\n\nexports.handler.isEmacs = true;\nexports.handler.$id = \"ace/keyboard/emacs\";\n\nvar initialized = false;\nvar $formerLongWords;\nvar $formerLineStart;\n\nexports.handler.attach = function(editor) {\n    if (!initialized) {\n        initialized = true;\n        dom.importCssString('\\\n            .emacs-mode .ace_cursor{\\\n                border: 1px rgba(50,250,50,0.8) solid!important;\\\n                box-sizing: border-box!important;\\\n                background-color: rgba(0,250,0,0.9);\\\n                opacity: 0.5;\\\n            }\\\n            .emacs-mode .ace_hidden-cursors .ace_cursor{\\\n                opacity: 1;\\\n                background-color: transparent;\\\n            }\\\n            .emacs-mode .ace_overwrite-cursors .ace_cursor {\\\n                opacity: 1;\\\n                background-color: transparent;\\\n                border-width: 0 0 2px 2px !important;\\\n            }\\\n            .emacs-mode .ace_text-layer {\\\n                z-index: 4\\\n            }\\\n            .emacs-mode .ace_cursor-layer {\\\n                z-index: 2\\\n            }', 'emacsMode'\n        );\n    }\n    $formerLongWords = editor.session.$selectLongWords;\n    editor.session.$selectLongWords = true;\n    $formerLineStart = editor.session.$useEmacsStyleLineStart;\n    editor.session.$useEmacsStyleLineStart = true;\n\n    editor.session.$emacsMark = null; // the active mark\n    editor.session.$emacsMarkRing = editor.session.$emacsMarkRing || [];\n\n    editor.emacsMark = function() {\n        return this.session.$emacsMark;\n    };\n\n    editor.setEmacsMark = function(p) {\n        this.session.$emacsMark = p;\n    };\n\n    editor.pushEmacsMark = function(p, activate) {\n        var prevMark = this.session.$emacsMark;\n        if (prevMark)\n            this.session.$emacsMarkRing.push(prevMark);\n        if (!p || activate) this.setEmacsMark(p);\n        else this.session.$emacsMarkRing.push(p);\n    };\n\n    editor.popEmacsMark = function() {\n        var mark = this.emacsMark();\n        if (mark) { this.setEmacsMark(null); return mark; }\n        return this.session.$emacsMarkRing.pop();\n    };\n\n    editor.getLastEmacsMark = function(p) {\n        return this.session.$emacsMark || this.session.$emacsMarkRing.slice(-1)[0];\n    };\n\n    editor.emacsMarkForSelection = function(replacement) {\n        var sel = this.selection,\n            multiRangeLength = this.multiSelect ?\n                this.multiSelect.getAllRanges().length : 1,\n            selIndex = sel.index || 0,\n            markRing = this.session.$emacsMarkRing,\n            markIndex = markRing.length - (multiRangeLength - selIndex),\n            lastMark = markRing[markIndex] || sel.anchor;\n        if (replacement) {\n            markRing.splice(markIndex, 1,\n                \"row\" in replacement && \"column\" in replacement ?\n                    replacement : undefined);\n        }\n        return lastMark;\n    };\n\n    editor.on(\"click\", $resetMarkMode);\n    editor.on(\"changeSession\", $kbSessionChange);\n    editor.renderer.$blockCursor = true;\n    editor.setStyle(\"emacs-mode\");\n    editor.commands.addCommands(commands);\n    exports.handler.platform = editor.commands.platform;\n    editor.$emacsModeHandler = this;\n    editor.on('copy', this.onCopy);\n    editor.on('paste', this.onPaste);\n};\n\nexports.handler.detach = function(editor) {\n    editor.renderer.$blockCursor = false;\n    editor.session.$selectLongWords = $formerLongWords;\n    editor.session.$useEmacsStyleLineStart = $formerLineStart;\n    editor.off(\"click\", $resetMarkMode);\n    editor.off(\"changeSession\", $kbSessionChange);\n    editor.unsetStyle(\"emacs-mode\");\n    editor.commands.removeCommands(commands);\n    editor.off('copy', this.onCopy);\n    editor.off('paste', this.onPaste);\n    editor.$emacsModeHandler = null;\n};\n\nvar $kbSessionChange = function(e) {\n    if (e.oldSession) {\n        e.oldSession.$selectLongWords = $formerLongWords;\n        e.oldSession.$useEmacsStyleLineStart = $formerLineStart;\n    }\n\n    $formerLongWords = e.session.$selectLongWords;\n    e.session.$selectLongWords = true;\n    $formerLineStart = e.session.$useEmacsStyleLineStart;\n    e.session.$useEmacsStyleLineStart = true;\n\n    if (!e.session.hasOwnProperty('$emacsMark'))\n        e.session.$emacsMark = null;\n    if (!e.session.hasOwnProperty('$emacsMarkRing'))\n        e.session.$emacsMarkRing = [];\n};\n\nvar $resetMarkMode = function(e) {\n    e.editor.session.$emacsMark = null;\n};\n\nvar keys = require(\"../lib/keys\").KEY_MODS;\nvar eMods = {C: \"ctrl\", S: \"shift\", M: \"alt\", CMD: \"command\"};\nvar combinations = [\"C-S-M-CMD\",\n                    \"S-M-CMD\", \"C-M-CMD\", \"C-S-CMD\", \"C-S-M\",\n                    \"M-CMD\", \"S-CMD\", \"S-M\", \"C-CMD\", \"C-M\", \"C-S\",\n                    \"CMD\", \"M\", \"S\", \"C\"];\ncombinations.forEach(function(c) {\n    var hashId = 0;\n    c.split(\"-\").forEach(function(c) {\n        hashId = hashId | keys[eMods[c]];\n    });\n    eMods[hashId] = c.toLowerCase() + \"-\";\n});\n\nexports.handler.onCopy = function(e, editor) {\n    if (editor.$handlesEmacsOnCopy) return;\n    editor.$handlesEmacsOnCopy = true;\n    exports.handler.commands.killRingSave.exec(editor);\n    editor.$handlesEmacsOnCopy = false;\n};\n\nexports.handler.onPaste = function(e, editor) {\n    editor.pushEmacsMark(editor.getCursorPosition());\n};\n\nexports.handler.bindKey = function(key, command) {\n    if (typeof key == \"object\")\n        key = key[this.platform];\n    if (!key)\n        return;\n\n    var ckb = this.commandKeyBinding;\n    key.split(\"|\").forEach(function(keyPart) {\n        keyPart = keyPart.toLowerCase();\n        ckb[keyPart] = command;\n        var keyParts = keyPart.split(\" \").slice(0,-1);\n        keyParts.reduce(function(keyMapKeys, keyPart, i) {\n            var prefix = keyMapKeys[i-1] ? keyMapKeys[i-1] + ' ' : '';\n            return keyMapKeys.concat([prefix + keyPart]);\n        }, []).forEach(function(keyPart) {\n            if (!ckb[keyPart]) ckb[keyPart] = \"null\";\n        });\n    }, this);\n};\n\nexports.handler.getStatusText = function(editor, data) {\n  var str = \"\";\n  if (data.count)\n    str += data.count;\n  if (data.keyChain)\n    str += \" \" + data.keyChain;\n  return str;\n};\n\nexports.handler.handleKeyboard = function(data, hashId, key, keyCode) {\n    if (keyCode === -1) return undefined;\n\n    var editor = data.editor;\n    editor._signal(\"changeStatus\");\n    if (hashId == -1) {\n        editor.pushEmacsMark();\n        if (data.count) {\n            var str = new Array(data.count + 1).join(key);\n            data.count = null;\n            return {command: \"insertstring\", args: str};\n        }\n    }\n\n    var modifier = eMods[hashId];\n    if (modifier == \"c-\" || data.count) {\n        var count = parseInt(key[key.length - 1]);\n        if (typeof count === 'number' && !isNaN(count)) {\n            data.count = Math.max(data.count, 0) || 0;\n            data.count = 10 * data.count + count;\n            return {command: \"null\"};\n        }\n    }\n    if (modifier) key = modifier + key;\n    if (data.keyChain) key = data.keyChain += \" \" + key;\n    var command = this.commandKeyBinding[key];\n    data.keyChain = command == \"null\" ? key : \"\";\n    if (!command) return undefined;\n    if (command === \"null\") return {command: \"null\"};\n\n    if (command === \"universalArgument\") {\n        data.count = -4;\n        return {command: \"null\"};\n    }\n    var args;\n    if (typeof command !== \"string\") {\n        args = command.args;\n        if (command.command) command = command.command;\n        if (command === \"goorselect\") {\n            command = editor.emacsMark() ? args[1] : args[0];\n            args = null;\n        }\n    }\n\n    if (typeof command === \"string\") {\n        if (command === \"insertstring\" ||\n            command === \"splitline\" ||\n            command === \"togglecomment\") {\n            editor.pushEmacsMark();\n        }\n        command = this.commands[command] || editor.commands.commands[command];\n        if (!command) return undefined;\n    }\n\n    if (!command.readOnly && !command.isYank)\n        data.lastCommand = null;\n\n    if (!command.readOnly && editor.emacsMark())\n        editor.setEmacsMark(null);\n        \n    if (data.count) {\n        var count = data.count;\n        data.count = 0;\n        if (!command || !command.handlesCount) {\n            return {\n                args: args,\n                command: {\n                    exec: function(editor, args) {\n                        for (var i = 0; i < count; i++)\n                            command.exec(editor, args);\n                    },\n                    multiSelectAction: command.multiSelectAction\n                }\n            };\n        } else {\n            if (!args) args = {};\n            if (typeof args === 'object') args.count = count;\n        }\n    }\n\n    return {command: command, args: args};\n};\n\nexports.emacsKeys = {\n    \"Up|C-p\"      : {command: \"goorselect\", args: [\"golineup\",\"selectup\"]},\n    \"Down|C-n\"    : {command: \"goorselect\", args: [\"golinedown\",\"selectdown\"]},\n    \"Left|C-b\"    : {command: \"goorselect\", args: [\"gotoleft\",\"selectleft\"]},\n    \"Right|C-f\"   : {command: \"goorselect\", args: [\"gotoright\",\"selectright\"]},\n    \"C-Left|M-b\"  : {command: \"goorselect\", args: [\"gotowordleft\",\"selectwordleft\"]},\n    \"C-Right|M-f\" : {command: \"goorselect\", args: [\"gotowordright\",\"selectwordright\"]},\n    \"Home|C-a\"    : {command: \"goorselect\", args: [\"gotolinestart\",\"selecttolinestart\"]},\n    \"End|C-e\"     : {command: \"goorselect\", args: [\"gotolineend\",\"selecttolineend\"]},\n    \"C-Home|S-M-,\": {command: \"goorselect\", args: [\"gotostart\",\"selecttostart\"]},\n    \"C-End|S-M-.\" : {command: \"goorselect\", args: [\"gotoend\",\"selecttoend\"]},\n    \"S-Up|S-C-p\"      : \"selectup\",\n    \"S-Down|S-C-n\"    : \"selectdown\",\n    \"S-Left|S-C-b\"    : \"selectleft\",\n    \"S-Right|S-C-f\"   : \"selectright\",\n    \"S-C-Left|S-M-b\"  : \"selectwordleft\",\n    \"S-C-Right|S-M-f\" : \"selectwordright\",\n    \"S-Home|S-C-a\"    : \"selecttolinestart\",\n    \"S-End|S-C-e\"     : \"selecttolineend\",\n    \"S-C-Home\"        : \"selecttostart\",\n    \"S-C-End\"         : \"selecttoend\",\n\n    \"C-l\" : \"recenterTopBottom\",\n    \"M-s\" : \"centerselection\",\n    \"M-g\": \"gotoline\",\n    \"C-x C-p\": \"selectall\",\n    \"C-Down\": {command: \"goorselect\", args: [\"gotopagedown\",\"selectpagedown\"]},\n    \"C-Up\": {command: \"goorselect\", args: [\"gotopageup\",\"selectpageup\"]},\n    \"PageDown|C-v\": {command: \"goorselect\", args: [\"gotopagedown\",\"selectpagedown\"]},\n    \"PageUp|M-v\": {command: \"goorselect\", args: [\"gotopageup\",\"selectpageup\"]},\n    \"S-C-Down\": \"selectpagedown\",\n    \"S-C-Up\": \"selectpageup\",\n\n    \"C-s\": \"iSearch\",\n    \"C-r\": \"iSearchBackwards\",\n\n    \"M-C-s\": \"findnext\",\n    \"M-C-r\": \"findprevious\",\n    \"S-M-5\": \"replace\",\n    \"Backspace\": \"backspace\",\n    \"Delete|C-d\": \"del\",\n    \"Return|C-m\": {command: \"insertstring\", args: \"\\n\"}, // \"newline\"\n    \"C-o\": \"splitline\",\n\n    \"M-d|C-Delete\": {command: \"killWord\", args: \"right\"},\n    \"C-Backspace|M-Backspace|M-Delete\": {command: \"killWord\", args: \"left\"},\n    \"C-k\": \"killLine\",\n\n    \"C-y|S-Delete\": \"yank\",\n    \"M-y\": \"yankRotate\",\n    \"C-g\": \"keyboardQuit\",\n\n    \"C-w|C-S-W\": \"killRegion\",\n    \"M-w\": \"killRingSave\",\n    \"C-Space\": \"setMark\",\n    \"C-x C-x\": \"exchangePointAndMark\",\n\n    \"C-t\": \"transposeletters\",\n    \"M-u\": \"touppercase\",    // Doesn't work\n    \"M-l\": \"tolowercase\",\n    \"M-/\": \"autocomplete\",   // Doesn't work\n    \"C-u\": \"universalArgument\",\n\n    \"M-;\": \"togglecomment\",\n\n    \"C-/|C-x u|S-C--|C-z\": \"undo\",\n    \"S-C-/|S-C-x u|C--|S-C-z\": \"redo\", // infinite undo?\n    \"C-x r\":  \"selectRectangularRegion\",\n    \"M-x\": {command: \"focusCommandLine\", args: \"M-x \"}\n};\n\n\nexports.handler.bindKeys(exports.emacsKeys);\n\nexports.handler.addCommands({\n    recenterTopBottom: function(editor) {\n        var renderer = editor.renderer;\n        var pos = renderer.$cursorLayer.getPixelPosition();\n        var h = renderer.$size.scrollerHeight - renderer.lineHeight;\n        var scrollTop = renderer.scrollTop;\n        if (Math.abs(pos.top - scrollTop) < 2) {\n            scrollTop = pos.top - h;\n        } else if (Math.abs(pos.top - scrollTop - h * 0.5) < 2) {\n            scrollTop = pos.top;\n        } else {\n            scrollTop = pos.top - h * 0.5;\n        }\n        editor.session.setScrollTop(scrollTop);\n    },\n    selectRectangularRegion:  function(editor) {\n        editor.multiSelect.toggleBlockSelection();\n    },\n    setMark:  {\n        exec: function(editor, args) {\n\n            if (args && args.count) {\n                if (editor.inMultiSelectMode) editor.forEachSelection(moveToMark);\n                else moveToMark();\n                moveToMark();\n                return;\n            }\n\n            var mark = editor.emacsMark(),\n                ranges = editor.selection.getAllRanges(),\n                rangePositions = ranges.map(function(r) { return {row: r.start.row, column: r.start.column}; }),\n                transientMarkModeActive = true,\n                hasNoSelection = ranges.every(function(range) { return range.isEmpty(); });\n            if (transientMarkModeActive && (mark || !hasNoSelection)) {\n                if (editor.inMultiSelectMode) editor.forEachSelection({exec: editor.clearSelection.bind(editor)});\n                else editor.clearSelection();\n                if (mark) editor.pushEmacsMark(null);\n                return;\n            }\n\n            if (!mark) {\n                rangePositions.forEach(function(pos) { editor.pushEmacsMark(pos); });\n                editor.setEmacsMark(rangePositions[rangePositions.length-1]);\n                return;\n            }\n\n            function moveToMark() {\n                var mark = editor.popEmacsMark();\n                mark && editor.moveCursorToPosition(mark);\n            }\n\n        },\n        readOnly: true,\n        handlesCount: true\n    },\n    exchangePointAndMark: {\n        exec: function exchangePointAndMark$exec(editor, args) {\n            var sel = editor.selection;\n            if (!args.count && !sel.isEmpty()) { // just invert selection\n                sel.setSelectionRange(sel.getRange(), !sel.isBackwards());\n                return;\n            }\n\n            if (args.count) { // replace mark and point\n                var pos = {row: sel.lead.row, column: sel.lead.column};\n                sel.clearSelection();\n                sel.moveCursorToPosition(editor.emacsMarkForSelection(pos));\n            } else { // create selection to last mark\n                sel.selectToPosition(editor.emacsMarkForSelection());\n            }\n        },\n        readOnly: true,\n        handlesCount: true,\n        multiSelectAction: \"forEach\"\n    },\n    killWord: {\n        exec: function(editor, dir) {\n            editor.clearSelection();\n            if (dir == \"left\")\n                editor.selection.selectWordLeft();\n            else\n                editor.selection.selectWordRight();\n\n            var range = editor.getSelectionRange();\n            var text = editor.session.getTextRange(range);\n            exports.killRing.add(text);\n\n            editor.session.remove(range);\n            editor.clearSelection();\n        },\n        multiSelectAction: \"forEach\"\n    },\n    killLine: function(editor) {\n        editor.pushEmacsMark(null);\n        editor.clearSelection();\n        var range = editor.getSelectionRange();\n        var line = editor.session.getLine(range.start.row);\n        range.end.column = line.length;\n        line = line.substr(range.start.column);\n        \n        var foldLine = editor.session.getFoldLine(range.start.row);\n        if (foldLine && range.end.row != foldLine.end.row) {\n            range.end.row = foldLine.end.row;\n            line = \"x\";\n        }\n        if (/^\\s*$/.test(line)) {\n            range.end.row++;\n            line = editor.session.getLine(range.end.row);\n            range.end.column = /^\\s*$/.test(line) ? line.length : 0;\n        }\n        var text = editor.session.getTextRange(range);\n        if (editor.prevOp.command == this)\n            exports.killRing.append(text);\n        else\n            exports.killRing.add(text);\n\n        editor.session.remove(range);\n        editor.clearSelection();\n    },\n    yank: function(editor) {\n        editor.onPaste(exports.killRing.get() || '');\n        editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    yankRotate: function(editor) {\n        if (editor.keyBinding.$data.lastCommand != \"yank\")\n            return;\n        editor.undo();\n        editor.session.$emacsMarkRing.pop(); // also undo recording mark\n        editor.onPaste(exports.killRing.rotate());\n        editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    killRegion: {\n        exec: function(editor) {\n            exports.killRing.add(editor.getCopyText());\n            editor.commands.byName.cut.exec(editor);\n            editor.setEmacsMark(null);\n        },\n        readOnly: true,\n        multiSelectAction: \"forEach\"\n    },\n    killRingSave: {\n        exec: function(editor) {\n\n            editor.$handlesEmacsOnCopy = true;\n            var marks = editor.session.$emacsMarkRing.slice(),\n                deselectedMarks = [];\n            exports.killRing.add(editor.getCopyText());\n\n            setTimeout(function() {\n                function deselect() {\n                    var sel = editor.selection, range = sel.getRange(),\n                        pos = sel.isBackwards() ? range.end : range.start;\n                    deselectedMarks.push({row: pos.row, column: pos.column});\n                    sel.clearSelection();\n                }\n                editor.$handlesEmacsOnCopy = false;\n                if (editor.inMultiSelectMode) editor.forEachSelection({exec: deselect});\n                else deselect();\n                editor.setEmacsMark(null);\n                editor.session.$emacsMarkRing = marks.concat(deselectedMarks.reverse());\n            }, 0);\n        },\n        readOnly: true\n    },\n    keyboardQuit: function(editor) {\n        editor.selection.clearSelection();\n        editor.setEmacsMark(null);\n        editor.keyBinding.$data.count = null;\n    },\n    focusCommandLine: function(editor, arg) {\n        if (editor.showCommandLine)\n            editor.showCommandLine(arg);\n    }\n});\n\nexports.handler.addCommands(iSearchCommandModule.iSearchStartCommands);\n\nvar commands = exports.handler.commands;\ncommands.yank.isYank = true;\ncommands.yankRotate.isYank = true;\n\nexports.killRing = {\n    $data: [],\n    add: function(str) {\n        str && this.$data.push(str);\n        if (this.$data.length > 30)\n            this.$data.shift();\n    },\n    append: function(str) {\n        var idx = this.$data.length - 1;\n        var text = this.$data[idx] || \"\";\n        if (str) text += str;\n        if (text) this.$data[idx] = text;\n    },\n    get: function(n) {\n        n = n || 1;\n        return this.$data.slice(this.$data.length-n, this.$data.length).reverse().join('\\n');\n    },\n    pop: function() {\n        if (this.$data.length > 1)\n            this.$data.pop();\n        return this.get();\n    },\n    rotate: function() {\n        this.$data.unshift(this.$data.pop());\n        return this.get();\n    }\n};\n\n});                (function() {\n                    ace.require([\"ace/keyboard/emacs\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "]},"metadata":{},"sourceType":"script"}