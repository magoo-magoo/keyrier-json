{"ast":null,"code":"\"no use strict\";\n\n!function (window) {\n  if (typeof window.window != \"undefined\" && window.document) return;\n  if (window.require && window.define) return;\n\n  if (!window.console) {\n    window.console = function () {\n      var msgs = Array.prototype.slice.call(arguments, 0);\n      postMessage({\n        type: \"log\",\n        data: msgs\n      });\n    };\n\n    window.console.error = window.console.warn = window.console.log = window.console.trace = window.console;\n  }\n\n  window.window = window;\n  window.ace = window;\n\n  window.onerror = function (message, file, line, col, err) {\n    postMessage({\n      type: \"error\",\n      data: {\n        message: message,\n        data: err.data,\n        file: file,\n        line: line,\n        col: col,\n        stack: err.stack\n      }\n    });\n  };\n\n  window.normalizeModule = function (parentId, moduleName) {\n    // normalize plugin requires\n    if (moduleName.indexOf(\"!\") !== -1) {\n      var chunks = moduleName.split(\"!\");\n      return window.normalizeModule(parentId, chunks[0]) + \"!\" + window.normalizeModule(parentId, chunks[1]);\n    } // normalize relative requires\n\n\n    if (moduleName.charAt(0) == \".\") {\n      var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\n      moduleName = (base ? base + \"/\" : \"\") + moduleName;\n\n      while (moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\n        var previous = moduleName;\n        moduleName = moduleName.replace(/^\\.\\//, \"\").replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\n      }\n    }\n\n    return moduleName;\n  };\n\n  window.require = function require(parentId, id) {\n    if (!id) {\n      id = parentId;\n      parentId = null;\n    }\n\n    if (!id.charAt) throw new Error(\"worker.js require() accepts only (parentId, id) as arguments\");\n    id = window.normalizeModule(parentId, id);\n    var module = window.require.modules[id];\n\n    if (module) {\n      if (!module.initialized) {\n        module.initialized = true;\n        module.exports = module.factory().exports;\n      }\n\n      return module.exports;\n    }\n\n    if (!window.require.tlns) return console.log(\"unable to load \" + id);\n    var path = resolveModuleId(id, window.require.tlns);\n    if (path.slice(-3) != \".js\") path += \".js\";\n    window.require.id = id;\n    window.require.modules[id] = {}; // prevent infinite loop on broken modules\n\n    importScripts(path);\n    return window.require(parentId, id);\n  };\n\n  function resolveModuleId(id, paths) {\n    var testPath = id,\n        tail = \"\";\n\n    while (testPath) {\n      var alias = paths[testPath];\n\n      if (typeof alias == \"string\") {\n        return alias + tail;\n      } else if (alias) {\n        return alias.location.replace(/\\/*$/, \"/\") + (tail || alias.main || alias.name);\n      } else if (alias === false) {\n        return \"\";\n      }\n\n      var i = testPath.lastIndexOf(\"/\");\n      if (i === -1) break;\n      tail = testPath.substr(i) + tail;\n      testPath = testPath.slice(0, i);\n    }\n\n    return id;\n  }\n\n  window.require.modules = {};\n  window.require.tlns = {};\n\n  window.define = function (id, deps, factory) {\n    if (arguments.length == 2) {\n      factory = deps;\n\n      if (typeof id != \"string\") {\n        deps = id;\n        id = window.require.id;\n      }\n    } else if (arguments.length == 1) {\n      factory = id;\n      deps = [];\n      id = window.require.id;\n    }\n\n    if (typeof factory != \"function\") {\n      window.require.modules[id] = {\n        exports: factory,\n        initialized: true\n      };\n      return;\n    }\n\n    if (!deps.length) // If there is no dependencies, we inject \"require\", \"exports\" and\n      // \"module\" as dependencies, to provide CommonJS compatibility.\n      deps = [\"require\", \"exports\", \"module\"];\n\n    var req = function (childId) {\n      return window.require(id, childId);\n    };\n\n    window.require.modules[id] = {\n      exports: {},\n      factory: function () {\n        var module = this;\n        var returnExports = factory.apply(this, deps.slice(0, factory.length).map(function (dep) {\n          switch (dep) {\n            // Because \"require\", \"exports\" and \"module\" aren't actual\n            // dependencies, we must handle them seperately.\n            case \"require\":\n              return req;\n\n            case \"exports\":\n              return module.exports;\n\n            case \"module\":\n              return module;\n            // But for all other dependencies, we can just go ahead and\n            // require them.\n\n            default:\n              return req(dep);\n          }\n        }));\n        if (returnExports) module.exports = returnExports;\n        return module;\n      }\n    };\n  };\n\n  window.define.amd = {};\n  require.tlns = {};\n\n  window.initBaseUrls = function initBaseUrls(topLevelNamespaces) {\n    for (var i in topLevelNamespaces) require.tlns[i] = topLevelNamespaces[i];\n  };\n\n  window.initSender = function initSender() {\n    var EventEmitter = window.require(\"ace/lib/event_emitter\").EventEmitter;\n\n    var oop = window.require(\"ace/lib/oop\");\n\n    var Sender = function () {};\n\n    (function () {\n      oop.implement(this, EventEmitter);\n\n      this.callback = function (data, callbackId) {\n        postMessage({\n          type: \"call\",\n          id: callbackId,\n          data: data\n        });\n      };\n\n      this.emit = function (name, data) {\n        postMessage({\n          type: \"event\",\n          name: name,\n          data: data\n        });\n      };\n    }).call(Sender.prototype);\n    return new Sender();\n  };\n\n  var main = window.main = null;\n  var sender = window.sender = null;\n\n  window.onmessage = function (e) {\n    var msg = e.data;\n\n    if (msg.event && sender) {\n      sender._signal(msg.event, msg.data);\n    } else if (msg.command) {\n      if (main[msg.command]) main[msg.command].apply(main, msg.args);else if (window[msg.command]) window[msg.command].apply(window, msg.args);else throw new Error(\"Unknown command:\" + msg.command);\n    } else if (msg.init) {\n      window.initBaseUrls(msg.tlns);\n\n      require(\"ace/lib/es5-shim\");\n\n      sender = window.sender = window.initSender();\n\n      var clazz = require(msg.module)[msg.classname];\n\n      main = window.main = new clazz(sender);\n    }\n  };\n}(this);\nace.define(\"ace/lib/oop\", [], function (require, exports, module) {\n  \"use strict\";\n\n  exports.inherits = function (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n\n  exports.mixin = function (obj, mixin) {\n    for (var key in mixin) {\n      obj[key] = mixin[key];\n    }\n\n    return obj;\n  };\n\n  exports.implement = function (proto, mixin) {\n    exports.mixin(proto, mixin);\n  };\n});\nace.define(\"ace/range\", [], function (require, exports, module) {\n  \"use strict\";\n\n  var comparePoints = function (p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n  };\n\n  var Range = function (startRow, startColumn, endRow, endColumn) {\n    this.start = {\n      row: startRow,\n      column: startColumn\n    };\n    this.end = {\n      row: endRow,\n      column: endColumn\n    };\n  };\n\n  (function () {\n    this.isEqual = function (range) {\n      return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column;\n    };\n\n    this.toString = function () {\n      return \"Range: [\" + this.start.row + \"/\" + this.start.column + \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\";\n    };\n\n    this.contains = function (row, column) {\n      return this.compare(row, column) == 0;\n    };\n\n    this.compareRange = function (range) {\n      var cmp,\n          end = range.end,\n          start = range.start;\n      cmp = this.compare(end.row, end.column);\n\n      if (cmp == 1) {\n        cmp = this.compare(start.row, start.column);\n\n        if (cmp == 1) {\n          return 2;\n        } else if (cmp == 0) {\n          return 1;\n        } else {\n          return 0;\n        }\n      } else if (cmp == -1) {\n        return -2;\n      } else {\n        cmp = this.compare(start.row, start.column);\n\n        if (cmp == -1) {\n          return -1;\n        } else if (cmp == 1) {\n          return 42;\n        } else {\n          return 0;\n        }\n      }\n    };\n\n    this.comparePoint = function (p) {\n      return this.compare(p.row, p.column);\n    };\n\n    this.containsRange = function (range) {\n      return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n\n    this.intersects = function (range) {\n      var cmp = this.compareRange(range);\n      return cmp == -1 || cmp == 0 || cmp == 1;\n    };\n\n    this.isEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column;\n    };\n\n    this.isStart = function (row, column) {\n      return this.start.row == row && this.start.column == column;\n    };\n\n    this.setStart = function (row, column) {\n      if (typeof row == \"object\") {\n        this.start.column = row.column;\n        this.start.row = row.row;\n      } else {\n        this.start.row = row;\n        this.start.column = column;\n      }\n    };\n\n    this.setEnd = function (row, column) {\n      if (typeof row == \"object\") {\n        this.end.column = row.column;\n        this.end.row = row.row;\n      } else {\n        this.end.row = row;\n        this.end.column = column;\n      }\n    };\n\n    this.inside = function (row, column) {\n      if (this.compare(row, column) == 0) {\n        if (this.isEnd(row, column) || this.isStart(row, column)) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    this.insideStart = function (row, column) {\n      if (this.compare(row, column) == 0) {\n        if (this.isEnd(row, column)) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    this.insideEnd = function (row, column) {\n      if (this.compare(row, column) == 0) {\n        if (this.isStart(row, column)) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    this.compare = function (row, column) {\n      if (!this.isMultiLine()) {\n        if (row === this.start.row) {\n          return column < this.start.column ? -1 : column > this.end.column ? 1 : 0;\n        }\n      }\n\n      if (row < this.start.row) return -1;\n      if (row > this.end.row) return 1;\n      if (this.start.row === row) return column >= this.start.column ? 0 : -1;\n      if (this.end.row === row) return column <= this.end.column ? 0 : 1;\n      return 0;\n    };\n\n    this.compareStart = function (row, column) {\n      if (this.start.row == row && this.start.column == column) {\n        return -1;\n      } else {\n        return this.compare(row, column);\n      }\n    };\n\n    this.compareEnd = function (row, column) {\n      if (this.end.row == row && this.end.column == column) {\n        return 1;\n      } else {\n        return this.compare(row, column);\n      }\n    };\n\n    this.compareInside = function (row, column) {\n      if (this.end.row == row && this.end.column == column) {\n        return 1;\n      } else if (this.start.row == row && this.start.column == column) {\n        return -1;\n      } else {\n        return this.compare(row, column);\n      }\n    };\n\n    this.clipRows = function (firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = {\n        row: lastRow + 1,\n        column: 0\n      };else if (this.end.row < firstRow) var end = {\n        row: firstRow,\n        column: 0\n      };\n      if (this.start.row > lastRow) var start = {\n        row: lastRow + 1,\n        column: 0\n      };else if (this.start.row < firstRow) var start = {\n        row: firstRow,\n        column: 0\n      };\n      return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    this.extend = function (row, column) {\n      var cmp = this.compare(row, column);\n      if (cmp == 0) return this;else if (cmp == -1) var start = {\n        row: row,\n        column: column\n      };else var end = {\n        row: row,\n        column: column\n      };\n      return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    this.isEmpty = function () {\n      return this.start.row === this.end.row && this.start.column === this.end.column;\n    };\n\n    this.isMultiLine = function () {\n      return this.start.row !== this.end.row;\n    };\n\n    this.clone = function () {\n      return Range.fromPoints(this.start, this.end);\n    };\n\n    this.collapseRows = function () {\n      if (this.end.column == 0) return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);else return new Range(this.start.row, 0, this.end.row, 0);\n    };\n\n    this.toScreenRange = function (session) {\n      var screenPosStart = session.documentToScreenPosition(this.start);\n      var screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column);\n    };\n\n    this.moveBy = function (row, column) {\n      this.start.row += row;\n      this.start.column += column;\n      this.end.row += row;\n      this.end.column += column;\n    };\n  }).call(Range.prototype);\n\n  Range.fromPoints = function (start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n  };\n\n  Range.comparePoints = comparePoints;\n\n  Range.comparePoints = function (p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n  };\n\n  exports.Range = Range;\n});\nace.define(\"ace/apply_delta\", [], function (require, exports, module) {\n  \"use strict\";\n\n  function throwDeltaError(delta, errorText) {\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n  }\n\n  function positionInDocument(docLines, position) {\n    return position.row >= 0 && position.row < docLines.length && position.column >= 0 && position.column <= docLines[position.row].length;\n  }\n\n  function validateDelta(docLines, delta) {\n    if (delta.action != \"insert\" && delta.action != \"remove\") throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    if (!(delta.lines instanceof Array)) throwDeltaError(delta, \"delta.lines must be an Array\");\n    if (!delta.start || !delta.end) throwDeltaError(delta, \"delta.start/end must be an present\");\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start)) throwDeltaError(delta, \"delta.start must be contained in document\");\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end)) throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = end.column - (numRangeRows == 0 ? start.column : 0);\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars) throwDeltaError(delta, \"delta.range must match delta lines\");\n  }\n\n  exports.applyDelta = function (docLines, delta, doNotValidate) {\n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n\n    switch (delta.action) {\n      case \"insert\":\n        var lines = delta.lines;\n\n        if (lines.length === 1) {\n          docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n        } else {\n          var args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args);\n          docLines[row] = line.substring(0, startColumn) + docLines[row];\n          docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n        }\n\n        break;\n\n      case \"remove\":\n        var endColumn = delta.end.column;\n        var endRow = delta.end.row;\n\n        if (row === endRow) {\n          docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n        } else {\n          docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn));\n        }\n\n        break;\n    }\n  };\n});\nace.define(\"ace/lib/event_emitter\", [], function (require, exports, module) {\n  \"use strict\";\n\n  var EventEmitter = {};\n\n  var stopPropagation = function () {\n    this.propagationStopped = true;\n  };\n\n  var preventDefault = function () {\n    this.defaultPrevented = true;\n  };\n\n  EventEmitter._emit = EventEmitter._dispatchEvent = function (eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler) return;\n    if (typeof e != \"object\" || !e) e = {};\n    if (!e.type) e.type = eventName;\n    if (!e.stopPropagation) e.stopPropagation = stopPropagation;\n    if (!e.preventDefault) e.preventDefault = preventDefault;\n    listeners = listeners.slice();\n\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i](e, this);\n      if (e.propagationStopped) break;\n    }\n\n    if (defaultHandler && !e.defaultPrevented) return defaultHandler(e, this);\n  };\n\n  EventEmitter._signal = function (eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners) return;\n    listeners = listeners.slice();\n\n    for (var i = 0; i < listeners.length; i++) listeners[i](e, this);\n  };\n\n  EventEmitter.once = function (eventName, callback) {\n    var _self = this;\n\n    this.on(eventName, function newCallback() {\n      _self.off(eventName, newCallback);\n\n      callback.apply(null, arguments);\n    });\n\n    if (!callback) {\n      return new Promise(function (resolve) {\n        callback = resolve;\n      });\n    }\n  };\n\n  EventEmitter.setDefaultHandler = function (eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers) handlers = this._defaultHandlers = {\n      _disabled_: {}\n    };\n\n    if (handlers[eventName]) {\n      var old = handlers[eventName];\n      var disabled = handlers._disabled_[eventName];\n      if (!disabled) handlers._disabled_[eventName] = disabled = [];\n      disabled.push(old);\n      var i = disabled.indexOf(callback);\n      if (i != -1) disabled.splice(i, 1);\n    }\n\n    handlers[eventName] = callback;\n  };\n\n  EventEmitter.removeDefaultHandler = function (eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers) return;\n    var disabled = handlers._disabled_[eventName];\n\n    if (handlers[eventName] == callback) {\n      if (disabled) this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n      var i = disabled.indexOf(callback);\n      if (i != -1) disabled.splice(i, 1);\n    }\n  };\n\n  EventEmitter.on = EventEmitter.addEventListener = function (eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners) listeners = this._eventRegistry[eventName] = [];\n    if (listeners.indexOf(callback) == -1) listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n  };\n\n  EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function (eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners) return;\n    var index = listeners.indexOf(callback);\n    if (index !== -1) listeners.splice(index, 1);\n  };\n\n  EventEmitter.removeAllListeners = function (eventName) {\n    if (!eventName) this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry) this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers) this._defaultHandlers[eventName] = undefined;\n  };\n\n  exports.EventEmitter = EventEmitter;\n});\nace.define(\"ace/anchor\", [], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"./lib/oop\");\n\n  var EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\n  var Anchor = exports.Anchor = function (doc, row, column) {\n    this.$onChange = this.onChange.bind(this);\n    this.attach(doc);\n    if (typeof column == \"undefined\") this.setPosition(row.row, row.column);else this.setPosition(row, column);\n  };\n\n  (function () {\n    oop.implement(this, EventEmitter);\n\n    this.getPosition = function () {\n      return this.$clipPositionToDocument(this.row, this.column);\n    };\n\n    this.getDocument = function () {\n      return this.document;\n    };\n\n    this.$insertRight = false;\n\n    this.onChange = function (delta) {\n      if (delta.start.row == delta.end.row && delta.start.row != this.row) return;\n      if (delta.start.row > this.row) return;\n      var point = $getTransformedPoint(delta, {\n        row: this.row,\n        column: this.column\n      }, this.$insertRight);\n      this.setPosition(point.row, point.column, true);\n    };\n\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n      var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n      return point1.row < point2.row || point1.row == point2.row && bColIsAfter;\n    }\n\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n      var deltaIsInsert = delta.action == \"insert\";\n      var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row);\n      var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n      var deltaStart = delta.start;\n      var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n\n      if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n        return {\n          row: point.row,\n          column: point.column\n        };\n      }\n\n      if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n        return {\n          row: point.row + deltaRowShift,\n          column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n        };\n      }\n\n      return {\n        row: deltaStart.row,\n        column: deltaStart.column\n      };\n    }\n\n    this.setPosition = function (row, column, noClip) {\n      var pos;\n\n      if (noClip) {\n        pos = {\n          row: row,\n          column: column\n        };\n      } else {\n        pos = this.$clipPositionToDocument(row, column);\n      }\n\n      if (this.row == pos.row && this.column == pos.column) return;\n      var old = {\n        row: this.row,\n        column: this.column\n      };\n      this.row = pos.row;\n      this.column = pos.column;\n\n      this._signal(\"change\", {\n        old: old,\n        value: pos\n      });\n    };\n\n    this.detach = function () {\n      this.document.off(\"change\", this.$onChange);\n    };\n\n    this.attach = function (doc) {\n      this.document = doc || this.document;\n      this.document.on(\"change\", this.$onChange);\n    };\n\n    this.$clipPositionToDocument = function (row, column) {\n      var pos = {};\n\n      if (row >= this.document.getLength()) {\n        pos.row = Math.max(0, this.document.getLength() - 1);\n        pos.column = this.document.getLine(pos.row).length;\n      } else if (row < 0) {\n        pos.row = 0;\n        pos.column = 0;\n      } else {\n        pos.row = row;\n        pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n      }\n\n      if (column < 0) pos.column = 0;\n      return pos;\n    };\n  }).call(Anchor.prototype);\n});\nace.define(\"ace/document\", [], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"./lib/oop\");\n\n  var applyDelta = require(\"./apply_delta\").applyDelta;\n\n  var EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\n  var Range = require(\"./range\").Range;\n\n  var Anchor = require(\"./anchor\").Anchor;\n\n  var Document = function (textOrLines) {\n    this.$lines = [\"\"];\n\n    if (textOrLines.length === 0) {\n      this.$lines = [\"\"];\n    } else if (Array.isArray(textOrLines)) {\n      this.insertMergedLines({\n        row: 0,\n        column: 0\n      }, textOrLines);\n    } else {\n      this.insert({\n        row: 0,\n        column: 0\n      }, textOrLines);\n    }\n  };\n\n  (function () {\n    oop.implement(this, EventEmitter);\n\n    this.setValue = function (text) {\n      var len = this.getLength() - 1;\n      this.remove(new Range(0, 0, len, this.getLine(len).length));\n      this.insert({\n        row: 0,\n        column: 0\n      }, text);\n    };\n\n    this.getValue = function () {\n      return this.getAllLines().join(this.getNewLineCharacter());\n    };\n\n    this.createAnchor = function (row, column) {\n      return new Anchor(this, row, column);\n    };\n\n    if (\"aaa\".split(/a/).length === 0) {\n      this.$split = function (text) {\n        return text.replace(/\\r\\n|\\r/g, \"\\n\").split(\"\\n\");\n      };\n    } else {\n      this.$split = function (text) {\n        return text.split(/\\r\\n|\\r|\\n/);\n      };\n    }\n\n    this.$detectNewLine = function (text) {\n      var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n      this.$autoNewLine = match ? match[1] : \"\\n\";\n\n      this._signal(\"changeNewLineMode\");\n    };\n\n    this.getNewLineCharacter = function () {\n      switch (this.$newLineMode) {\n        case \"windows\":\n          return \"\\r\\n\";\n\n        case \"unix\":\n          return \"\\n\";\n\n        default:\n          return this.$autoNewLine || \"\\n\";\n      }\n    };\n\n    this.$autoNewLine = \"\";\n    this.$newLineMode = \"auto\";\n\n    this.setNewLineMode = function (newLineMode) {\n      if (this.$newLineMode === newLineMode) return;\n      this.$newLineMode = newLineMode;\n\n      this._signal(\"changeNewLineMode\");\n    };\n\n    this.getNewLineMode = function () {\n      return this.$newLineMode;\n    };\n\n    this.isNewLine = function (text) {\n      return text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\";\n    };\n\n    this.getLine = function (row) {\n      return this.$lines[row] || \"\";\n    };\n\n    this.getLines = function (firstRow, lastRow) {\n      return this.$lines.slice(firstRow, lastRow + 1);\n    };\n\n    this.getAllLines = function () {\n      return this.getLines(0, this.getLength());\n    };\n\n    this.getLength = function () {\n      return this.$lines.length;\n    };\n\n    this.getTextRange = function (range) {\n      return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n\n    this.getLinesForRange = function (range) {\n      var lines;\n\n      if (range.start.row === range.end.row) {\n        lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n      } else {\n        lines = this.getLines(range.start.row, range.end.row);\n        lines[0] = (lines[0] || \"\").substring(range.start.column);\n        var l = lines.length - 1;\n        if (range.end.row - range.start.row == l) lines[l] = lines[l].substring(0, range.end.column);\n      }\n\n      return lines;\n    };\n\n    this.insertLines = function (row, lines) {\n      console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n      return this.insertFullLines(row, lines);\n    };\n\n    this.removeLines = function (firstRow, lastRow) {\n      console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n      return this.removeFullLines(firstRow, lastRow);\n    };\n\n    this.insertNewLine = function (position) {\n      console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n      return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n\n    this.insert = function (position, text) {\n      if (this.getLength() <= 1) this.$detectNewLine(text);\n      return this.insertMergedLines(position, this.$split(text));\n    };\n\n    this.insertInLine = function (position, text) {\n      var start = this.clippedPos(position.row, position.column);\n      var end = this.pos(position.row, position.column + text.length);\n      this.applyDelta({\n        start: start,\n        end: end,\n        action: \"insert\",\n        lines: [text]\n      }, true);\n      return this.clonePos(end);\n    };\n\n    this.clippedPos = function (row, column) {\n      var length = this.getLength();\n\n      if (row === undefined) {\n        row = length;\n      } else if (row < 0) {\n        row = 0;\n      } else if (row >= length) {\n        row = length - 1;\n        column = undefined;\n      }\n\n      var line = this.getLine(row);\n      if (column == undefined) column = line.length;\n      column = Math.min(Math.max(column, 0), line.length);\n      return {\n        row: row,\n        column: column\n      };\n    };\n\n    this.clonePos = function (pos) {\n      return {\n        row: pos.row,\n        column: pos.column\n      };\n    };\n\n    this.pos = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n\n    this.$clipPosition = function (position) {\n      var length = this.getLength();\n\n      if (position.row >= length) {\n        position.row = Math.max(0, length - 1);\n        position.column = this.getLine(length - 1).length;\n      } else {\n        position.row = Math.max(0, position.row);\n        position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n      }\n\n      return position;\n    };\n\n    this.insertFullLines = function (row, lines) {\n      row = Math.min(Math.max(row, 0), this.getLength());\n      var column = 0;\n\n      if (row < this.getLength()) {\n        lines = lines.concat([\"\"]);\n        column = 0;\n      } else {\n        lines = [\"\"].concat(lines);\n        row--;\n        column = this.$lines[row].length;\n      }\n\n      this.insertMergedLines({\n        row: row,\n        column: column\n      }, lines);\n    };\n\n    this.insertMergedLines = function (position, lines) {\n      var start = this.clippedPos(position.row, position.column);\n      var end = {\n        row: start.row + lines.length - 1,\n        column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n      };\n      this.applyDelta({\n        start: start,\n        end: end,\n        action: \"insert\",\n        lines: lines\n      });\n      return this.clonePos(end);\n    };\n\n    this.remove = function (range) {\n      var start = this.clippedPos(range.start.row, range.start.column);\n      var end = this.clippedPos(range.end.row, range.end.column);\n      this.applyDelta({\n        start: start,\n        end: end,\n        action: \"remove\",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      });\n      return this.clonePos(start);\n    };\n\n    this.removeInLine = function (row, startColumn, endColumn) {\n      var start = this.clippedPos(row, startColumn);\n      var end = this.clippedPos(row, endColumn);\n      this.applyDelta({\n        start: start,\n        end: end,\n        action: \"remove\",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }, true);\n      return this.clonePos(start);\n    };\n\n    this.removeFullLines = function (firstRow, lastRow) {\n      firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n      lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n      var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n      var deleteLastNewLine = lastRow < this.getLength() - 1;\n      var startRow = deleteFirstNewLine ? firstRow - 1 : firstRow;\n      var startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0;\n      var endRow = deleteLastNewLine ? lastRow + 1 : lastRow;\n      var endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length;\n      var range = new Range(startRow, startCol, endRow, endCol);\n      var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n      this.applyDelta({\n        start: range.start,\n        end: range.end,\n        action: \"remove\",\n        lines: this.getLinesForRange(range)\n      });\n      return deletedLines;\n    };\n\n    this.removeNewLine = function (row) {\n      if (row < this.getLength() - 1 && row >= 0) {\n        this.applyDelta({\n          start: this.pos(row, this.getLine(row).length),\n          end: this.pos(row + 1, 0),\n          action: \"remove\",\n          lines: [\"\", \"\"]\n        });\n      }\n    };\n\n    this.replace = function (range, text) {\n      if (!(range instanceof Range)) range = Range.fromPoints(range.start, range.end);\n      if (text.length === 0 && range.isEmpty()) return range.start;\n      if (text == this.getTextRange(range)) return range.end;\n      this.remove(range);\n      var end;\n\n      if (text) {\n        end = this.insert(range.start, text);\n      } else {\n        end = range.start;\n      }\n\n      return end;\n    };\n\n    this.applyDeltas = function (deltas) {\n      for (var i = 0; i < deltas.length; i++) {\n        this.applyDelta(deltas[i]);\n      }\n    };\n\n    this.revertDeltas = function (deltas) {\n      for (var i = deltas.length - 1; i >= 0; i--) {\n        this.revertDelta(deltas[i]);\n      }\n    };\n\n    this.applyDelta = function (delta, doNotValidate) {\n      var isInsert = delta.action == \"insert\";\n\n      if (isInsert ? delta.lines.length <= 1 && !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) {\n        return;\n      }\n\n      if (isInsert && delta.lines.length > 20000) {\n        this.$splitAndapplyLargeDelta(delta, 20000);\n      } else {\n        applyDelta(this.$lines, delta, doNotValidate);\n\n        this._signal(\"change\", delta);\n      }\n    };\n\n    this.$safeApplyDelta = function (delta) {\n      var docLength = this.$lines.length;\n\n      if (delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength || delta.action == \"insert\" && delta.start.row <= docLength) {\n        this.applyDelta(delta);\n      }\n    };\n\n    this.$splitAndapplyLargeDelta = function (delta, MAX) {\n      var lines = delta.lines;\n      var l = lines.length - MAX + 1;\n      var row = delta.start.row;\n      var column = delta.start.column;\n\n      for (var from = 0, to = 0; from < l; from = to) {\n        to += MAX - 1;\n        var chunk = lines.slice(from, to);\n        chunk.push(\"\");\n        this.applyDelta({\n          start: this.pos(row + from, column),\n          end: this.pos(row + to, column = 0),\n          action: delta.action,\n          lines: chunk\n        }, true);\n      }\n\n      delta.lines = lines.slice(from);\n      delta.start.row = row + from;\n      delta.start.column = column;\n      this.applyDelta(delta, true);\n    };\n\n    this.revertDelta = function (delta) {\n      this.$safeApplyDelta({\n        start: this.clonePos(delta.start),\n        end: this.clonePos(delta.end),\n        action: delta.action == \"insert\" ? \"remove\" : \"insert\",\n        lines: delta.lines.slice()\n      });\n    };\n\n    this.indexToPosition = function (index, startRow) {\n      var lines = this.$lines || this.getAllLines();\n      var newlineLength = this.getNewLineCharacter().length;\n\n      for (var i = startRow || 0, l = lines.length; i < l; i++) {\n        index -= lines[i].length + newlineLength;\n        if (index < 0) return {\n          row: i,\n          column: index + lines[i].length + newlineLength\n        };\n      }\n\n      return {\n        row: l - 1,\n        column: index + lines[l - 1].length + newlineLength\n      };\n    };\n\n    this.positionToIndex = function (pos, startRow) {\n      var lines = this.$lines || this.getAllLines();\n      var newlineLength = this.getNewLineCharacter().length;\n      var index = 0;\n      var row = Math.min(pos.row, lines.length);\n\n      for (var i = startRow || 0; i < row; ++i) index += lines[i].length + newlineLength;\n\n      return index + pos.column;\n    };\n  }).call(Document.prototype);\n  exports.Document = Document;\n});\nace.define(\"ace/lib/lang\", [], function (require, exports, module) {\n  \"use strict\";\n\n  exports.last = function (a) {\n    return a[a.length - 1];\n  };\n\n  exports.stringReverse = function (string) {\n    return string.split(\"\").reverse().join(\"\");\n  };\n\n  exports.stringRepeat = function (string, count) {\n    var result = '';\n\n    while (count > 0) {\n      if (count & 1) result += string;\n      if (count >>= 1) string += string;\n    }\n\n    return result;\n  };\n\n  var trimBeginRegexp = /^\\s\\s*/;\n  var trimEndRegexp = /\\s\\s*$/;\n\n  exports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n  };\n\n  exports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n  };\n\n  exports.copyObject = function (obj) {\n    var copy = {};\n\n    for (var key in obj) {\n      copy[key] = obj[key];\n    }\n\n    return copy;\n  };\n\n  exports.copyArray = function (array) {\n    var copy = [];\n\n    for (var i = 0, l = array.length; i < l; i++) {\n      if (array[i] && typeof array[i] == \"object\") copy[i] = this.copyObject(array[i]);else copy[i] = array[i];\n    }\n\n    return copy;\n  };\n\n  exports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj) return obj;\n    var copy;\n\n    if (Array.isArray(obj)) {\n      copy = [];\n\n      for (var key = 0; key < obj.length; key++) {\n        copy[key] = deepCopy(obj[key]);\n      }\n\n      return copy;\n    }\n\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\") return obj;\n    copy = {};\n\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n\n    return copy;\n  };\n\n  exports.arrayToMap = function (arr) {\n    var map = {};\n\n    for (var i = 0; i < arr.length; i++) {\n      map[arr[i]] = 1;\n    }\n\n    return map;\n  };\n\n  exports.createMap = function (props) {\n    var map = Object.create(null);\n\n    for (var i in props) {\n      map[i] = props[i];\n    }\n\n    return map;\n  };\n\n  exports.arrayRemove = function (array, value) {\n    for (var i = 0; i <= array.length; i++) {\n      if (value === array[i]) {\n        array.splice(i, 1);\n      }\n    }\n  };\n\n  exports.escapeRegExp = function (str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  };\n\n  exports.escapeHTML = function (str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n  };\n\n  exports.getMatchOffsets = function (string, regExp) {\n    var matches = [];\n    string.replace(regExp, function (str) {\n      matches.push({\n        offset: arguments[arguments.length - 2],\n        length: str.length\n      });\n    });\n    return matches;\n  };\n\n  exports.deferredCall = function (fcn) {\n    var timer = null;\n\n    var callback = function () {\n      timer = null;\n      fcn();\n    };\n\n    var deferred = function (timeout) {\n      deferred.cancel();\n      timer = setTimeout(callback, timeout || 0);\n      return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function () {\n      this.cancel();\n      fcn();\n      return deferred;\n    };\n\n    deferred.cancel = function () {\n      clearTimeout(timer);\n      timer = null;\n      return deferred;\n    };\n\n    deferred.isPending = function () {\n      return timer;\n    };\n\n    return deferred;\n  };\n\n  exports.delayedCall = function (fcn, defaultTimeout) {\n    var timer = null;\n\n    var callback = function () {\n      timer = null;\n      fcn();\n    };\n\n    var _self = function (timeout) {\n      if (timer == null) timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function (timeout) {\n      timer && clearTimeout(timer);\n      timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.schedule = _self;\n\n    _self.call = function () {\n      this.cancel();\n      fcn();\n    };\n\n    _self.cancel = function () {\n      timer && clearTimeout(timer);\n      timer = null;\n    };\n\n    _self.isPending = function () {\n      return timer;\n    };\n\n    return _self;\n  };\n});\nace.define(\"ace/worker/mirror\", [], function (require, exports, module) {\n  \"use strict\";\n\n  var Range = require(\"../range\").Range;\n\n  var Document = require(\"../document\").Document;\n\n  var lang = require(\"../lib/lang\");\n\n  var Mirror = exports.Mirror = function (sender) {\n    this.sender = sender;\n    var doc = this.doc = new Document(\"\");\n    var deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this));\n\n    var _self = this;\n\n    sender.on(\"change\", function (e) {\n      var data = e.data;\n\n      if (data[0].start) {\n        doc.applyDeltas(data);\n      } else {\n        for (var i = 0; i < data.length; i += 2) {\n          if (Array.isArray(data[i + 1])) {\n            var d = {\n              action: \"insert\",\n              start: data[i],\n              lines: data[i + 1]\n            };\n          } else {\n            var d = {\n              action: \"remove\",\n              start: data[i],\n              end: data[i + 1]\n            };\n          }\n\n          doc.applyDelta(d, true);\n        }\n      }\n\n      if (_self.$timeout) return deferredUpdate.schedule(_self.$timeout);\n\n      _self.onUpdate();\n    });\n  };\n\n  (function () {\n    this.$timeout = 500;\n\n    this.setTimeout = function (timeout) {\n      this.$timeout = timeout;\n    };\n\n    this.setValue = function (value) {\n      this.doc.setValue(value);\n      this.deferredUpdate.schedule(this.$timeout);\n    };\n\n    this.getValue = function (callbackId) {\n      this.sender.callback(this.doc.getValue(), callbackId);\n    };\n\n    this.onUpdate = function () {};\n\n    this.isPending = function () {\n      return this.deferredUpdate.isPending();\n    };\n  }).call(Mirror.prototype);\n});\nace.define(\"ace/mode/lua/luaparse\", [], function (require, exports, module) {\n  (function (root, name, factory) {\n    factory(exports);\n  })(this, 'luaparse', function (exports) {\n    'use strict';\n\n    exports.version = '0.1.4';\n    var input, options, length;\n    var defaultOptions = exports.defaultOptions = {\n      wait: false,\n      comments: true,\n      scope: false,\n      locations: false,\n      ranges: false\n    };\n    var EOF = 1,\n        StringLiteral = 2,\n        Keyword = 4,\n        Identifier = 8,\n        NumericLiteral = 16,\n        Punctuator = 32,\n        BooleanLiteral = 64,\n        NilLiteral = 128,\n        VarargLiteral = 256;\n    exports.tokenTypes = {\n      EOF: EOF,\n      StringLiteral: StringLiteral,\n      Keyword: Keyword,\n      Identifier: Identifier,\n      NumericLiteral: NumericLiteral,\n      Punctuator: Punctuator,\n      BooleanLiteral: BooleanLiteral,\n      NilLiteral: NilLiteral,\n      VarargLiteral: VarargLiteral\n    };\n    var errors = exports.errors = {\n      unexpected: 'Unexpected %1 \\'%2\\' near \\'%3\\'',\n      expected: '\\'%1\\' expected near \\'%2\\'',\n      expectedToken: '%1 expected near \\'%2\\'',\n      unfinishedString: 'unfinished string near \\'%1\\'',\n      malformedNumber: 'malformed number near \\'%1\\''\n    };\n    var ast = exports.ast = {\n      labelStatement: function (label) {\n        return {\n          type: 'LabelStatement',\n          label: label\n        };\n      },\n      breakStatement: function () {\n        return {\n          type: 'BreakStatement'\n        };\n      },\n      gotoStatement: function (label) {\n        return {\n          type: 'GotoStatement',\n          label: label\n        };\n      },\n      returnStatement: function (args) {\n        return {\n          type: 'ReturnStatement',\n          'arguments': args\n        };\n      },\n      ifStatement: function (clauses) {\n        return {\n          type: 'IfStatement',\n          clauses: clauses\n        };\n      },\n      ifClause: function (condition, body) {\n        return {\n          type: 'IfClause',\n          condition: condition,\n          body: body\n        };\n      },\n      elseifClause: function (condition, body) {\n        return {\n          type: 'ElseifClause',\n          condition: condition,\n          body: body\n        };\n      },\n      elseClause: function (body) {\n        return {\n          type: 'ElseClause',\n          body: body\n        };\n      },\n      whileStatement: function (condition, body) {\n        return {\n          type: 'WhileStatement',\n          condition: condition,\n          body: body\n        };\n      },\n      doStatement: function (body) {\n        return {\n          type: 'DoStatement',\n          body: body\n        };\n      },\n      repeatStatement: function (condition, body) {\n        return {\n          type: 'RepeatStatement',\n          condition: condition,\n          body: body\n        };\n      },\n      localStatement: function (variables, init) {\n        return {\n          type: 'LocalStatement',\n          variables: variables,\n          init: init\n        };\n      },\n      assignmentStatement: function (variables, init) {\n        return {\n          type: 'AssignmentStatement',\n          variables: variables,\n          init: init\n        };\n      },\n      callStatement: function (expression) {\n        return {\n          type: 'CallStatement',\n          expression: expression\n        };\n      },\n      functionStatement: function (identifier, parameters, isLocal, body) {\n        return {\n          type: 'FunctionDeclaration',\n          identifier: identifier,\n          isLocal: isLocal,\n          parameters: parameters,\n          body: body\n        };\n      },\n      forNumericStatement: function (variable, start, end, step, body) {\n        return {\n          type: 'ForNumericStatement',\n          variable: variable,\n          start: start,\n          end: end,\n          step: step,\n          body: body\n        };\n      },\n      forGenericStatement: function (variables, iterators, body) {\n        return {\n          type: 'ForGenericStatement',\n          variables: variables,\n          iterators: iterators,\n          body: body\n        };\n      },\n      chunk: function (body) {\n        return {\n          type: 'Chunk',\n          body: body\n        };\n      },\n      identifier: function (name) {\n        return {\n          type: 'Identifier',\n          name: name\n        };\n      },\n      literal: function (type, value, raw) {\n        type = type === StringLiteral ? 'StringLiteral' : type === NumericLiteral ? 'NumericLiteral' : type === BooleanLiteral ? 'BooleanLiteral' : type === NilLiteral ? 'NilLiteral' : 'VarargLiteral';\n        return {\n          type: type,\n          value: value,\n          raw: raw\n        };\n      },\n      tableKey: function (key, value) {\n        return {\n          type: 'TableKey',\n          key: key,\n          value: value\n        };\n      },\n      tableKeyString: function (key, value) {\n        return {\n          type: 'TableKeyString',\n          key: key,\n          value: value\n        };\n      },\n      tableValue: function (value) {\n        return {\n          type: 'TableValue',\n          value: value\n        };\n      },\n      tableConstructorExpression: function (fields) {\n        return {\n          type: 'TableConstructorExpression',\n          fields: fields\n        };\n      },\n      binaryExpression: function (operator, left, right) {\n        var type = 'and' === operator || 'or' === operator ? 'LogicalExpression' : 'BinaryExpression';\n        return {\n          type: type,\n          operator: operator,\n          left: left,\n          right: right\n        };\n      },\n      unaryExpression: function (operator, argument) {\n        return {\n          type: 'UnaryExpression',\n          operator: operator,\n          argument: argument\n        };\n      },\n      memberExpression: function (base, indexer, identifier) {\n        return {\n          type: 'MemberExpression',\n          indexer: indexer,\n          identifier: identifier,\n          base: base\n        };\n      },\n      indexExpression: function (base, index) {\n        return {\n          type: 'IndexExpression',\n          base: base,\n          index: index\n        };\n      },\n      callExpression: function (base, args) {\n        return {\n          type: 'CallExpression',\n          base: base,\n          'arguments': args\n        };\n      },\n      tableCallExpression: function (base, args) {\n        return {\n          type: 'TableCallExpression',\n          base: base,\n          'arguments': args\n        };\n      },\n      stringCallExpression: function (base, argument) {\n        return {\n          type: 'StringCallExpression',\n          base: base,\n          argument: argument\n        };\n      },\n      comment: function (value, raw) {\n        return {\n          type: 'Comment',\n          value: value,\n          raw: raw\n        };\n      }\n    };\n\n    function finishNode(node) {\n      if (trackLocations) {\n        var location = locations.pop();\n        location.complete();\n        if (options.locations) node.loc = location.loc;\n        if (options.ranges) node.range = location.range;\n      }\n\n      return node;\n    }\n\n    var slice = Array.prototype.slice,\n        toString = Object.prototype.toString,\n        indexOf = function indexOf(array, element) {\n      for (var i = 0, length = array.length; i < length; i++) {\n        if (array[i] === element) return i;\n      }\n\n      return -1;\n    };\n\n    function indexOfObject(array, property, element) {\n      for (var i = 0, length = array.length; i < length; i++) {\n        if (array[i][property] === element) return i;\n      }\n\n      return -1;\n    }\n\n    function sprintf(format) {\n      var args = slice.call(arguments, 1);\n      format = format.replace(/%(\\d)/g, function (match, index) {\n        return '' + args[index - 1] || '';\n      });\n      return format;\n    }\n\n    function extend() {\n      var args = slice.call(arguments),\n          dest = {},\n          src,\n          prop;\n\n      for (var i = 0, length = args.length; i < length; i++) {\n        src = args[i];\n\n        for (prop in src) if (src.hasOwnProperty(prop)) {\n          dest[prop] = src[prop];\n        }\n      }\n\n      return dest;\n    }\n\n    function raise(token) {\n      var message = sprintf.apply(null, slice.call(arguments, 1)),\n          error,\n          col;\n\n      if ('undefined' !== typeof token.line) {\n        col = token.range[0] - token.lineStart;\n        error = new SyntaxError(sprintf('[%1:%2] %3', token.line, col, message));\n        error.line = token.line;\n        error.index = token.range[0];\n        error.column = col;\n      } else {\n        col = index - lineStart + 1;\n        error = new SyntaxError(sprintf('[%1:%2] %3', line, col, message));\n        error.index = index;\n        error.line = line;\n        error.column = col;\n      }\n\n      throw error;\n    }\n\n    function raiseUnexpectedToken(type, token) {\n      raise(token, errors.expectedToken, type, token.value);\n    }\n\n    function unexpected(found, near) {\n      if ('undefined' === typeof near) near = lookahead.value;\n\n      if ('undefined' !== typeof found.type) {\n        var type;\n\n        switch (found.type) {\n          case StringLiteral:\n            type = 'string';\n            break;\n\n          case Keyword:\n            type = 'keyword';\n            break;\n\n          case Identifier:\n            type = 'identifier';\n            break;\n\n          case NumericLiteral:\n            type = 'number';\n            break;\n\n          case Punctuator:\n            type = 'symbol';\n            break;\n\n          case BooleanLiteral:\n            type = 'boolean';\n            break;\n\n          case NilLiteral:\n            return raise(found, errors.unexpected, 'symbol', 'nil', near);\n        }\n\n        return raise(found, errors.unexpected, type, found.value, near);\n      }\n\n      return raise(found, errors.unexpected, 'symbol', found, near);\n    }\n\n    var index, token, previousToken, lookahead, comments, tokenStart, line, lineStart;\n    exports.lex = lex;\n\n    function lex() {\n      skipWhiteSpace();\n\n      while (45 === input.charCodeAt(index) && 45 === input.charCodeAt(index + 1)) {\n        scanComment();\n        skipWhiteSpace();\n      }\n\n      if (index >= length) return {\n        type: EOF,\n        value: '<eof>',\n        line: line,\n        lineStart: lineStart,\n        range: [index, index]\n      };\n      var charCode = input.charCodeAt(index),\n          next = input.charCodeAt(index + 1);\n      tokenStart = index;\n      if (isIdentifierStart(charCode)) return scanIdentifierOrKeyword();\n\n      switch (charCode) {\n        case 39:\n        case 34:\n          // '\"\n          return scanStringLiteral();\n\n        case 48:\n        case 49:\n        case 50:\n        case 51:\n        case 52:\n        case 53:\n        case 54:\n        case 55:\n        case 56:\n        case 57:\n          return scanNumericLiteral();\n\n        case 46:\n          // .\n          if (isDecDigit(next)) return scanNumericLiteral();\n\n          if (46 === next) {\n            if (46 === input.charCodeAt(index + 2)) return scanVarargLiteral();\n            return scanPunctuator('..');\n          }\n\n          return scanPunctuator('.');\n\n        case 61:\n          // =\n          if (61 === next) return scanPunctuator('==');\n          return scanPunctuator('=');\n\n        case 62:\n          // >\n          if (61 === next) return scanPunctuator('>=');\n          return scanPunctuator('>');\n\n        case 60:\n          // <\n          if (61 === next) return scanPunctuator('<=');\n          return scanPunctuator('<');\n\n        case 126:\n          // ~\n          if (61 === next) return scanPunctuator('~=');\n          return scanPunctuator('~');\n\n        case 58:\n          // :\n          if (58 === next) return scanPunctuator('::');\n          return scanPunctuator(':');\n\n        case 91:\n          // [\n          if (91 === next || 61 === next) return scanLongStringLiteral();\n          return scanPunctuator('[');\n\n        case 42:\n        case 47:\n        case 94:\n        case 37:\n        case 44:\n        case 123:\n        case 125:\n        case 93:\n        case 40:\n        case 41:\n        case 59:\n        case 35:\n        case 45:\n        case 43:\n        case 38:\n        case 124:\n          return scanPunctuator(input.charAt(index));\n      }\n\n      return unexpected(input.charAt(index));\n    }\n\n    function skipWhiteSpace() {\n      while (index < length) {\n        var charCode = input.charCodeAt(index);\n\n        if (isWhiteSpace(charCode)) {\n          index++;\n        } else if (isLineTerminator(charCode)) {\n          line++;\n          lineStart = ++index;\n        } else {\n          break;\n        }\n      }\n    }\n\n    function scanIdentifierOrKeyword() {\n      var value, type;\n\n      while (isIdentifierPart(input.charCodeAt(++index)));\n\n      value = input.slice(tokenStart, index);\n\n      if (isKeyword(value)) {\n        type = Keyword;\n      } else if ('true' === value || 'false' === value) {\n        type = BooleanLiteral;\n        value = 'true' === value;\n      } else if ('nil' === value) {\n        type = NilLiteral;\n        value = null;\n      } else {\n        type = Identifier;\n      }\n\n      return {\n        type: type,\n        value: value,\n        line: line,\n        lineStart: lineStart,\n        range: [tokenStart, index]\n      };\n    }\n\n    function scanPunctuator(value) {\n      index += value.length;\n      return {\n        type: Punctuator,\n        value: value,\n        line: line,\n        lineStart: lineStart,\n        range: [tokenStart, index]\n      };\n    }\n\n    function scanVarargLiteral() {\n      index += 3;\n      return {\n        type: VarargLiteral,\n        value: '...',\n        line: line,\n        lineStart: lineStart,\n        range: [tokenStart, index]\n      };\n    }\n\n    function scanStringLiteral() {\n      var delimiter = input.charCodeAt(index++),\n          stringStart = index,\n          string = '',\n          charCode;\n\n      while (index < length) {\n        charCode = input.charCodeAt(index++);\n        if (delimiter === charCode) break;\n\n        if (92 === charCode) {\n          // \\\n          string += input.slice(stringStart, index - 1) + readEscapeSequence();\n          stringStart = index;\n        } else if (index >= length || isLineTerminator(charCode)) {\n          string += input.slice(stringStart, index - 1);\n          raise({}, errors.unfinishedString, string + String.fromCharCode(charCode));\n        }\n      }\n\n      string += input.slice(stringStart, index - 1);\n      return {\n        type: StringLiteral,\n        value: string,\n        line: line,\n        lineStart: lineStart,\n        range: [tokenStart, index]\n      };\n    }\n\n    function scanLongStringLiteral() {\n      var string = readLongString();\n      if (false === string) raise(token, errors.expected, '[', token.value);\n      return {\n        type: StringLiteral,\n        value: string,\n        line: line,\n        lineStart: lineStart,\n        range: [tokenStart, index]\n      };\n    }\n\n    function scanNumericLiteral() {\n      var character = input.charAt(index),\n          next = input.charAt(index + 1);\n      var value = '0' === character && 'xX'.indexOf(next || null) >= 0 ? readHexLiteral() : readDecLiteral();\n      return {\n        type: NumericLiteral,\n        value: value,\n        line: line,\n        lineStart: lineStart,\n        range: [tokenStart, index]\n      };\n    }\n\n    function readHexLiteral() {\n      var fraction = 0 // defaults to 0 as it gets summed\n      ,\n          binaryExponent = 1 // defaults to 1 as it gets multiplied\n      ,\n          binarySign = 1 // positive\n      ,\n          digit,\n          fractionStart,\n          exponentStart,\n          digitStart;\n      digitStart = index += 2; // Skip 0x part\n\n      if (!isHexDigit(input.charCodeAt(index))) raise({}, errors.malformedNumber, input.slice(tokenStart, index));\n\n      while (isHexDigit(input.charCodeAt(index))) index++;\n\n      digit = parseInt(input.slice(digitStart, index), 16);\n\n      if ('.' === input.charAt(index)) {\n        fractionStart = ++index;\n\n        while (isHexDigit(input.charCodeAt(index))) index++;\n\n        fraction = input.slice(fractionStart, index);\n        fraction = fractionStart === index ? 0 : parseInt(fraction, 16) / Math.pow(16, index - fractionStart);\n      }\n\n      if ('pP'.indexOf(input.charAt(index) || null) >= 0) {\n        index++;\n        if ('+-'.indexOf(input.charAt(index) || null) >= 0) binarySign = '+' === input.charAt(index++) ? 1 : -1;\n        exponentStart = index;\n        if (!isDecDigit(input.charCodeAt(index))) raise({}, errors.malformedNumber, input.slice(tokenStart, index));\n\n        while (isDecDigit(input.charCodeAt(index))) index++;\n\n        binaryExponent = input.slice(exponentStart, index);\n        binaryExponent = Math.pow(2, binaryExponent * binarySign);\n      }\n\n      return (digit + fraction) * binaryExponent;\n    }\n\n    function readDecLiteral() {\n      while (isDecDigit(input.charCodeAt(index))) index++;\n\n      if ('.' === input.charAt(index)) {\n        index++;\n\n        while (isDecDigit(input.charCodeAt(index))) index++;\n      }\n\n      if ('eE'.indexOf(input.charAt(index) || null) >= 0) {\n        index++;\n        if ('+-'.indexOf(input.charAt(index) || null) >= 0) index++;\n        if (!isDecDigit(input.charCodeAt(index))) raise({}, errors.malformedNumber, input.slice(tokenStart, index));\n\n        while (isDecDigit(input.charCodeAt(index))) index++;\n      }\n\n      return parseFloat(input.slice(tokenStart, index));\n    }\n\n    function readEscapeSequence() {\n      var sequenceStart = index;\n\n      switch (input.charAt(index)) {\n        case 'n':\n          index++;\n          return '\\n';\n\n        case 'r':\n          index++;\n          return '\\r';\n\n        case 't':\n          index++;\n          return '\\t';\n\n        case 'v':\n          index++;\n          return '\\x0B';\n\n        case 'b':\n          index++;\n          return '\\b';\n\n        case 'f':\n          index++;\n          return '\\f';\n\n        case 'z':\n          index++;\n          skipWhiteSpace();\n          return '';\n\n        case 'x':\n          if (isHexDigit(input.charCodeAt(index + 1)) && isHexDigit(input.charCodeAt(index + 2))) {\n            index += 3;\n            return '\\\\' + input.slice(sequenceStart, index);\n          }\n\n          return '\\\\' + input.charAt(index++);\n\n        default:\n          if (isDecDigit(input.charCodeAt(index))) {\n            while (isDecDigit(input.charCodeAt(++index)));\n\n            return '\\\\' + input.slice(sequenceStart, index);\n          }\n\n          return input.charAt(index++);\n      }\n    }\n\n    function scanComment() {\n      tokenStart = index;\n      index += 2; // --\n\n      var character = input.charAt(index),\n          content = '',\n          isLong = false,\n          commentStart = index,\n          lineStartComment = lineStart,\n          lineComment = line;\n\n      if ('[' === character) {\n        content = readLongString();\n        if (false === content) content = character;else isLong = true;\n      }\n\n      if (!isLong) {\n        while (index < length) {\n          if (isLineTerminator(input.charCodeAt(index))) break;\n          index++;\n        }\n\n        if (options.comments) content = input.slice(commentStart, index);\n      }\n\n      if (options.comments) {\n        var node = ast.comment(content, input.slice(tokenStart, index));\n\n        if (options.locations) {\n          node.loc = {\n            start: {\n              line: lineComment,\n              column: tokenStart - lineStartComment\n            },\n            end: {\n              line: line,\n              column: index - lineStart\n            }\n          };\n        }\n\n        if (options.ranges) {\n          node.range = [tokenStart, index];\n        }\n\n        comments.push(node);\n      }\n    }\n\n    function readLongString() {\n      var level = 0,\n          content = '',\n          terminator = false,\n          character,\n          stringStart;\n      index++; // [\n\n      while ('=' === input.charAt(index + level)) level++;\n\n      if ('[' !== input.charAt(index + level)) return false;\n      index += level + 1;\n\n      if (isLineTerminator(input.charCodeAt(index))) {\n        line++;\n        lineStart = index++;\n      }\n\n      stringStart = index;\n\n      while (index < length) {\n        character = input.charAt(index++);\n\n        if (isLineTerminator(character.charCodeAt(0))) {\n          line++;\n          lineStart = index;\n        }\n\n        if (']' === character) {\n          terminator = true;\n\n          for (var i = 0; i < level; i++) {\n            if ('=' !== input.charAt(index + i)) terminator = false;\n          }\n\n          if (']' !== input.charAt(index + level)) terminator = false;\n        }\n\n        if (terminator) break;\n      }\n\n      content += input.slice(stringStart, index - 1);\n      index += level + 1;\n      return content;\n    }\n\n    function next() {\n      previousToken = token;\n      token = lookahead;\n      lookahead = lex();\n    }\n\n    function consume(value) {\n      if (value === token.value) {\n        next();\n        return true;\n      }\n\n      return false;\n    }\n\n    function expect(value) {\n      if (value === token.value) next();else raise(token, errors.expected, value, token.value);\n    }\n\n    function isWhiteSpace(charCode) {\n      return 9 === charCode || 32 === charCode || 0xB === charCode || 0xC === charCode;\n    }\n\n    function isLineTerminator(charCode) {\n      return 10 === charCode || 13 === charCode;\n    }\n\n    function isDecDigit(charCode) {\n      return charCode >= 48 && charCode <= 57;\n    }\n\n    function isHexDigit(charCode) {\n      return charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70;\n    }\n\n    function isIdentifierStart(charCode) {\n      return charCode >= 65 && charCode <= 90 || charCode >= 97 && charCode <= 122 || 95 === charCode;\n    }\n\n    function isIdentifierPart(charCode) {\n      return charCode >= 65 && charCode <= 90 || charCode >= 97 && charCode <= 122 || 95 === charCode || charCode >= 48 && charCode <= 57;\n    }\n\n    function isKeyword(id) {\n      switch (id.length) {\n        case 2:\n          return 'do' === id || 'if' === id || 'in' === id || 'or' === id;\n\n        case 3:\n          return 'and' === id || 'end' === id || 'for' === id || 'not' === id;\n\n        case 4:\n          return 'else' === id || 'goto' === id || 'then' === id;\n\n        case 5:\n          return 'break' === id || 'local' === id || 'until' === id || 'while' === id;\n\n        case 6:\n          return 'elseif' === id || 'repeat' === id || 'return' === id;\n\n        case 8:\n          return 'function' === id;\n      }\n\n      return false;\n    }\n\n    function isUnary(token) {\n      if (Punctuator === token.type) return '#-~'.indexOf(token.value) >= 0;\n      if (Keyword === token.type) return 'not' === token.value;\n      return false;\n    }\n\n    function isCallExpression(expression) {\n      switch (expression.type) {\n        case 'CallExpression':\n        case 'TableCallExpression':\n        case 'StringCallExpression':\n          return true;\n      }\n\n      return false;\n    }\n\n    function isBlockFollow(token) {\n      if (EOF === token.type) return true;\n      if (Keyword !== token.type) return false;\n\n      switch (token.value) {\n        case 'else':\n        case 'elseif':\n        case 'end':\n        case 'until':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n\n    var scopes, scopeDepth, globals;\n\n    function createScope() {\n      scopes.push(Array.apply(null, scopes[scopeDepth++]));\n    }\n\n    function exitScope() {\n      scopes.pop();\n      scopeDepth--;\n    }\n\n    function scopeIdentifierName(name) {\n      if (-1 !== indexOf(scopes[scopeDepth], name)) return;\n      scopes[scopeDepth].push(name);\n    }\n\n    function scopeIdentifier(node) {\n      scopeIdentifierName(node.name);\n      attachScope(node, true);\n    }\n\n    function attachScope(node, isLocal) {\n      if (!isLocal && -1 === indexOfObject(globals, 'name', node.name)) globals.push(node);\n      node.isLocal = isLocal;\n    }\n\n    function scopeHasName(name) {\n      return -1 !== indexOf(scopes[scopeDepth], name);\n    }\n\n    var locations = [],\n        trackLocations;\n\n    function createLocationMarker() {\n      return new Marker(token);\n    }\n\n    function Marker(token) {\n      if (options.locations) {\n        this.loc = {\n          start: {\n            line: token.line,\n            column: token.range[0] - token.lineStart\n          },\n          end: {\n            line: 0,\n            column: 0\n          }\n        };\n      }\n\n      if (options.ranges) this.range = [token.range[0], 0];\n    }\n\n    Marker.prototype.complete = function () {\n      if (options.locations) {\n        this.loc.end.line = previousToken.line;\n        this.loc.end.column = previousToken.range[1] - previousToken.lineStart;\n      }\n\n      if (options.ranges) {\n        this.range[1] = previousToken.range[1];\n      }\n    };\n\n    function markLocation() {\n      if (trackLocations) locations.push(createLocationMarker());\n    }\n\n    function pushLocation(marker) {\n      if (trackLocations) locations.push(marker);\n    }\n\n    function parseChunk() {\n      next();\n      markLocation();\n      var body = parseBlock();\n      if (EOF !== token.type) unexpected(token);\n      if (trackLocations && !body.length) previousToken = token;\n      return finishNode(ast.chunk(body));\n    }\n\n    function parseBlock(terminator) {\n      var block = [],\n          statement;\n      if (options.scope) createScope();\n\n      while (!isBlockFollow(token)) {\n        if ('return' === token.value) {\n          block.push(parseStatement());\n          break;\n        }\n\n        statement = parseStatement();\n        if (statement) block.push(statement);\n      }\n\n      if (options.scope) exitScope();\n      return block;\n    }\n\n    function parseStatement() {\n      markLocation();\n\n      if (Keyword === token.type) {\n        switch (token.value) {\n          case 'local':\n            next();\n            return parseLocalStatement();\n\n          case 'if':\n            next();\n            return parseIfStatement();\n\n          case 'return':\n            next();\n            return parseReturnStatement();\n\n          case 'function':\n            next();\n            var name = parseFunctionName();\n            return parseFunctionDeclaration(name);\n\n          case 'while':\n            next();\n            return parseWhileStatement();\n\n          case 'for':\n            next();\n            return parseForStatement();\n\n          case 'repeat':\n            next();\n            return parseRepeatStatement();\n\n          case 'break':\n            next();\n            return parseBreakStatement();\n\n          case 'do':\n            next();\n            return parseDoStatement();\n\n          case 'goto':\n            next();\n            return parseGotoStatement();\n        }\n      }\n\n      if (Punctuator === token.type) {\n        if (consume('::')) return parseLabelStatement();\n      }\n\n      if (trackLocations) locations.pop();\n      if (consume(';')) return;\n      return parseAssignmentOrCallStatement();\n    }\n\n    function parseLabelStatement() {\n      var name = token.value,\n          label = parseIdentifier();\n\n      if (options.scope) {\n        scopeIdentifierName('::' + name + '::');\n        attachScope(label, true);\n      }\n\n      expect('::');\n      return finishNode(ast.labelStatement(label));\n    }\n\n    function parseBreakStatement() {\n      return finishNode(ast.breakStatement());\n    }\n\n    function parseGotoStatement() {\n      var name = token.value,\n          label = parseIdentifier();\n      if (options.scope) label.isLabel = scopeHasName('::' + name + '::');\n      return finishNode(ast.gotoStatement(label));\n    }\n\n    function parseDoStatement() {\n      var body = parseBlock();\n      expect('end');\n      return finishNode(ast.doStatement(body));\n    }\n\n    function parseWhileStatement() {\n      var condition = parseExpectedExpression();\n      expect('do');\n      var body = parseBlock();\n      expect('end');\n      return finishNode(ast.whileStatement(condition, body));\n    }\n\n    function parseRepeatStatement() {\n      var body = parseBlock();\n      expect('until');\n      var condition = parseExpectedExpression();\n      return finishNode(ast.repeatStatement(condition, body));\n    }\n\n    function parseReturnStatement() {\n      var expressions = [];\n\n      if ('end' !== token.value) {\n        var expression = parseExpression();\n        if (null != expression) expressions.push(expression);\n\n        while (consume(',')) {\n          expression = parseExpectedExpression();\n          expressions.push(expression);\n        }\n\n        consume(';'); // grammar tells us ; is optional here.\n      }\n\n      return finishNode(ast.returnStatement(expressions));\n    }\n\n    function parseIfStatement() {\n      var clauses = [],\n          condition,\n          body,\n          marker;\n\n      if (trackLocations) {\n        marker = locations[locations.length - 1];\n        locations.push(marker);\n      }\n\n      condition = parseExpectedExpression();\n      expect('then');\n      body = parseBlock();\n      clauses.push(finishNode(ast.ifClause(condition, body)));\n      if (trackLocations) marker = createLocationMarker();\n\n      while (consume('elseif')) {\n        pushLocation(marker);\n        condition = parseExpectedExpression();\n        expect('then');\n        body = parseBlock();\n        clauses.push(finishNode(ast.elseifClause(condition, body)));\n        if (trackLocations) marker = createLocationMarker();\n      }\n\n      if (consume('else')) {\n        if (trackLocations) {\n          marker = new Marker(previousToken);\n          locations.push(marker);\n        }\n\n        body = parseBlock();\n        clauses.push(finishNode(ast.elseClause(body)));\n      }\n\n      expect('end');\n      return finishNode(ast.ifStatement(clauses));\n    }\n\n    function parseForStatement() {\n      var variable = parseIdentifier(),\n          body;\n      if (options.scope) scopeIdentifier(variable);\n\n      if (consume('=')) {\n        var start = parseExpectedExpression();\n        expect(',');\n        var end = parseExpectedExpression();\n        var step = consume(',') ? parseExpectedExpression() : null;\n        expect('do');\n        body = parseBlock();\n        expect('end');\n        return finishNode(ast.forNumericStatement(variable, start, end, step, body));\n      } else {\n        var variables = [variable];\n\n        while (consume(',')) {\n          variable = parseIdentifier();\n          if (options.scope) scopeIdentifier(variable);\n          variables.push(variable);\n        }\n\n        expect('in');\n        var iterators = [];\n\n        do {\n          var expression = parseExpectedExpression();\n          iterators.push(expression);\n        } while (consume(','));\n\n        expect('do');\n        body = parseBlock();\n        expect('end');\n        return finishNode(ast.forGenericStatement(variables, iterators, body));\n      }\n    }\n\n    function parseLocalStatement() {\n      var name;\n\n      if (Identifier === token.type) {\n        var variables = [],\n            init = [];\n\n        do {\n          name = parseIdentifier();\n          variables.push(name);\n        } while (consume(','));\n\n        if (consume('=')) {\n          do {\n            var expression = parseExpectedExpression();\n            init.push(expression);\n          } while (consume(','));\n        }\n\n        if (options.scope) {\n          for (var i = 0, l = variables.length; i < l; i++) {\n            scopeIdentifier(variables[i]);\n          }\n        }\n\n        return finishNode(ast.localStatement(variables, init));\n      }\n\n      if (consume('function')) {\n        name = parseIdentifier();\n        if (options.scope) scopeIdentifier(name);\n        return parseFunctionDeclaration(name, true);\n      } else {\n        raiseUnexpectedToken('<name>', token);\n      }\n    }\n\n    function parseAssignmentOrCallStatement() {\n      var previous = token,\n          expression,\n          marker;\n      if (trackLocations) marker = createLocationMarker();\n      expression = parsePrefixExpression();\n      if (null == expression) return unexpected(token);\n\n      if (',='.indexOf(token.value) >= 0) {\n        var variables = [expression],\n            init = [],\n            exp;\n\n        while (consume(',')) {\n          exp = parsePrefixExpression();\n          if (null == exp) raiseUnexpectedToken('<expression>', token);\n          variables.push(exp);\n        }\n\n        expect('=');\n\n        do {\n          exp = parseExpectedExpression();\n          init.push(exp);\n        } while (consume(','));\n\n        pushLocation(marker);\n        return finishNode(ast.assignmentStatement(variables, init));\n      }\n\n      if (isCallExpression(expression)) {\n        pushLocation(marker);\n        return finishNode(ast.callStatement(expression));\n      }\n\n      return unexpected(previous);\n    }\n\n    function parseIdentifier() {\n      markLocation();\n      var identifier = token.value;\n      if (Identifier !== token.type) raiseUnexpectedToken('<name>', token);\n      next();\n      return finishNode(ast.identifier(identifier));\n    }\n\n    function parseFunctionDeclaration(name, isLocal) {\n      var parameters = [];\n      expect('(');\n\n      if (!consume(')')) {\n        while (true) {\n          if (Identifier === token.type) {\n            var parameter = parseIdentifier();\n            if (options.scope) scopeIdentifier(parameter);\n            parameters.push(parameter);\n            if (consume(',')) continue;else if (consume(')')) break;\n          } else if (VarargLiteral === token.type) {\n            parameters.push(parsePrimaryExpression());\n            expect(')');\n            break;\n          } else {\n            raiseUnexpectedToken('<name> or \\'...\\'', token);\n          }\n        }\n      }\n\n      var body = parseBlock();\n      expect('end');\n      isLocal = isLocal || false;\n      return finishNode(ast.functionStatement(name, parameters, isLocal, body));\n    }\n\n    function parseFunctionName() {\n      var base, name, marker;\n      if (trackLocations) marker = createLocationMarker();\n      base = parseIdentifier();\n      if (options.scope) attachScope(base, false);\n\n      while (consume('.')) {\n        pushLocation(marker);\n        name = parseIdentifier();\n        if (options.scope) attachScope(name, false);\n        base = finishNode(ast.memberExpression(base, '.', name));\n      }\n\n      if (consume(':')) {\n        pushLocation(marker);\n        name = parseIdentifier();\n        if (options.scope) attachScope(name, false);\n        base = finishNode(ast.memberExpression(base, ':', name));\n      }\n\n      return base;\n    }\n\n    function parseTableConstructor() {\n      var fields = [],\n          key,\n          value;\n\n      while (true) {\n        markLocation();\n\n        if (Punctuator === token.type && consume('[')) {\n          key = parseExpectedExpression();\n          expect(']');\n          expect('=');\n          value = parseExpectedExpression();\n          fields.push(finishNode(ast.tableKey(key, value)));\n        } else if (Identifier === token.type) {\n          key = parseExpectedExpression();\n\n          if (consume('=')) {\n            value = parseExpectedExpression();\n            fields.push(finishNode(ast.tableKeyString(key, value)));\n          } else {\n            fields.push(finishNode(ast.tableValue(key)));\n          }\n        } else {\n          if (null == (value = parseExpression())) {\n            locations.pop();\n            break;\n          }\n\n          fields.push(finishNode(ast.tableValue(value)));\n        }\n\n        if (',;'.indexOf(token.value) >= 0) {\n          next();\n          continue;\n        }\n\n        if ('}' === token.value) break;\n      }\n\n      expect('}');\n      return finishNode(ast.tableConstructorExpression(fields));\n    }\n\n    function parseExpression() {\n      var expression = parseSubExpression(0);\n      return expression;\n    }\n\n    function parseExpectedExpression() {\n      var expression = parseExpression();\n      if (null == expression) raiseUnexpectedToken('<expression>', token);else return expression;\n    }\n\n    function binaryPrecedence(operator) {\n      var charCode = operator.charCodeAt(0),\n          length = operator.length;\n\n      if (1 === length) {\n        switch (charCode) {\n          case 94:\n            return 10;\n          // ^\n\n          case 42:\n          case 47:\n          case 37:\n            return 7;\n          // * / %\n\n          case 43:\n          case 45:\n            return 6;\n          // + -\n\n          case 60:\n          case 62:\n            return 3;\n          // < >\n\n          case 38:\n          case 124:\n            return 7;\n          // & |\n        }\n      } else if (2 === length) {\n        switch (charCode) {\n          case 46:\n            return 5;\n          // ..\n\n          case 60:\n          case 62:\n          case 61:\n          case 126:\n            return 3;\n          // <= >= == ~=\n\n          case 111:\n            return 1;\n          // or\n        }\n      } else if (97 === charCode && 'and' === operator) return 2;\n\n      return 0;\n    }\n\n    function parseSubExpression(minPrecedence) {\n      var operator = token.value,\n          expression,\n          marker;\n      if (trackLocations) marker = createLocationMarker();\n\n      if (isUnary(token)) {\n        markLocation();\n        next();\n        var argument = parseSubExpression(8);\n        if (argument == null) raiseUnexpectedToken('<expression>', token);\n        expression = finishNode(ast.unaryExpression(operator, argument));\n      }\n\n      if (null == expression) {\n        expression = parsePrimaryExpression();\n\n        if (null == expression) {\n          expression = parsePrefixExpression();\n        }\n      }\n\n      if (null == expression) return null;\n      var precedence;\n\n      while (true) {\n        operator = token.value;\n        precedence = Punctuator === token.type || Keyword === token.type ? binaryPrecedence(operator) : 0;\n        if (precedence === 0 || precedence <= minPrecedence) break;\n        if ('^' === operator || '..' === operator) precedence--;\n        next();\n        var right = parseSubExpression(precedence);\n        if (null == right) raiseUnexpectedToken('<expression>', token);\n        if (trackLocations) locations.push(marker);\n        expression = finishNode(ast.binaryExpression(operator, expression, right));\n      }\n\n      return expression;\n    }\n\n    function parsePrefixExpression() {\n      var base, name, marker, isLocal;\n      if (trackLocations) marker = createLocationMarker();\n\n      if (Identifier === token.type) {\n        name = token.value;\n        base = parseIdentifier();\n        if (options.scope) attachScope(base, isLocal = scopeHasName(name));\n      } else if (consume('(')) {\n        base = parseExpectedExpression();\n        expect(')');\n        if (options.scope) isLocal = base.isLocal;\n      } else {\n        return null;\n      }\n\n      var expression, identifier;\n\n      while (true) {\n        if (Punctuator === token.type) {\n          switch (token.value) {\n            case '[':\n              pushLocation(marker);\n              next();\n              expression = parseExpectedExpression();\n              base = finishNode(ast.indexExpression(base, expression));\n              expect(']');\n              break;\n\n            case '.':\n              pushLocation(marker);\n              next();\n              identifier = parseIdentifier();\n              if (options.scope) attachScope(identifier, isLocal);\n              base = finishNode(ast.memberExpression(base, '.', identifier));\n              break;\n\n            case ':':\n              pushLocation(marker);\n              next();\n              identifier = parseIdentifier();\n              if (options.scope) attachScope(identifier, isLocal);\n              base = finishNode(ast.memberExpression(base, ':', identifier));\n              pushLocation(marker);\n              base = parseCallExpression(base);\n              break;\n\n            case '(':\n            case '{':\n              // args\n              pushLocation(marker);\n              base = parseCallExpression(base);\n              break;\n\n            default:\n              return base;\n          }\n        } else if (StringLiteral === token.type) {\n          pushLocation(marker);\n          base = parseCallExpression(base);\n        } else {\n          break;\n        }\n      }\n\n      return base;\n    }\n\n    function parseCallExpression(base) {\n      if (Punctuator === token.type) {\n        switch (token.value) {\n          case '(':\n            next();\n            var expressions = [];\n            var expression = parseExpression();\n            if (null != expression) expressions.push(expression);\n\n            while (consume(',')) {\n              expression = parseExpectedExpression();\n              expressions.push(expression);\n            }\n\n            expect(')');\n            return finishNode(ast.callExpression(base, expressions));\n\n          case '{':\n            markLocation();\n            next();\n            var table = parseTableConstructor();\n            return finishNode(ast.tableCallExpression(base, table));\n        }\n      } else if (StringLiteral === token.type) {\n        return finishNode(ast.stringCallExpression(base, parsePrimaryExpression()));\n      }\n\n      raiseUnexpectedToken('function arguments', token);\n    }\n\n    function parsePrimaryExpression() {\n      var literals = StringLiteral | NumericLiteral | BooleanLiteral | NilLiteral | VarargLiteral,\n          value = token.value,\n          type = token.type,\n          marker;\n      if (trackLocations) marker = createLocationMarker();\n\n      if (type & literals) {\n        pushLocation(marker);\n        var raw = input.slice(token.range[0], token.range[1]);\n        next();\n        return finishNode(ast.literal(type, value, raw));\n      } else if (Keyword === type && 'function' === value) {\n        pushLocation(marker);\n        next();\n        return parseFunctionDeclaration(null);\n      } else if (consume('{')) {\n        pushLocation(marker);\n        return parseTableConstructor();\n      }\n    }\n\n    exports.parse = parse;\n\n    function parse(_input, _options) {\n      if ('undefined' === typeof _options && 'object' === typeof _input) {\n        _options = _input;\n        _input = undefined;\n      }\n\n      if (!_options) _options = {};\n      input = _input || '';\n      options = extend(defaultOptions, _options);\n      index = 0;\n      line = 1;\n      lineStart = 0;\n      length = input.length;\n      scopes = [[]];\n      scopeDepth = 0;\n      globals = [];\n      locations = [];\n      if (options.comments) comments = [];\n      if (!options.wait) return end();\n      return exports;\n    }\n\n    exports.write = write;\n\n    function write(_input) {\n      input += String(_input);\n      length = input.length;\n      return exports;\n    }\n\n    exports.end = end;\n\n    function end(_input) {\n      if ('undefined' !== typeof _input) write(_input);\n      length = input.length;\n      trackLocations = options.locations || options.ranges;\n      lookahead = lex();\n      var chunk = parseChunk();\n      if (options.comments) chunk.comments = comments;\n      if (options.scope) chunk.globals = globals;\n      if (locations.length > 0) throw new Error('Location tracking failed. This is most likely a bug in luaparse');\n      return chunk;\n    }\n  });\n});\nace.define(\"ace/mode/lua_worker\", [], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"../lib/oop\");\n\n  var Mirror = require(\"../worker/mirror\").Mirror;\n\n  var luaparse = require(\"../mode/lua/luaparse\");\n\n  var Worker = exports.Worker = function (sender) {\n    Mirror.call(this, sender);\n    this.setTimeout(500);\n  };\n\n  oop.inherits(Worker, Mirror);\n  (function () {\n    this.onUpdate = function () {\n      var value = this.doc.getValue();\n      var errors = [];\n\n      try {\n        luaparse.parse(value);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          errors.push({\n            row: e.line - 1,\n            column: e.column,\n            text: e.message,\n            type: \"error\"\n          });\n        }\n      }\n\n      this.sender.emit(\"annotate\", errors);\n    };\n  }).call(Worker.prototype);\n});\nace.define(\"ace/lib/es5-shim\", [], function (require, exports, module) {\n  function Empty() {}\n\n  if (!Function.prototype.bind) {\n    Function.prototype.bind = function bind(that) {\n      // .length is 1\n      var target = this;\n\n      if (typeof target != \"function\") {\n        throw new TypeError(\"Function.prototype.bind called on incompatible \" + target);\n      }\n\n      var args = slice.call(arguments, 1); // for normal call\n\n      var bound = function () {\n        if (this instanceof bound) {\n          var result = target.apply(this, args.concat(slice.call(arguments)));\n\n          if (Object(result) === result) {\n            return result;\n          }\n\n          return this;\n        } else {\n          return target.apply(that, args.concat(slice.call(arguments)));\n        }\n      };\n\n      if (target.prototype) {\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n      }\n\n      return bound;\n    };\n  }\n\n  var call = Function.prototype.call;\n  var prototypeOfArray = Array.prototype;\n  var prototypeOfObject = Object.prototype;\n  var slice = prototypeOfArray.slice;\n\n  var _toString = call.bind(prototypeOfObject.toString);\n\n  var owns = call.bind(prototypeOfObject.hasOwnProperty);\n  var defineGetter;\n  var defineSetter;\n  var lookupGetter;\n  var lookupSetter;\n  var supportsAccessors;\n\n  if (supportsAccessors = owns(prototypeOfObject, \"__defineGetter__\")) {\n    defineGetter = call.bind(prototypeOfObject.__defineGetter__);\n    defineSetter = call.bind(prototypeOfObject.__defineSetter__);\n    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);\n    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);\n  }\n\n  if ([1, 2].splice(0).length != 2) {\n    if (function () {\n      // test IE < 9 to splice bug - see issue #138\n      function makeArray(l) {\n        var a = new Array(l + 2);\n        a[0] = a[1] = 0;\n        return a;\n      }\n\n      var array = [],\n          lengthBefore;\n      array.splice.apply(array, makeArray(20));\n      array.splice.apply(array, makeArray(26));\n      lengthBefore = array.length; //46\n\n      array.splice(5, 0, \"XXX\"); // add one element\n\n      lengthBefore + 1 == array.length;\n\n      if (lengthBefore + 1 == array.length) {\n        return true; // has right splice implementation without bugs\n      }\n    }()) {\n      //IE 6/7\n      var array_splice = Array.prototype.splice;\n\n      Array.prototype.splice = function (start, deleteCount) {\n        if (!arguments.length) {\n          return [];\n        } else {\n          return array_splice.apply(this, [start === void 0 ? 0 : start, deleteCount === void 0 ? this.length - start : deleteCount].concat(slice.call(arguments, 2)));\n        }\n      };\n    } else {\n      //IE8\n      Array.prototype.splice = function (pos, removeCount) {\n        var length = this.length;\n\n        if (pos > 0) {\n          if (pos > length) pos = length;\n        } else if (pos == void 0) {\n          pos = 0;\n        } else if (pos < 0) {\n          pos = Math.max(length + pos, 0);\n        }\n\n        if (!(pos + removeCount < length)) removeCount = length - pos;\n        var removed = this.slice(pos, pos + removeCount);\n        var insert = slice.call(arguments, 2);\n        var add = insert.length;\n\n        if (pos === length) {\n          if (add) {\n            this.push.apply(this, insert);\n          }\n        } else {\n          var remove = Math.min(removeCount, length - pos);\n          var tailOldPos = pos + remove;\n          var tailNewPos = tailOldPos + add - remove;\n          var tailCount = length - tailOldPos;\n          var lengthAfterRemove = length - remove;\n\n          if (tailNewPos < tailOldPos) {\n            // case A\n            for (var i = 0; i < tailCount; ++i) {\n              this[tailNewPos + i] = this[tailOldPos + i];\n            }\n          } else if (tailNewPos > tailOldPos) {\n            // case B\n            for (i = tailCount; i--;) {\n              this[tailNewPos + i] = this[tailOldPos + i];\n            }\n          } // else, add == remove (nothing to do)\n\n\n          if (add && pos === lengthAfterRemove) {\n            this.length = lengthAfterRemove; // truncate array\n\n            this.push.apply(this, insert);\n          } else {\n            this.length = lengthAfterRemove + add; // reserves space\n\n            for (i = 0; i < add; ++i) {\n              this[pos + i] = insert[i];\n            }\n          }\n        }\n\n        return removed;\n      };\n    }\n  }\n\n  if (!Array.isArray) {\n    Array.isArray = function isArray(obj) {\n      return _toString(obj) == \"[object Array]\";\n    };\n  }\n\n  var boxedString = Object(\"a\"),\n      splitString = boxedString[0] != \"a\" || !(0 in boxedString);\n\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function forEach(fun\n    /*, thisp*/\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          thisp = arguments[1],\n          i = -1,\n          length = self.length >>> 0;\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(); // TODO message\n      }\n\n      while (++i < length) {\n        if (i in self) {\n          fun.call(thisp, self[i], i, object);\n        }\n      }\n    };\n  }\n\n  if (!Array.prototype.map) {\n    Array.prototype.map = function map(fun\n    /*, thisp*/\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          length = self.length >>> 0,\n          result = Array(length),\n          thisp = arguments[1];\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(fun + \" is not a function\");\n      }\n\n      for (var i = 0; i < length; i++) {\n        if (i in self) result[i] = fun.call(thisp, self[i], i, object);\n      }\n\n      return result;\n    };\n  }\n\n  if (!Array.prototype.filter) {\n    Array.prototype.filter = function filter(fun\n    /*, thisp */\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          length = self.length >>> 0,\n          result = [],\n          value,\n          thisp = arguments[1];\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(fun + \" is not a function\");\n      }\n\n      for (var i = 0; i < length; i++) {\n        if (i in self) {\n          value = self[i];\n\n          if (fun.call(thisp, value, i, object)) {\n            result.push(value);\n          }\n        }\n      }\n\n      return result;\n    };\n  }\n\n  if (!Array.prototype.every) {\n    Array.prototype.every = function every(fun\n    /*, thisp */\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          length = self.length >>> 0,\n          thisp = arguments[1];\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(fun + \" is not a function\");\n      }\n\n      for (var i = 0; i < length; i++) {\n        if (i in self && !fun.call(thisp, self[i], i, object)) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n  }\n\n  if (!Array.prototype.some) {\n    Array.prototype.some = function some(fun\n    /*, thisp */\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          length = self.length >>> 0,\n          thisp = arguments[1];\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(fun + \" is not a function\");\n      }\n\n      for (var i = 0; i < length; i++) {\n        if (i in self && fun.call(thisp, self[i], i, object)) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  }\n\n  if (!Array.prototype.reduce) {\n    Array.prototype.reduce = function reduce(fun\n    /*, initial*/\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          length = self.length >>> 0;\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(fun + \" is not a function\");\n      }\n\n      if (!length && arguments.length == 1) {\n        throw new TypeError(\"reduce of empty array with no initial value\");\n      }\n\n      var i = 0;\n      var result;\n\n      if (arguments.length >= 2) {\n        result = arguments[1];\n      } else {\n        do {\n          if (i in self) {\n            result = self[i++];\n            break;\n          }\n\n          if (++i >= length) {\n            throw new TypeError(\"reduce of empty array with no initial value\");\n          }\n        } while (true);\n      }\n\n      for (; i < length; i++) {\n        if (i in self) {\n          result = fun.call(void 0, result, self[i], i, object);\n        }\n      }\n\n      return result;\n    };\n  }\n\n  if (!Array.prototype.reduceRight) {\n    Array.prototype.reduceRight = function reduceRight(fun\n    /*, initial*/\n    ) {\n      var object = toObject(this),\n          self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : object,\n          length = self.length >>> 0;\n\n      if (_toString(fun) != \"[object Function]\") {\n        throw new TypeError(fun + \" is not a function\");\n      }\n\n      if (!length && arguments.length == 1) {\n        throw new TypeError(\"reduceRight of empty array with no initial value\");\n      }\n\n      var result,\n          i = length - 1;\n\n      if (arguments.length >= 2) {\n        result = arguments[1];\n      } else {\n        do {\n          if (i in self) {\n            result = self[i--];\n            break;\n          }\n\n          if (--i < 0) {\n            throw new TypeError(\"reduceRight of empty array with no initial value\");\n          }\n        } while (true);\n      }\n\n      do {\n        if (i in this) {\n          result = fun.call(void 0, result, self[i], i, object);\n        }\n      } while (i--);\n\n      return result;\n    };\n  }\n\n  if (!Array.prototype.indexOf || [0, 1].indexOf(1, 2) != -1) {\n    Array.prototype.indexOf = function indexOf(sought\n    /*, fromIndex */\n    ) {\n      var self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : toObject(this),\n          length = self.length >>> 0;\n\n      if (!length) {\n        return -1;\n      }\n\n      var i = 0;\n\n      if (arguments.length > 1) {\n        i = toInteger(arguments[1]);\n      }\n\n      i = i >= 0 ? i : Math.max(0, length + i);\n\n      for (; i < length; i++) {\n        if (i in self && self[i] === sought) {\n          return i;\n        }\n      }\n\n      return -1;\n    };\n  }\n\n  if (!Array.prototype.lastIndexOf || [0, 1].lastIndexOf(0, -3) != -1) {\n    Array.prototype.lastIndexOf = function lastIndexOf(sought\n    /*, fromIndex */\n    ) {\n      var self = splitString && _toString(this) == \"[object String]\" ? this.split(\"\") : toObject(this),\n          length = self.length >>> 0;\n\n      if (!length) {\n        return -1;\n      }\n\n      var i = length - 1;\n\n      if (arguments.length > 1) {\n        i = Math.min(i, toInteger(arguments[1]));\n      }\n\n      i = i >= 0 ? i : length - Math.abs(i);\n\n      for (; i >= 0; i--) {\n        if (i in self && sought === self[i]) {\n          return i;\n        }\n      }\n\n      return -1;\n    };\n  }\n\n  if (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function getPrototypeOf(object) {\n      return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject);\n    };\n  }\n\n  if (!Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = \"Object.getOwnPropertyDescriptor called on a \" + \"non-object: \";\n\n    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n      if (typeof object != \"object\" && typeof object != \"function\" || object === null) throw new TypeError(ERR_NON_OBJECT + object);\n      if (!owns(object, property)) return;\n      var descriptor, getter, setter;\n      descriptor = {\n        enumerable: true,\n        configurable: true\n      };\n\n      if (supportsAccessors) {\n        var prototype = object.__proto__;\n        object.__proto__ = prototypeOfObject;\n        var getter = lookupGetter(object, property);\n        var setter = lookupSetter(object, property);\n        object.__proto__ = prototype;\n\n        if (getter || setter) {\n          if (getter) descriptor.get = getter;\n          if (setter) descriptor.set = setter;\n          return descriptor;\n        }\n      }\n\n      descriptor.value = object[property];\n      return descriptor;\n    };\n  }\n\n  if (!Object.getOwnPropertyNames) {\n    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {\n      return Object.keys(object);\n    };\n  }\n\n  if (!Object.create) {\n    var createEmpty;\n\n    if (Object.prototype.__proto__ === null) {\n      createEmpty = function () {\n        return {\n          \"__proto__\": null\n        };\n      };\n    } else {\n      createEmpty = function () {\n        var empty = {};\n\n        for (var i in empty) empty[i] = null;\n\n        empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null;\n        return empty;\n      };\n    }\n\n    Object.create = function create(prototype, properties) {\n      var object;\n\n      if (prototype === null) {\n        object = createEmpty();\n      } else {\n        if (typeof prototype != \"object\") throw new TypeError(\"typeof prototype[\" + typeof prototype + \"] != 'object'\");\n\n        var Type = function () {};\n\n        Type.prototype = prototype;\n        object = new Type();\n        object.__proto__ = prototype;\n      }\n\n      if (properties !== void 0) Object.defineProperties(object, properties);\n      return object;\n    };\n  }\n\n  function doesDefinePropertyWork(object) {\n    try {\n      Object.defineProperty(object, \"sentinel\", {});\n      return \"sentinel\" in object;\n    } catch (exception) {}\n  }\n\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({});\n    var definePropertyWorksOnDom = typeof document == \"undefined\" || doesDefinePropertyWork(document.createElement(\"div\"));\n\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {\n      var definePropertyFallback = Object.defineProperty;\n    }\n  }\n\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = \"Property description must be an object: \";\n    var ERR_NON_OBJECT_TARGET = \"Object.defineProperty called on non-object: \";\n    var ERR_ACCESSORS_NOT_SUPPORTED = \"getters & setters can not be defined \" + \"on this javascript engine\";\n\n    Object.defineProperty = function defineProperty(object, property, descriptor) {\n      if (typeof object != \"object\" && typeof object != \"function\" || object === null) throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      if (typeof descriptor != \"object\" && typeof descriptor != \"function\" || descriptor === null) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n\n      if (definePropertyFallback) {\n        try {\n          return definePropertyFallback.call(Object, object, property, descriptor);\n        } catch (exception) {}\n      }\n\n      if (owns(descriptor, \"value\")) {\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          delete object[property];\n          object[property] = descriptor.value;\n          object.__proto__ = prototype;\n        } else {\n          object[property] = descriptor.value;\n        }\n      } else {\n        if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n        if (owns(descriptor, \"get\")) defineGetter(object, property, descriptor.get);\n        if (owns(descriptor, \"set\")) defineSetter(object, property, descriptor.set);\n      }\n\n      return object;\n    };\n  }\n\n  if (!Object.defineProperties) {\n    Object.defineProperties = function defineProperties(object, properties) {\n      for (var property in properties) {\n        if (owns(properties, property)) Object.defineProperty(object, property, properties[property]);\n      }\n\n      return object;\n    };\n  }\n\n  if (!Object.seal) {\n    Object.seal = function seal(object) {\n      return object;\n    };\n  }\n\n  if (!Object.freeze) {\n    Object.freeze = function freeze(object) {\n      return object;\n    };\n  }\n\n  try {\n    Object.freeze(function () {});\n  } catch (exception) {\n    Object.freeze = function freeze(freezeObject) {\n      return function freeze(object) {\n        if (typeof object == \"function\") {\n          return object;\n        } else {\n          return freezeObject(object);\n        }\n      };\n    }(Object.freeze);\n  }\n\n  if (!Object.preventExtensions) {\n    Object.preventExtensions = function preventExtensions(object) {\n      return object;\n    };\n  }\n\n  if (!Object.isSealed) {\n    Object.isSealed = function isSealed(object) {\n      return false;\n    };\n  }\n\n  if (!Object.isFrozen) {\n    Object.isFrozen = function isFrozen(object) {\n      return false;\n    };\n  }\n\n  if (!Object.isExtensible) {\n    Object.isExtensible = function isExtensible(object) {\n      if (Object(object) === object) {\n        throw new TypeError(); // TODO message\n      }\n\n      var name = '';\n\n      while (owns(object, name)) {\n        name += '?';\n      }\n\n      object[name] = true;\n      var returnValue = owns(object, name);\n      delete object[name];\n      return returnValue;\n    };\n  }\n\n  if (!Object.keys) {\n    var hasDontEnumBug = true,\n        dontEnums = [\"toString\", \"toLocaleString\", \"valueOf\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"constructor\"],\n        dontEnumsLength = dontEnums.length;\n\n    for (var key in {\n      \"toString\": null\n    }) {\n      hasDontEnumBug = false;\n    }\n\n    Object.keys = function keys(object) {\n      if (typeof object != \"object\" && typeof object != \"function\" || object === null) {\n        throw new TypeError(\"Object.keys called on a non-object\");\n      }\n\n      var keys = [];\n\n      for (var name in object) {\n        if (owns(object, name)) {\n          keys.push(name);\n        }\n      }\n\n      if (hasDontEnumBug) {\n        for (var i = 0, ii = dontEnumsLength; i < ii; i++) {\n          var dontEnum = dontEnums[i];\n\n          if (owns(object, dontEnum)) {\n            keys.push(dontEnum);\n          }\n        }\n      }\n\n      return keys;\n    };\n  }\n\n  if (!Date.now) {\n    Date.now = function now() {\n      return new Date().getTime();\n    };\n  }\n\n  var ws = \"\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\" + \"\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\" + \"\\u2029\\uFEFF\";\n\n  if (!String.prototype.trim) {\n    ws = \"[\" + ws + \"]\";\n    var trimBeginRegexp = new RegExp(\"^\" + ws + ws + \"*\"),\n        trimEndRegexp = new RegExp(ws + ws + \"*$\");\n\n    String.prototype.trim = function trim() {\n      return String(this).replace(trimBeginRegexp, \"\").replace(trimEndRegexp, \"\");\n    };\n  }\n\n  function toInteger(n) {\n    n = +n;\n\n    if (n !== n) {\n      // isNaN\n      n = 0;\n    } else if (n !== 0 && n !== 1 / 0 && n !== -(1 / 0)) {\n      n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n\n    return n;\n  }\n\n  function isPrimitive(input) {\n    var type = typeof input;\n    return input === null || type === \"undefined\" || type === \"boolean\" || type === \"number\" || type === \"string\";\n  }\n\n  function toPrimitive(input) {\n    var val, valueOf, toString;\n\n    if (isPrimitive(input)) {\n      return input;\n    }\n\n    valueOf = input.valueOf;\n\n    if (typeof valueOf === \"function\") {\n      val = valueOf.call(input);\n\n      if (isPrimitive(val)) {\n        return val;\n      }\n    }\n\n    toString = input.toString;\n\n    if (typeof toString === \"function\") {\n      val = toString.call(input);\n\n      if (isPrimitive(val)) {\n        return val;\n      }\n    }\n\n    throw new TypeError();\n  }\n\n  var toObject = function (o) {\n    if (o == null) {\n      // this matches both null and undefined\n      throw new TypeError(\"can't convert \" + o + \" to object\");\n    }\n\n    return Object(o);\n  };\n});","map":{"version":3,"sources":["/home/magoo/projects/keyrier-json/node_modules/ace-builds/src-noconflict/worker-lua.js"],"names":["window","document","require","define","console","msgs","Array","prototype","slice","call","arguments","postMessage","type","data","error","warn","log","trace","ace","onerror","message","file","line","col","err","stack","normalizeModule","parentId","moduleName","indexOf","chunks","split","charAt","base","join","previous","replace","id","Error","module","modules","initialized","exports","factory","tlns","path","resolveModuleId","importScripts","paths","testPath","tail","alias","location","main","name","i","lastIndexOf","substr","deps","length","req","childId","returnExports","apply","map","dep","amd","initBaseUrls","topLevelNamespaces","initSender","EventEmitter","oop","Sender","implement","callback","callbackId","emit","sender","onmessage","e","msg","event","_signal","command","args","init","clazz","classname","inherits","ctor","superCtor","super_","Object","create","constructor","value","enumerable","writable","configurable","mixin","obj","key","proto","comparePoints","p1","p2","row","column","Range","startRow","startColumn","endRow","endColumn","start","end","isEqual","range","toString","contains","compare","compareRange","cmp","comparePoint","p","containsRange","intersects","isEnd","isStart","setStart","setEnd","inside","insideStart","insideEnd","isMultiLine","compareStart","compareEnd","compareInside","clipRows","firstRow","lastRow","fromPoints","extend","isEmpty","clone","collapseRows","Math","max","toScreenRange","session","screenPosStart","documentToScreenPosition","screenPosEnd","moveBy","throwDeltaError","delta","errorText","positionInDocument","docLines","position","validateDelta","action","lines","numRangeRows","numRangeLastLineChars","applyDelta","doNotValidate","substring","concat","splice","stopPropagation","propagationStopped","preventDefault","defaultPrevented","_emit","_dispatchEvent","eventName","_eventRegistry","_defaultHandlers","listeners","defaultHandler","once","_self","on","newCallback","off","Promise","resolve","setDefaultHandler","handlers","_disabled_","old","disabled","push","removeDefaultHandler","pop","addEventListener","capturing","removeListener","removeEventListener","index","removeAllListeners","undefined","Anchor","doc","$onChange","onChange","bind","attach","setPosition","getPosition","$clipPositionToDocument","getDocument","$insertRight","point","$getTransformedPoint","$pointsInOrder","point1","point2","equalPointsInOrder","bColIsAfter","moveIfEqual","deltaIsInsert","deltaRowShift","deltaColShift","deltaStart","deltaEnd","noClip","pos","detach","getLength","getLine","min","Document","textOrLines","$lines","isArray","insertMergedLines","insert","setValue","text","len","remove","getValue","getAllLines","getNewLineCharacter","createAnchor","$split","$detectNewLine","match","$autoNewLine","$newLineMode","setNewLineMode","newLineMode","getNewLineMode","isNewLine","getLines","getTextRange","getLinesForRange","l","insertLines","insertFullLines","removeLines","removeFullLines","insertNewLine","insertInLine","clippedPos","clonePos","$clipPosition","removeInLine","deleteFirstNewLine","deleteLastNewLine","startCol","endCol","deletedLines","removeNewLine","applyDeltas","deltas","revertDeltas","revertDelta","isInsert","$splitAndapplyLargeDelta","$safeApplyDelta","docLength","MAX","from","to","chunk","indexToPosition","newlineLength","positionToIndex","last","a","stringReverse","string","reverse","stringRepeat","count","result","trimBeginRegexp","trimEndRegexp","stringTrimLeft","stringTrimRight","copyObject","copy","copyArray","array","deepCopy","arrayToMap","arr","createMap","props","arrayRemove","escapeRegExp","str","escapeHTML","getMatchOffsets","regExp","matches","offset","deferredCall","fcn","timer","deferred","timeout","cancel","setTimeout","schedule","clearTimeout","isPending","delayedCall","defaultTimeout","delay","lang","Mirror","deferredUpdate","onUpdate","d","$timeout","root","version","input","options","defaultOptions","wait","comments","scope","locations","ranges","EOF","StringLiteral","Keyword","Identifier","NumericLiteral","Punctuator","BooleanLiteral","NilLiteral","VarargLiteral","tokenTypes","errors","unexpected","expected","expectedToken","unfinishedString","malformedNumber","ast","labelStatement","label","breakStatement","gotoStatement","returnStatement","ifStatement","clauses","ifClause","condition","body","elseifClause","elseClause","whileStatement","doStatement","repeatStatement","localStatement","variables","assignmentStatement","callStatement","expression","functionStatement","identifier","parameters","isLocal","forNumericStatement","variable","step","forGenericStatement","iterators","literal","raw","tableKey","tableKeyString","tableValue","tableConstructorExpression","fields","binaryExpression","operator","left","right","unaryExpression","argument","memberExpression","indexer","indexExpression","callExpression","tableCallExpression","stringCallExpression","comment","finishNode","node","trackLocations","complete","loc","element","indexOfObject","property","sprintf","format","dest","src","prop","hasOwnProperty","raise","token","lineStart","SyntaxError","raiseUnexpectedToken","found","near","lookahead","previousToken","tokenStart","lex","skipWhiteSpace","charCodeAt","scanComment","charCode","next","isIdentifierStart","scanIdentifierOrKeyword","scanStringLiteral","scanNumericLiteral","isDecDigit","scanVarargLiteral","scanPunctuator","scanLongStringLiteral","isWhiteSpace","isLineTerminator","isIdentifierPart","isKeyword","delimiter","stringStart","readEscapeSequence","String","fromCharCode","readLongString","character","readHexLiteral","readDecLiteral","fraction","binaryExponent","binarySign","digit","fractionStart","exponentStart","digitStart","isHexDigit","parseInt","pow","parseFloat","sequenceStart","content","isLong","commentStart","lineStartComment","lineComment","level","terminator","consume","expect","isUnary","isCallExpression","isBlockFollow","scopes","scopeDepth","globals","createScope","exitScope","scopeIdentifierName","scopeIdentifier","attachScope","scopeHasName","createLocationMarker","Marker","markLocation","pushLocation","marker","parseChunk","parseBlock","block","statement","parseStatement","parseLocalStatement","parseIfStatement","parseReturnStatement","parseFunctionName","parseFunctionDeclaration","parseWhileStatement","parseForStatement","parseRepeatStatement","parseBreakStatement","parseDoStatement","parseGotoStatement","parseLabelStatement","parseAssignmentOrCallStatement","parseIdentifier","isLabel","parseExpectedExpression","expressions","parseExpression","parsePrefixExpression","exp","parameter","parsePrimaryExpression","parseTableConstructor","parseSubExpression","binaryPrecedence","minPrecedence","precedence","parseCallExpression","table","literals","parse","_input","_options","write","luaparse","Worker","Empty","Function","that","target","TypeError","bound","prototypeOfArray","prototypeOfObject","_toString","owns","defineGetter","defineSetter","lookupGetter","lookupSetter","supportsAccessors","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","makeArray","lengthBefore","array_splice","deleteCount","removeCount","removed","add","tailOldPos","tailNewPos","tailCount","lengthAfterRemove","boxedString","splitString","forEach","fun","object","toObject","self","thisp","filter","every","some","reduce","reduceRight","sought","toInteger","abs","getPrototypeOf","__proto__","getOwnPropertyDescriptor","ERR_NON_OBJECT","descriptor","getter","setter","get","set","getOwnPropertyNames","keys","createEmpty","empty","propertyIsEnumerable","isPrototypeOf","toLocaleString","valueOf","properties","Type","defineProperties","doesDefinePropertyWork","defineProperty","exception","definePropertyWorksOnObject","definePropertyWorksOnDom","createElement","definePropertyFallback","ERR_NON_OBJECT_DESCRIPTOR","ERR_NON_OBJECT_TARGET","ERR_ACCESSORS_NOT_SUPPORTED","seal","freeze","freezeObject","preventExtensions","isSealed","isFrozen","isExtensible","returnValue","hasDontEnumBug","dontEnums","dontEnumsLength","ii","dontEnum","Date","now","getTime","ws","trim","RegExp","n","floor","isPrimitive","toPrimitive","val","o"],"mappings":"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","sourcesContent":["\"no use strict\";\n!(function(window) {\nif (typeof window.window != \"undefined\" && window.document)\n    return;\nif (window.require && window.define)\n    return;\n\nif (!window.console) {\n    window.console = function() {\n        var msgs = Array.prototype.slice.call(arguments, 0);\n        postMessage({type: \"log\", data: msgs});\n    };\n    window.console.error =\n    window.console.warn = \n    window.console.log =\n    window.console.trace = window.console;\n}\nwindow.window = window;\nwindow.ace = window;\n\nwindow.onerror = function(message, file, line, col, err) {\n    postMessage({type: \"error\", data: {\n        message: message,\n        data: err.data,\n        file: file,\n        line: line, \n        col: col,\n        stack: err.stack\n    }});\n};\n\nwindow.normalizeModule = function(parentId, moduleName) {\n    // normalize plugin requires\n    if (moduleName.indexOf(\"!\") !== -1) {\n        var chunks = moduleName.split(\"!\");\n        return window.normalizeModule(parentId, chunks[0]) + \"!\" + window.normalizeModule(parentId, chunks[1]);\n    }\n    // normalize relative requires\n    if (moduleName.charAt(0) == \".\") {\n        var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\n        moduleName = (base ? base + \"/\" : \"\") + moduleName;\n        \n        while (moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\n            var previous = moduleName;\n            moduleName = moduleName.replace(/^\\.\\//, \"\").replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\n        }\n    }\n    \n    return moduleName;\n};\n\nwindow.require = function require(parentId, id) {\n    if (!id) {\n        id = parentId;\n        parentId = null;\n    }\n    if (!id.charAt)\n        throw new Error(\"worker.js require() accepts only (parentId, id) as arguments\");\n\n    id = window.normalizeModule(parentId, id);\n\n    var module = window.require.modules[id];\n    if (module) {\n        if (!module.initialized) {\n            module.initialized = true;\n            module.exports = module.factory().exports;\n        }\n        return module.exports;\n    }\n   \n    if (!window.require.tlns)\n        return console.log(\"unable to load \" + id);\n    \n    var path = resolveModuleId(id, window.require.tlns);\n    if (path.slice(-3) != \".js\") path += \".js\";\n    \n    window.require.id = id;\n    window.require.modules[id] = {}; // prevent infinite loop on broken modules\n    importScripts(path);\n    return window.require(parentId, id);\n};\nfunction resolveModuleId(id, paths) {\n    var testPath = id, tail = \"\";\n    while (testPath) {\n        var alias = paths[testPath];\n        if (typeof alias == \"string\") {\n            return alias + tail;\n        } else if (alias) {\n            return  alias.location.replace(/\\/*$/, \"/\") + (tail || alias.main || alias.name);\n        } else if (alias === false) {\n            return \"\";\n        }\n        var i = testPath.lastIndexOf(\"/\");\n        if (i === -1) break;\n        tail = testPath.substr(i) + tail;\n        testPath = testPath.slice(0, i);\n    }\n    return id;\n}\nwindow.require.modules = {};\nwindow.require.tlns = {};\n\nwindow.define = function(id, deps, factory) {\n    if (arguments.length == 2) {\n        factory = deps;\n        if (typeof id != \"string\") {\n            deps = id;\n            id = window.require.id;\n        }\n    } else if (arguments.length == 1) {\n        factory = id;\n        deps = [];\n        id = window.require.id;\n    }\n    \n    if (typeof factory != \"function\") {\n        window.require.modules[id] = {\n            exports: factory,\n            initialized: true\n        };\n        return;\n    }\n\n    if (!deps.length)\n        // If there is no dependencies, we inject \"require\", \"exports\" and\n        // \"module\" as dependencies, to provide CommonJS compatibility.\n        deps = [\"require\", \"exports\", \"module\"];\n\n    var req = function(childId) {\n        return window.require(id, childId);\n    };\n\n    window.require.modules[id] = {\n        exports: {},\n        factory: function() {\n            var module = this;\n            var returnExports = factory.apply(this, deps.slice(0, factory.length).map(function(dep) {\n                switch (dep) {\n                    // Because \"require\", \"exports\" and \"module\" aren't actual\n                    // dependencies, we must handle them seperately.\n                    case \"require\": return req;\n                    case \"exports\": return module.exports;\n                    case \"module\":  return module;\n                    // But for all other dependencies, we can just go ahead and\n                    // require them.\n                    default:        return req(dep);\n                }\n            }));\n            if (returnExports)\n                module.exports = returnExports;\n            return module;\n        }\n    };\n};\nwindow.define.amd = {};\nrequire.tlns = {};\nwindow.initBaseUrls  = function initBaseUrls(topLevelNamespaces) {\n    for (var i in topLevelNamespaces)\n        require.tlns[i] = topLevelNamespaces[i];\n};\n\nwindow.initSender = function initSender() {\n\n    var EventEmitter = window.require(\"ace/lib/event_emitter\").EventEmitter;\n    var oop = window.require(\"ace/lib/oop\");\n    \n    var Sender = function() {};\n    \n    (function() {\n        \n        oop.implement(this, EventEmitter);\n                \n        this.callback = function(data, callbackId) {\n            postMessage({\n                type: \"call\",\n                id: callbackId,\n                data: data\n            });\n        };\n    \n        this.emit = function(name, data) {\n            postMessage({\n                type: \"event\",\n                name: name,\n                data: data\n            });\n        };\n        \n    }).call(Sender.prototype);\n    \n    return new Sender();\n};\n\nvar main = window.main = null;\nvar sender = window.sender = null;\n\nwindow.onmessage = function(e) {\n    var msg = e.data;\n    if (msg.event && sender) {\n        sender._signal(msg.event, msg.data);\n    }\n    else if (msg.command) {\n        if (main[msg.command])\n            main[msg.command].apply(main, msg.args);\n        else if (window[msg.command])\n            window[msg.command].apply(window, msg.args);\n        else\n            throw new Error(\"Unknown command:\" + msg.command);\n    }\n    else if (msg.init) {\n        window.initBaseUrls(msg.tlns);\n        require(\"ace/lib/es5-shim\");\n        sender = window.sender = window.initSender();\n        var clazz = require(msg.module)[msg.classname];\n        main = window.main = new clazz(sender);\n    }\n};\n})(this);\n\nace.define(\"ace/lib/oop\",[], function(require, exports, module) {\n\"use strict\";\n\nexports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\n\nexports.mixin = function(obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\n\nexports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n\n});\n\nace.define(\"ace/range\",[], function(require, exports, module) {\n\"use strict\";\nvar comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\nvar Range = function(startRow, startColumn, endRow, endColumn) {\n    this.start = {\n        row: startRow,\n        column: startColumn\n    };\n\n    this.end = {\n        row: endRow,\n        column: endColumn\n    };\n};\n\n(function() {\n    this.isEqual = function(range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    };\n    this.toString = function() {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    };\n\n    this.contains = function(row, column) {\n        return this.compare(row, column) == 0;\n    };\n    this.compareRange = function(range) {\n        var cmp,\n            end = range.end,\n            start = range.start;\n\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            } else if (cmp == 0) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (cmp == -1) {\n            return -2;\n        } else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            } else if (cmp == 1) {\n                return 42;\n            } else {\n                return 0;\n            }\n        }\n    };\n    this.comparePoint = function(p) {\n        return this.compare(p.row, p.column);\n    };\n    this.containsRange = function(range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n    this.intersects = function(range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    };\n    this.isEnd = function(row, column) {\n        return this.end.row == row && this.end.column == column;\n    };\n    this.isStart = function(row, column) {\n        return this.start.row == row && this.start.column == column;\n    };\n    this.setStart = function(row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        } else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    };\n    this.setEnd = function(row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        } else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    };\n    this.inside = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideStart = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideEnd = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.compare = function(row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n\n        if (row < this.start.row)\n            return -1;\n\n        if (row > this.end.row)\n            return 1;\n\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n\n        return 0;\n    };\n    this.compareStart = function(row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareEnd = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareInside = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.clipRows = function(firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = {row: lastRow + 1, column: 0};\n        else if (this.end.row < firstRow)\n            var end = {row: firstRow, column: 0};\n\n        if (this.start.row > lastRow)\n            var start = {row: lastRow + 1, column: 0};\n        else if (this.start.row < firstRow)\n            var start = {row: firstRow, column: 0};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    this.extend = function(row, column) {\n        var cmp = this.compare(row, column);\n\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = {row: row, column: column};\n        else\n            var end = {row: row, column: column};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    this.isEmpty = function() {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    };\n    this.isMultiLine = function() {\n        return (this.start.row !== this.end.row);\n    };\n    this.clone = function() {\n        return Range.fromPoints(this.start, this.end);\n    };\n    this.collapseRows = function() {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    };\n    this.toScreenRange = function(session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n\n        return new Range(\n            screenPosStart.row, screenPosStart.column,\n            screenPosEnd.row, screenPosEnd.column\n        );\n    };\n    this.moveBy = function(row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    };\n\n}).call(Range.prototype);\nRange.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\nRange.comparePoints = comparePoints;\n\nRange.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\n\n\nexports.Range = Range;\n});\n\nace.define(\"ace/apply_delta\",[], function(require, exports, module) {\n\"use strict\";\n\nfunction throwDeltaError(delta, errorText){\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\n\nfunction positionInDocument(docLines, position) {\n    return position.row    >= 0 && position.row    <  docLines.length &&\n           position.column >= 0 && position.column <= docLines[position.row].length;\n}\n\nfunction validateDelta(docLines, delta) {\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n    if (!delta.start || !delta.end)\n       throwDeltaError(delta, \"delta.start/end must be an present\");\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\n\nexports.applyDelta = function(docLines, delta, doNotValidate) {\n    \n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            } else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            } else {\n                docLines.splice(\n                    row, endRow - row + 1,\n                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)\n                );\n            }\n            break;\n    }\n};\n});\n\nace.define(\"ace/lib/event_emitter\",[], function(require, exports, module) {\n\"use strict\";\n\nvar EventEmitter = {};\nvar stopPropagation = function() { this.propagationStopped = true; };\nvar preventDefault = function() { this.defaultPrevented = true; };\n\nEventEmitter._emit =\nEventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler)\n        return;\n\n    if (typeof e != \"object\" || !e)\n        e = {};\n\n    if (!e.type)\n        e.type = eventName;\n    if (!e.stopPropagation)\n        e.stopPropagation = stopPropagation;\n    if (!e.preventDefault)\n        e.preventDefault = preventDefault;\n\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++) {\n        listeners[i](e, this);\n        if (e.propagationStopped)\n            break;\n    }\n    \n    if (defaultHandler && !e.defaultPrevented)\n        return defaultHandler(e, this);\n};\n\n\nEventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++)\n        listeners[i](e, this);\n};\n\nEventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    this.on(eventName, function newCallback() {\n        _self.off(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n    if (!callback) {\n        return new Promise(function(resolve) {\n            callback = resolve;\n        });\n    }\n};\n\n\nEventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = {_disabled_: {}};\n    \n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1) \n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    \n    if (handlers[eventName] == callback) {\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\n\nEventEmitter.on =\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        listeners = this._eventRegistry[eventName] = [];\n\n    if (listeners.indexOf(callback) == -1)\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n};\n\nEventEmitter.off =\nEventEmitter.removeListener =\nEventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        return;\n\n    var index = listeners.indexOf(callback);\n    if (index !== -1)\n        listeners.splice(index, 1);\n};\n\nEventEmitter.removeAllListeners = function(eventName) {\n    if (!eventName) this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry) this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers) this._defaultHandlers[eventName] = undefined;\n};\n\nexports.EventEmitter = EventEmitter;\n\n});\n\nace.define(\"ace/anchor\",[], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\nvar Anchor = exports.Anchor = function(doc, row, column) {\n    this.$onChange = this.onChange.bind(this);\n    this.attach(doc);\n    \n    if (typeof column == \"undefined\")\n        this.setPosition(row.row, row.column);\n    else\n        this.setPosition(row, column);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.getPosition = function() {\n        return this.$clipPositionToDocument(this.row, this.column);\n    };\n    this.getDocument = function() {\n        return this.document;\n    };\n    this.$insertRight = false;\n    this.onChange = function(delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n\n        if (delta.start.row > this.row)\n            return;\n            \n        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    };\n    \n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n        return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n    }\n            \n    function $getTransformedPoint(delta, point, moveIfEqual) {\n        var deltaIsInsert = delta.action == \"insert\";\n        var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);\n        var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n        var deltaStart = delta.start;\n        var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n        if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n            return {\n                row: point.row,\n                column: point.column\n            };\n        }\n        if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n            return {\n                row: point.row + deltaRowShift,\n                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n            };\n        }\n        \n        return {\n            row: deltaStart.row,\n            column: deltaStart.column\n        };\n    }\n    this.setPosition = function(row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        } else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    };\n    this.detach = function() {\n        this.document.off(\"change\", this.$onChange);\n    };\n    this.attach = function(doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    };\n    this.$clipPositionToDocument = function(row, column) {\n        var pos = {};\n\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n\n        if (column < 0)\n            pos.column = 0;\n\n        return pos;\n    };\n\n}).call(Anchor.prototype);\n\n});\n\nace.define(\"ace/document\",[], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar applyDelta = require(\"./apply_delta\").applyDelta;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Anchor = require(\"./anchor\").Anchor;\n\nvar Document = function(textOrLines) {\n    this.$lines = [\"\"];\n    if (textOrLines.length === 0) {\n        this.$lines = [\"\"];\n    } else if (Array.isArray(textOrLines)) {\n        this.insertMergedLines({row: 0, column: 0}, textOrLines);\n    } else {\n        this.insert({row: 0, column:0}, textOrLines);\n    }\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setValue = function(text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({row: 0, column: 0}, text);\n    };\n    this.getValue = function() {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    };\n    this.createAnchor = function(row, column) {\n        return new Anchor(this, row, column);\n    };\n    if (\"aaa\".split(/a/).length === 0) {\n        this.$split = function(text) {\n            return text.replace(/\\r\\n|\\r/g, \"\\n\").split(\"\\n\");\n        };\n    } else {\n        this.$split = function(text) {\n            return text.split(/\\r\\n|\\r|\\n/);\n        };\n    }\n\n\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineCharacter = function() {\n        switch (this.$newLineMode) {\n          case \"windows\":\n            return \"\\r\\n\";\n          case \"unix\":\n            return \"\\n\";\n          default:\n            return this.$autoNewLine || \"\\n\";\n        }\n    };\n\n    this.$autoNewLine = \"\";\n    this.$newLineMode = \"auto\";\n    this.setNewLineMode = function(newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineMode = function() {\n        return this.$newLineMode;\n    };\n    this.isNewLine = function(text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    };\n    this.getLine = function(row) {\n        return this.$lines[row] || \"\";\n    };\n    this.getLines = function(firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    };\n    this.getAllLines = function() {\n        return this.getLines(0, this.getLength());\n    };\n    this.getLength = function() {\n        return this.$lines.length;\n    };\n    this.getTextRange = function(range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n    this.getLinesForRange = function(range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        } else {\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    };\n    this.insertLines = function(row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    };\n    this.removeLines = function(firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    };\n    this.insertNewLine = function(position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n    this.insert = function(position, text) {\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        \n        return this.insertMergedLines(position, this.$split(text));\n    };\n    this.insertInLine = function(position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        \n        return this.clonePos(end);\n    };\n    \n    this.clippedPos = function(row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        } else if (row < 0) {\n            row = 0;\n        } else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return {row: row, column: column};\n    };\n    \n    this.clonePos = function(pos) {\n        return {row: pos.row, column: pos.column};\n    };\n    \n    this.pos = function(row, column) {\n        return {row: row, column: column};\n    };\n    \n    this.$clipPosition = function(position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        } else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    };\n    this.insertFullLines = function(row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        var column = 0;\n        if (row < this.getLength()) {\n            lines = lines.concat([\"\"]);\n            column = 0;\n        } else {\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        this.insertMergedLines({row: row, column: column}, lines);\n    };    \n    this.insertMergedLines = function(position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        \n        return this.clonePos(end);\n    };\n    this.remove = function(range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        });\n        return this.clonePos(start);\n    };\n    this.removeInLine = function(row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        }, true);\n        \n        return this.clonePos(start);\n    };\n    this.removeFullLines = function(firstRow, lastRow) {\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine  = lastRow  < this.getLength() - 1;\n        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );\n        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );\n        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );\n        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length ); \n        var range = new Range(startRow, startCol, endRow, endCol);\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        \n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        return deletedLines;\n    };\n    this.removeNewLine = function(row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    };\n    this.replace = function(range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n        if (text == this.getTextRange(range))\n            return range.end;\n\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        \n        return end;\n    };\n    this.applyDeltas = function(deltas) {\n        for (var i=0; i<deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    };\n    this.revertDeltas = function(deltas) {\n        for (var i=deltas.length-1; i>=0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    };\n    this.applyDelta = function(delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        \n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    };\n    \n    this.$safeApplyDelta = function(delta) {\n        var docLength = this.$lines.length;\n        if (\n            delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength\n            || delta.action == \"insert\" && delta.start.row <= docLength\n        ) {\n            this.applyDelta(delta);\n        }\n    };\n    \n    this.$splitAndapplyLargeDelta = function(delta, MAX) {\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row; \n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    };\n    this.revertDelta = function(delta) {\n        this.$safeApplyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    };\n    this.indexToPosition = function(index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return {row: i, column: index + lines[i].length + newlineLength};\n        }\n        return {row: l-1, column: index + lines[l-1].length + newlineLength};\n    };\n    this.positionToIndex = function(pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n\n        return index + pos.column;\n    };\n\n}).call(Document.prototype);\n\nexports.Document = Document;\n});\n\nace.define(\"ace/lib/lang\",[], function(require, exports, module) {\n\"use strict\";\n\nexports.last = function(a) {\n    return a[a.length - 1];\n};\n\nexports.stringReverse = function(string) {\n    return string.split(\"\").reverse().join(\"\");\n};\n\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\n\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\n\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\n\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\n\nexports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\n\nexports.copyArray = function(array){\n    var copy = [];\n    for (var i=0, l=array.length; i<l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else \n            copy[i] = array[i];\n    }\n    return copy;\n};\n\nexports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    \n    copy = {};\n    for (var key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\n\nexports.arrayToMap = function(arr) {\n    var map = {};\n    for (var i=0; i<arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n\n};\n\nexports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\nexports.arrayRemove = function(array, value) {\n  for (var i = 0; i <= array.length; i++) {\n    if (value === array[i]) {\n      array.splice(i, 1);\n    }\n  }\n};\n\nexports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\nexports.escapeHTML = function(str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\n\nexports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n\n    string.replace(regExp, function(str) {\n        matches.push({\n            offset: arguments[arguments.length-2],\n            length: str.length\n        });\n    });\n\n    return matches;\n};\nexports.deferredCall = function(fcn) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var deferred = function(timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function() {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n\n    deferred.cancel = function() {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n    \n    deferred.isPending = function() {\n        return timer;\n    };\n\n    return deferred;\n};\n\n\nexports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var _self = function(timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function(timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n\n    _self.call = function() {\n        this.cancel();\n        fcn();\n    };\n\n    _self.cancel = function() {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n\n    _self.isPending = function() {\n        return timer;\n    };\n\n    return _self;\n};\n});\n\nace.define(\"ace/worker/mirror\",[], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"../range\").Range;\nvar Document = require(\"../document\").Document;\nvar lang = require(\"../lib/lang\");\n    \nvar Mirror = exports.Mirror = function(sender) {\n    this.sender = sender;\n    var doc = this.doc = new Document(\"\");\n    \n    var deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this));\n    \n    var _self = this;\n    sender.on(\"change\", function(e) {\n        var data = e.data;\n        if (data[0].start) {\n            doc.applyDeltas(data);\n        } else {\n            for (var i = 0; i < data.length; i += 2) {\n                if (Array.isArray(data[i+1])) {\n                    var d = {action: \"insert\", start: data[i], lines: data[i+1]};\n                } else {\n                    var d = {action: \"remove\", start: data[i], end: data[i+1]};\n                }\n                doc.applyDelta(d, true);\n            }\n        }\n        if (_self.$timeout)\n            return deferredUpdate.schedule(_self.$timeout);\n        _self.onUpdate();\n    });\n};\n\n(function() {\n    \n    this.$timeout = 500;\n    \n    this.setTimeout = function(timeout) {\n        this.$timeout = timeout;\n    };\n    \n    this.setValue = function(value) {\n        this.doc.setValue(value);\n        this.deferredUpdate.schedule(this.$timeout);\n    };\n    \n    this.getValue = function(callbackId) {\n        this.sender.callback(this.doc.getValue(), callbackId);\n    };\n    \n    this.onUpdate = function() {\n    };\n    \n    this.isPending = function() {\n        return this.deferredUpdate.isPending();\n    };\n    \n}).call(Mirror.prototype);\n\n});\n\nace.define(\"ace/mode/lua/luaparse\",[], function(require, exports, module) {\n\n(function (root, name, factory) {\n   factory(exports)\n}(this, 'luaparse', function (exports) {\n  'use strict';\n\n  exports.version = '0.1.4';\n\n  var input, options, length;\n  var defaultOptions = exports.defaultOptions = {\n      wait: false\n    , comments: true\n    , scope: false\n    , locations: false\n    , ranges: false\n  };\n\n  var EOF = 1, StringLiteral = 2, Keyword = 4, Identifier = 8\n    , NumericLiteral = 16, Punctuator = 32, BooleanLiteral = 64\n    , NilLiteral = 128, VarargLiteral = 256;\n\n  exports.tokenTypes = { EOF: EOF, StringLiteral: StringLiteral\n    , Keyword: Keyword, Identifier: Identifier, NumericLiteral: NumericLiteral\n    , Punctuator: Punctuator, BooleanLiteral: BooleanLiteral\n    , NilLiteral: NilLiteral, VarargLiteral: VarargLiteral\n  };\n\n  var errors = exports.errors = {\n      unexpected: 'Unexpected %1 \\'%2\\' near \\'%3\\''\n    , expected: '\\'%1\\' expected near \\'%2\\''\n    , expectedToken: '%1 expected near \\'%2\\''\n    , unfinishedString: 'unfinished string near \\'%1\\''\n    , malformedNumber: 'malformed number near \\'%1\\''\n  };\n\n  var ast = exports.ast = {\n      labelStatement: function(label) {\n      return {\n          type: 'LabelStatement'\n        , label: label\n      };\n    }\n\n    , breakStatement: function() {\n      return {\n          type: 'BreakStatement'\n      };\n    }\n\n    , gotoStatement: function(label) {\n      return {\n          type: 'GotoStatement'\n        , label: label\n      };\n    }\n\n    , returnStatement: function(args) {\n      return {\n          type: 'ReturnStatement'\n        , 'arguments': args\n      };\n    }\n\n    , ifStatement: function(clauses) {\n      return {\n          type: 'IfStatement'\n        , clauses: clauses\n      };\n    }\n    , ifClause: function(condition, body) {\n      return {\n          type: 'IfClause'\n        , condition: condition\n        , body: body\n      };\n    }\n    , elseifClause: function(condition, body) {\n      return {\n          type: 'ElseifClause'\n        , condition: condition\n        , body: body\n      };\n    }\n    , elseClause: function(body) {\n      return {\n          type: 'ElseClause'\n        , body: body\n      };\n    }\n\n    , whileStatement: function(condition, body) {\n      return {\n          type: 'WhileStatement'\n        , condition: condition\n        , body: body\n      };\n    }\n\n    , doStatement: function(body) {\n      return {\n          type: 'DoStatement'\n        , body: body\n      };\n    }\n\n    , repeatStatement: function(condition, body) {\n      return {\n          type: 'RepeatStatement'\n        , condition: condition\n        , body: body\n      };\n    }\n\n    , localStatement: function(variables, init) {\n      return {\n          type: 'LocalStatement'\n        , variables: variables\n        , init: init\n      };\n    }\n\n    , assignmentStatement: function(variables, init) {\n      return {\n          type: 'AssignmentStatement'\n        , variables: variables\n        , init: init\n      };\n    }\n\n    , callStatement: function(expression) {\n      return {\n          type: 'CallStatement'\n        , expression: expression\n      };\n    }\n\n    , functionStatement: function(identifier, parameters, isLocal, body) {\n      return {\n          type: 'FunctionDeclaration'\n        , identifier: identifier\n        , isLocal: isLocal\n        , parameters: parameters\n        , body: body\n      };\n    }\n\n    , forNumericStatement: function(variable, start, end, step, body) {\n      return {\n          type: 'ForNumericStatement'\n        , variable: variable\n        , start: start\n        , end: end\n        , step: step\n        , body: body\n      };\n    }\n\n    , forGenericStatement: function(variables, iterators, body) {\n      return {\n          type: 'ForGenericStatement'\n        , variables: variables\n        , iterators: iterators\n        , body: body\n      };\n    }\n\n    , chunk: function(body) {\n      return {\n          type: 'Chunk'\n        , body: body\n      };\n    }\n\n    , identifier: function(name) {\n      return {\n          type: 'Identifier'\n        , name: name\n      };\n    }\n\n    , literal: function(type, value, raw) {\n      type = (type === StringLiteral) ? 'StringLiteral'\n        : (type === NumericLiteral) ? 'NumericLiteral'\n        : (type === BooleanLiteral) ? 'BooleanLiteral'\n        : (type === NilLiteral) ? 'NilLiteral'\n        : 'VarargLiteral';\n\n      return {\n          type: type\n        , value: value\n        , raw: raw\n      };\n    }\n\n    , tableKey: function(key, value) {\n      return {\n          type: 'TableKey'\n        , key: key\n        , value: value\n      };\n    }\n    , tableKeyString: function(key, value) {\n      return {\n          type: 'TableKeyString'\n        , key: key\n        , value: value\n      };\n    }\n    , tableValue: function(value) {\n      return {\n          type: 'TableValue'\n        , value: value\n      };\n    }\n\n\n    , tableConstructorExpression: function(fields) {\n      return {\n          type: 'TableConstructorExpression'\n        , fields: fields\n      };\n    }\n    , binaryExpression: function(operator, left, right) {\n      var type = ('and' === operator || 'or' === operator) ?\n        'LogicalExpression' :\n        'BinaryExpression';\n\n      return {\n          type: type\n        , operator: operator\n        , left: left\n        , right: right\n      };\n    }\n    , unaryExpression: function(operator, argument) {\n      return {\n          type: 'UnaryExpression'\n        , operator: operator\n        , argument: argument\n      };\n    }\n    , memberExpression: function(base, indexer, identifier) {\n      return {\n          type: 'MemberExpression'\n        , indexer: indexer\n        , identifier: identifier\n        , base: base\n      };\n    }\n\n    , indexExpression: function(base, index) {\n      return {\n          type: 'IndexExpression'\n        , base: base\n        , index: index\n      };\n    }\n\n    , callExpression: function(base, args) {\n      return {\n          type: 'CallExpression'\n        , base: base\n        , 'arguments': args\n      };\n    }\n\n    , tableCallExpression: function(base, args) {\n      return {\n          type: 'TableCallExpression'\n        , base: base\n        , 'arguments': args\n      };\n    }\n\n    , stringCallExpression: function(base, argument) {\n      return {\n          type: 'StringCallExpression'\n        , base: base\n        , argument: argument\n      };\n    }\n\n    , comment: function(value, raw) {\n      return {\n          type: 'Comment'\n        , value: value\n        , raw: raw\n      };\n    }\n  };\n\n  function finishNode(node) {\n    if (trackLocations) {\n      var location = locations.pop();\n      location.complete();\n      if (options.locations) node.loc = location.loc;\n      if (options.ranges) node.range = location.range;\n    }\n    return node;\n  }\n\n  var slice = Array.prototype.slice\n    , toString = Object.prototype.toString\n    , indexOf = function indexOf(array, element) {\n      for (var i = 0, length = array.length; i < length; i++) {\n        if (array[i] === element) return i;\n      }\n      return -1;\n    };\n\n  function indexOfObject(array, property, element) {\n    for (var i = 0, length = array.length; i < length; i++) {\n      if (array[i][property] === element) return i;\n    }\n    return -1;\n  }\n\n  function sprintf(format) {\n    var args = slice.call(arguments, 1);\n    format = format.replace(/%(\\d)/g, function (match, index) {\n      return '' + args[index - 1] || '';\n    });\n    return format;\n  }\n\n  function extend() {\n    var args = slice.call(arguments)\n      , dest = {}\n      , src, prop;\n\n    for (var i = 0, length = args.length; i < length; i++) {\n      src = args[i];\n      for (prop in src) if (src.hasOwnProperty(prop)) {\n        dest[prop] = src[prop];\n      }\n    }\n    return dest;\n  }\n\n  function raise(token) {\n    var message = sprintf.apply(null, slice.call(arguments, 1))\n      , error, col;\n\n    if ('undefined' !== typeof token.line) {\n      col = token.range[0] - token.lineStart;\n      error = new SyntaxError(sprintf('[%1:%2] %3', token.line, col, message));\n      error.line = token.line;\n      error.index = token.range[0];\n      error.column = col;\n    } else {\n      col = index - lineStart + 1;\n      error = new SyntaxError(sprintf('[%1:%2] %3', line, col, message));\n      error.index = index;\n      error.line = line;\n      error.column = col;\n    }\n    throw error;\n  }\n\n  function raiseUnexpectedToken(type, token) {\n    raise(token, errors.expectedToken, type, token.value);\n  }\n\n  function unexpected(found, near) {\n    if ('undefined' === typeof near) near = lookahead.value;\n    if ('undefined' !== typeof found.type) {\n      var type;\n      switch (found.type) {\n        case StringLiteral:   type = 'string';      break;\n        case Keyword:         type = 'keyword';     break;\n        case Identifier:      type = 'identifier';  break;\n        case NumericLiteral:  type = 'number';      break;\n        case Punctuator:      type = 'symbol';      break;\n        case BooleanLiteral:  type = 'boolean';     break;\n        case NilLiteral:\n          return raise(found, errors.unexpected, 'symbol', 'nil', near);\n      }\n      return raise(found, errors.unexpected, type, found.value, near);\n    }\n    return raise(found, errors.unexpected, 'symbol', found, near);\n  }\n\n  var index\n    , token\n    , previousToken\n    , lookahead\n    , comments\n    , tokenStart\n    , line\n    , lineStart;\n\n  exports.lex = lex;\n\n  function lex() {\n    skipWhiteSpace();\n    while (45 === input.charCodeAt(index) &&\n           45 === input.charCodeAt(index + 1)) {\n      scanComment();\n      skipWhiteSpace();\n    }\n    if (index >= length) return {\n        type : EOF\n      , value: '<eof>'\n      , line: line\n      , lineStart: lineStart\n      , range: [index, index]\n    };\n\n    var charCode = input.charCodeAt(index)\n      , next = input.charCodeAt(index + 1);\n    tokenStart = index;\n    if (isIdentifierStart(charCode)) return scanIdentifierOrKeyword();\n\n    switch (charCode) {\n      case 39: case 34: // '\"\n        return scanStringLiteral();\n      case 48: case 49: case 50: case 51: case 52: case 53:\n      case 54: case 55: case 56: case 57:\n        return scanNumericLiteral();\n\n      case 46: // .\n        if (isDecDigit(next)) return scanNumericLiteral();\n        if (46 === next) {\n          if (46 === input.charCodeAt(index + 2)) return scanVarargLiteral();\n          return scanPunctuator('..');\n        }\n        return scanPunctuator('.');\n\n      case 61: // =\n        if (61 === next) return scanPunctuator('==');\n        return scanPunctuator('=');\n\n      case 62: // >\n        if (61 === next) return scanPunctuator('>=');\n        return scanPunctuator('>');\n\n      case 60: // <\n        if (61 === next) return scanPunctuator('<=');\n        return scanPunctuator('<');\n\n      case 126: // ~\n        if (61 === next) return scanPunctuator('~=');\n        return scanPunctuator('~');\n\n      case 58: // :\n        if (58 === next) return scanPunctuator('::');\n        return scanPunctuator(':');\n\n      case 91: // [\n        if (91 === next || 61 === next) return scanLongStringLiteral();\n        return scanPunctuator('[');\n      case 42: case 47: case 94: case 37: case 44: case 123: case 125:\n      case 93: case 40: case 41: case 59: case 35: case 45: case 43: case 38: case 124:\n        return scanPunctuator(input.charAt(index));\n    }\n\n    return unexpected(input.charAt(index));\n  }\n\n  function skipWhiteSpace() {\n    while (index < length) {\n      var charCode = input.charCodeAt(index);\n      if (isWhiteSpace(charCode)) {\n        index++;\n      } else if (isLineTerminator(charCode)) {\n        line++;\n        lineStart = ++index;\n      } else {\n        break;\n      }\n    }\n  }\n\n  function scanIdentifierOrKeyword() {\n    var value, type;\n    while (isIdentifierPart(input.charCodeAt(++index)));\n    value = input.slice(tokenStart, index);\n    if (isKeyword(value)) {\n      type = Keyword;\n    } else if ('true' === value || 'false' === value) {\n      type = BooleanLiteral;\n      value = ('true' === value);\n    } else if ('nil' === value) {\n      type = NilLiteral;\n      value = null;\n    } else {\n      type = Identifier;\n    }\n\n    return {\n        type: type\n      , value: value\n      , line: line\n      , lineStart: lineStart\n      , range: [tokenStart, index]\n    };\n  }\n\n  function scanPunctuator(value) {\n    index += value.length;\n    return {\n        type: Punctuator\n      , value: value\n      , line: line\n      , lineStart: lineStart\n      , range: [tokenStart, index]\n    };\n  }\n\n  function scanVarargLiteral() {\n    index += 3;\n    return {\n        type: VarargLiteral\n      , value: '...'\n      , line: line\n      , lineStart: lineStart\n      , range: [tokenStart, index]\n    };\n  }\n\n  function scanStringLiteral() {\n    var delimiter = input.charCodeAt(index++)\n      , stringStart = index\n      , string = ''\n      , charCode;\n\n    while (index < length) {\n      charCode = input.charCodeAt(index++);\n      if (delimiter === charCode) break;\n      if (92 === charCode) { // \\\n        string += input.slice(stringStart, index - 1) + readEscapeSequence();\n        stringStart = index;\n      }\n      else if (index >= length || isLineTerminator(charCode)) {\n        string += input.slice(stringStart, index - 1);\n        raise({}, errors.unfinishedString, string + String.fromCharCode(charCode));\n      }\n    }\n    string += input.slice(stringStart, index - 1);\n\n    return {\n        type: StringLiteral\n      , value: string\n      , line: line\n      , lineStart: lineStart\n      , range: [tokenStart, index]\n    };\n  }\n\n  function scanLongStringLiteral() {\n    var string = readLongString();\n    if (false === string) raise(token, errors.expected, '[', token.value);\n\n    return {\n        type: StringLiteral\n      , value: string\n      , line: line\n      , lineStart: lineStart\n      , range: [tokenStart, index]\n    };\n  }\n\n  function scanNumericLiteral() {\n    var character = input.charAt(index)\n      , next = input.charAt(index + 1);\n\n    var value = ('0' === character && 'xX'.indexOf(next || null) >= 0) ?\n      readHexLiteral() : readDecLiteral();\n\n    return {\n        type: NumericLiteral\n      , value: value\n      , line: line\n      , lineStart: lineStart\n      , range: [tokenStart, index]\n    };\n  }\n\n  function readHexLiteral() {\n    var fraction = 0 // defaults to 0 as it gets summed\n      , binaryExponent = 1 // defaults to 1 as it gets multiplied\n      , binarySign = 1 // positive\n      , digit, fractionStart, exponentStart, digitStart;\n\n    digitStart = index += 2; // Skip 0x part\n    if (!isHexDigit(input.charCodeAt(index)))\n      raise({}, errors.malformedNumber, input.slice(tokenStart, index));\n\n    while (isHexDigit(input.charCodeAt(index))) index++;\n    digit = parseInt(input.slice(digitStart, index), 16);\n    if ('.' === input.charAt(index)) {\n      fractionStart = ++index;\n\n      while (isHexDigit(input.charCodeAt(index))) index++;\n      fraction = input.slice(fractionStart, index);\n      fraction = (fractionStart === index) ? 0\n        : parseInt(fraction, 16) / Math.pow(16, index - fractionStart);\n    }\n    if ('pP'.indexOf(input.charAt(index) || null) >= 0) {\n      index++;\n      if ('+-'.indexOf(input.charAt(index) || null) >= 0)\n        binarySign = ('+' === input.charAt(index++)) ? 1 : -1;\n\n      exponentStart = index;\n      if (!isDecDigit(input.charCodeAt(index)))\n        raise({}, errors.malformedNumber, input.slice(tokenStart, index));\n\n      while (isDecDigit(input.charCodeAt(index))) index++;\n      binaryExponent = input.slice(exponentStart, index);\n      binaryExponent = Math.pow(2, binaryExponent * binarySign);\n    }\n\n    return (digit + fraction) * binaryExponent;\n  }\n\n  function readDecLiteral() {\n    while (isDecDigit(input.charCodeAt(index))) index++;\n    if ('.' === input.charAt(index)) {\n      index++;\n      while (isDecDigit(input.charCodeAt(index))) index++;\n    }\n    if ('eE'.indexOf(input.charAt(index) || null) >= 0) {\n      index++;\n      if ('+-'.indexOf(input.charAt(index) || null) >= 0) index++;\n      if (!isDecDigit(input.charCodeAt(index)))\n        raise({}, errors.malformedNumber, input.slice(tokenStart, index));\n\n      while (isDecDigit(input.charCodeAt(index))) index++;\n    }\n\n    return parseFloat(input.slice(tokenStart, index));\n  }\n\n  function readEscapeSequence() {\n    var sequenceStart = index;\n    switch (input.charAt(index)) {\n      case 'n': index++; return '\\n';\n      case 'r': index++; return '\\r';\n      case 't': index++; return '\\t';\n      case 'v': index++; return '\\x0B';\n      case 'b': index++; return '\\b';\n      case 'f': index++; return '\\f';\n      case 'z': index++; skipWhiteSpace(); return '';\n      case 'x':\n        if (isHexDigit(input.charCodeAt(index + 1)) &&\n            isHexDigit(input.charCodeAt(index + 2))) {\n          index += 3;\n          return '\\\\' + input.slice(sequenceStart, index);\n        }\n        return '\\\\' + input.charAt(index++);\n      default:\n        if (isDecDigit(input.charCodeAt(index))) {\n          while (isDecDigit(input.charCodeAt(++index)));\n          return '\\\\' + input.slice(sequenceStart, index);\n        }\n        return input.charAt(index++);\n    }\n  }\n\n  function scanComment() {\n    tokenStart = index;\n    index += 2; // --\n\n    var character = input.charAt(index)\n      , content = ''\n      , isLong = false\n      , commentStart = index\n      , lineStartComment = lineStart\n      , lineComment = line;\n\n    if ('[' === character) {\n      content = readLongString();\n      if (false === content) content = character;\n      else isLong = true;\n    }\n    if (!isLong) {\n      while (index < length) {\n        if (isLineTerminator(input.charCodeAt(index))) break;\n        index++;\n      }\n      if (options.comments) content = input.slice(commentStart, index);\n    }\n\n    if (options.comments) {\n      var node = ast.comment(content, input.slice(tokenStart, index));\n      if (options.locations) {\n        node.loc = {\n            start: { line: lineComment, column: tokenStart - lineStartComment }\n          , end: { line: line, column: index - lineStart }\n        };\n      }\n      if (options.ranges) {\n        node.range = [tokenStart, index];\n      }\n      comments.push(node);\n    }\n  }\n\n  function readLongString() {\n    var level = 0\n      , content = ''\n      , terminator = false\n      , character, stringStart;\n\n    index++; // [\n    while ('=' === input.charAt(index + level)) level++;\n    if ('[' !== input.charAt(index + level)) return false;\n\n    index += level + 1;\n    if (isLineTerminator(input.charCodeAt(index))) {\n      line++;\n      lineStart = index++;\n    }\n\n    stringStart = index;\n    while (index < length) {\n      character = input.charAt(index++);\n      if (isLineTerminator(character.charCodeAt(0))) {\n        line++;\n        lineStart = index;\n      }\n      if (']' === character) {\n        terminator = true;\n        for (var i = 0; i < level; i++) {\n          if ('=' !== input.charAt(index + i)) terminator = false;\n        }\n        if (']' !== input.charAt(index + level)) terminator = false;\n      }\n      if (terminator) break;\n    }\n    content += input.slice(stringStart, index - 1);\n    index += level + 1;\n\n    return content;\n  }\n\n  function next() {\n    previousToken = token;\n    token = lookahead;\n    lookahead = lex();\n  }\n\n  function consume(value) {\n    if (value === token.value) {\n      next();\n      return true;\n    }\n    return false;\n  }\n\n  function expect(value) {\n    if (value === token.value) next();\n    else raise(token, errors.expected, value, token.value);\n  }\n\n  function isWhiteSpace(charCode) {\n    return 9 === charCode || 32 === charCode || 0xB === charCode || 0xC === charCode;\n  }\n\n  function isLineTerminator(charCode) {\n    return 10 === charCode || 13 === charCode;\n  }\n\n  function isDecDigit(charCode) {\n    return charCode >= 48 && charCode <= 57;\n  }\n\n  function isHexDigit(charCode) {\n    return (charCode >= 48 && charCode <= 57) || (charCode >= 97 && charCode <= 102) || (charCode >= 65 && charCode <= 70);\n  }\n\n  function isIdentifierStart(charCode) {\n    return (charCode >= 65 && charCode <= 90) || (charCode >= 97 && charCode <= 122) || 95 === charCode;\n  }\n\n  function isIdentifierPart(charCode) {\n    return (charCode >= 65 && charCode <= 90) || (charCode >= 97 && charCode <= 122) || 95 === charCode || (charCode >= 48 && charCode <= 57);\n  }\n\n  function isKeyword(id) {\n    switch (id.length) {\n      case 2:\n        return 'do' === id || 'if' === id || 'in' === id || 'or' === id;\n      case 3:\n        return 'and' === id || 'end' === id || 'for' === id || 'not' === id;\n      case 4:\n        return 'else' === id || 'goto' === id || 'then' === id;\n      case 5:\n        return 'break' === id || 'local' === id || 'until' === id || 'while' === id;\n      case 6:\n        return 'elseif' === id || 'repeat' === id || 'return' === id;\n      case 8:\n        return 'function' === id;\n    }\n    return false;\n  }\n\n  function isUnary(token) {\n    if (Punctuator === token.type) return '#-~'.indexOf(token.value) >= 0;\n    if (Keyword === token.type) return 'not' === token.value;\n    return false;\n  }\n  function isCallExpression(expression) {\n    switch (expression.type) {\n      case 'CallExpression':\n      case 'TableCallExpression':\n      case 'StringCallExpression':\n        return true;\n    }\n    return false;\n  }\n\n  function isBlockFollow(token) {\n    if (EOF === token.type) return true;\n    if (Keyword !== token.type) return false;\n    switch (token.value) {\n      case 'else': case 'elseif':\n      case 'end': case 'until':\n        return true;\n      default:\n        return false;\n    }\n  }\n  var scopes\n    , scopeDepth\n    , globals;\n  function createScope() {\n    scopes.push(Array.apply(null, scopes[scopeDepth++]));\n  }\n  function exitScope() {\n    scopes.pop();\n    scopeDepth--;\n  }\n  function scopeIdentifierName(name) {\n    if (-1 !== indexOf(scopes[scopeDepth], name)) return;\n    scopes[scopeDepth].push(name);\n  }\n  function scopeIdentifier(node) {\n    scopeIdentifierName(node.name);\n    attachScope(node, true);\n  }\n  function attachScope(node, isLocal) {\n    if (!isLocal && -1 === indexOfObject(globals, 'name', node.name))\n      globals.push(node);\n\n    node.isLocal = isLocal;\n  }\n  function scopeHasName(name) {\n    return (-1 !== indexOf(scopes[scopeDepth], name));\n  }\n\n  var locations = []\n    , trackLocations;\n\n  function createLocationMarker() {\n    return new Marker(token);\n  }\n\n  function Marker(token) {\n    if (options.locations) {\n      this.loc = {\n          start: {\n            line: token.line\n          , column: token.range[0] - token.lineStart\n        }\n        , end: {\n            line: 0\n          , column: 0\n        }\n      };\n    }\n    if (options.ranges) this.range = [token.range[0], 0];\n  }\n  Marker.prototype.complete = function() {\n    if (options.locations) {\n      this.loc.end.line = previousToken.line;\n      this.loc.end.column = previousToken.range[1] - previousToken.lineStart;\n    }\n    if (options.ranges) {\n      this.range[1] = previousToken.range[1];\n    }\n  };\n  function markLocation() {\n    if (trackLocations) locations.push(createLocationMarker());\n  }\n  function pushLocation(marker) {\n    if (trackLocations) locations.push(marker);\n  }\n\n  function parseChunk() {\n    next();\n    markLocation();\n    var body = parseBlock();\n    if (EOF !== token.type) unexpected(token);\n    if (trackLocations && !body.length) previousToken = token;\n    return finishNode(ast.chunk(body));\n  }\n\n  function parseBlock(terminator) {\n    var block = []\n      , statement;\n    if (options.scope) createScope();\n\n    while (!isBlockFollow(token)) {\n      if ('return' === token.value) {\n        block.push(parseStatement());\n        break;\n      }\n      statement = parseStatement();\n      if (statement) block.push(statement);\n    }\n\n    if (options.scope) exitScope();\n    return block;\n  }\n\n  function parseStatement() {\n    markLocation();\n    if (Keyword === token.type) {\n      switch (token.value) {\n        case 'local':    next(); return parseLocalStatement();\n        case 'if':       next(); return parseIfStatement();\n        case 'return':   next(); return parseReturnStatement();\n        case 'function': next();\n          var name = parseFunctionName();\n          return parseFunctionDeclaration(name);\n        case 'while':    next(); return parseWhileStatement();\n        case 'for':      next(); return parseForStatement();\n        case 'repeat':   next(); return parseRepeatStatement();\n        case 'break':    next(); return parseBreakStatement();\n        case 'do':       next(); return parseDoStatement();\n        case 'goto':     next(); return parseGotoStatement();\n      }\n    }\n\n    if (Punctuator === token.type) {\n      if (consume('::')) return parseLabelStatement();\n    }\n    if (trackLocations) locations.pop();\n    if (consume(';')) return;\n\n    return parseAssignmentOrCallStatement();\n  }\n\n  function parseLabelStatement() {\n    var name = token.value\n      , label = parseIdentifier();\n\n    if (options.scope) {\n      scopeIdentifierName('::' + name + '::');\n      attachScope(label, true);\n    }\n\n    expect('::');\n    return finishNode(ast.labelStatement(label));\n  }\n\n  function parseBreakStatement() {\n    return finishNode(ast.breakStatement());\n  }\n\n  function parseGotoStatement() {\n    var name = token.value\n      , label = parseIdentifier();\n\n    if (options.scope) label.isLabel = scopeHasName('::' + name + '::');\n    return finishNode(ast.gotoStatement(label));\n  }\n\n  function parseDoStatement() {\n    var body = parseBlock();\n    expect('end');\n    return finishNode(ast.doStatement(body));\n  }\n\n  function parseWhileStatement() {\n    var condition = parseExpectedExpression();\n    expect('do');\n    var body = parseBlock();\n    expect('end');\n    return finishNode(ast.whileStatement(condition, body));\n  }\n\n  function parseRepeatStatement() {\n    var body = parseBlock();\n    expect('until');\n    var condition = parseExpectedExpression();\n    return finishNode(ast.repeatStatement(condition, body));\n  }\n\n  function parseReturnStatement() {\n    var expressions = [];\n\n    if ('end' !== token.value) {\n      var expression = parseExpression();\n      if (null != expression) expressions.push(expression);\n      while (consume(',')) {\n        expression = parseExpectedExpression();\n        expressions.push(expression);\n      }\n      consume(';'); // grammar tells us ; is optional here.\n    }\n    return finishNode(ast.returnStatement(expressions));\n  }\n\n  function parseIfStatement() {\n    var clauses = []\n      , condition\n      , body\n      , marker;\n    if (trackLocations) {\n      marker = locations[locations.length - 1];\n      locations.push(marker);\n    }\n    condition = parseExpectedExpression();\n    expect('then');\n    body = parseBlock();\n    clauses.push(finishNode(ast.ifClause(condition, body)));\n\n    if (trackLocations) marker = createLocationMarker();\n    while (consume('elseif')) {\n      pushLocation(marker);\n      condition = parseExpectedExpression();\n      expect('then');\n      body = parseBlock();\n      clauses.push(finishNode(ast.elseifClause(condition, body)));\n      if (trackLocations) marker = createLocationMarker();\n    }\n\n    if (consume('else')) {\n      if (trackLocations) {\n        marker = new Marker(previousToken);\n        locations.push(marker);\n      }\n      body = parseBlock();\n      clauses.push(finishNode(ast.elseClause(body)));\n    }\n\n    expect('end');\n    return finishNode(ast.ifStatement(clauses));\n  }\n\n  function parseForStatement() {\n    var variable = parseIdentifier()\n      , body;\n    if (options.scope) scopeIdentifier(variable);\n    if (consume('=')) {\n      var start = parseExpectedExpression();\n      expect(',');\n      var end = parseExpectedExpression();\n      var step = consume(',') ? parseExpectedExpression() : null;\n\n      expect('do');\n      body = parseBlock();\n      expect('end');\n\n      return finishNode(ast.forNumericStatement(variable, start, end, step, body));\n    }\n    else {\n      var variables = [variable];\n      while (consume(',')) {\n        variable = parseIdentifier();\n        if (options.scope) scopeIdentifier(variable);\n        variables.push(variable);\n      }\n      expect('in');\n      var iterators = [];\n      do {\n        var expression = parseExpectedExpression();\n        iterators.push(expression);\n      } while (consume(','));\n\n      expect('do');\n      body = parseBlock();\n      expect('end');\n\n      return finishNode(ast.forGenericStatement(variables, iterators, body));\n    }\n  }\n\n  function parseLocalStatement() {\n    var name;\n\n    if (Identifier === token.type) {\n      var variables = []\n        , init = [];\n\n      do {\n        name = parseIdentifier();\n\n        variables.push(name);\n      } while (consume(','));\n\n      if (consume('=')) {\n        do {\n          var expression = parseExpectedExpression();\n          init.push(expression);\n        } while (consume(','));\n      }\n      if (options.scope) {\n        for (var i = 0, l = variables.length; i < l; i++) {\n          scopeIdentifier(variables[i]);\n        }\n      }\n\n      return finishNode(ast.localStatement(variables, init));\n    }\n    if (consume('function')) {\n      name = parseIdentifier();\n      if (options.scope) scopeIdentifier(name);\n      return parseFunctionDeclaration(name, true);\n    } else {\n      raiseUnexpectedToken('<name>', token);\n    }\n  }\n\n  function parseAssignmentOrCallStatement() {\n    var previous = token\n      , expression, marker;\n\n    if (trackLocations) marker = createLocationMarker();\n    expression = parsePrefixExpression();\n\n    if (null == expression) return unexpected(token);\n    if (',='.indexOf(token.value) >= 0) {\n      var variables = [expression]\n        , init = []\n        , exp;\n\n      while (consume(',')) {\n        exp = parsePrefixExpression();\n        if (null == exp) raiseUnexpectedToken('<expression>', token);\n        variables.push(exp);\n      }\n      expect('=');\n      do {\n        exp = parseExpectedExpression();\n        init.push(exp);\n      } while (consume(','));\n\n      pushLocation(marker);\n      return finishNode(ast.assignmentStatement(variables, init));\n    }\n    if (isCallExpression(expression)) {\n      pushLocation(marker);\n      return finishNode(ast.callStatement(expression));\n    }\n    return unexpected(previous);\n  }\n\n  function parseIdentifier() {\n    markLocation();\n    var identifier = token.value;\n    if (Identifier !== token.type) raiseUnexpectedToken('<name>', token);\n    next();\n    return finishNode(ast.identifier(identifier));\n  }\n\n  function parseFunctionDeclaration(name, isLocal) {\n    var parameters = [];\n    expect('(');\n    if (!consume(')')) {\n      while (true) {\n        if (Identifier === token.type) {\n          var parameter = parseIdentifier();\n          if (options.scope) scopeIdentifier(parameter);\n\n          parameters.push(parameter);\n\n          if (consume(',')) continue;\n          else if (consume(')')) break;\n        }\n        else if (VarargLiteral === token.type) {\n          parameters.push(parsePrimaryExpression());\n          expect(')');\n          break;\n        } else {\n          raiseUnexpectedToken('<name> or \\'...\\'', token);\n        }\n      }\n    }\n\n    var body = parseBlock();\n    expect('end');\n\n    isLocal = isLocal || false;\n    return finishNode(ast.functionStatement(name, parameters, isLocal, body));\n  }\n\n  function parseFunctionName() {\n    var base, name, marker;\n\n    if (trackLocations) marker = createLocationMarker();\n    base = parseIdentifier();\n\n    if (options.scope) attachScope(base, false);\n\n    while (consume('.')) {\n      pushLocation(marker);\n      name = parseIdentifier();\n      if (options.scope) attachScope(name, false);\n      base = finishNode(ast.memberExpression(base, '.', name));\n    }\n\n    if (consume(':')) {\n      pushLocation(marker);\n      name = parseIdentifier();\n      if (options.scope) attachScope(name, false);\n      base = finishNode(ast.memberExpression(base, ':', name));\n    }\n\n    return base;\n  }\n\n  function parseTableConstructor() {\n    var fields = []\n      , key, value;\n\n    while (true) {\n      markLocation();\n      if (Punctuator === token.type && consume('[')) {\n        key = parseExpectedExpression();\n        expect(']');\n        expect('=');\n        value = parseExpectedExpression();\n        fields.push(finishNode(ast.tableKey(key, value)));\n      } else if (Identifier === token.type) {\n        key = parseExpectedExpression();\n        if (consume('=')) {\n          value = parseExpectedExpression();\n          fields.push(finishNode(ast.tableKeyString(key, value)));\n        } else {\n          fields.push(finishNode(ast.tableValue(key)));\n        }\n      } else {\n        if (null == (value = parseExpression())) {\n          locations.pop();\n          break;\n        }\n        fields.push(finishNode(ast.tableValue(value)));\n      }\n      if (',;'.indexOf(token.value) >= 0) {\n        next();\n        continue;\n      }\n      if ('}' === token.value) break;\n    }\n    expect('}');\n    return finishNode(ast.tableConstructorExpression(fields));\n  }\n\n  function parseExpression() {\n    var expression = parseSubExpression(0);\n    return expression;\n  }\n\n  function parseExpectedExpression() {\n    var expression = parseExpression();\n    if (null == expression) raiseUnexpectedToken('<expression>', token);\n    else return expression;\n  }\n\n  function binaryPrecedence(operator) {\n    var charCode = operator.charCodeAt(0)\n      , length = operator.length;\n\n    if (1 === length) {\n      switch (charCode) {\n        case 94: return 10; // ^\n        case 42: case 47: case 37: return 7; // * / %\n        case 43: case 45: return 6; // + -\n        case 60: case 62: return 3; // < >\n        case 38: case 124: return 7; // & |\n      }\n    } else if (2 === length) {\n      switch (charCode) {\n        case 46: return 5; // ..\n        case 60: case 62: case 61: case 126: return 3; // <= >= == ~=\n        case 111: return 1; // or\n      }\n    } else if (97 === charCode && 'and' === operator) return 2;\n    return 0;\n  }\n\n  function parseSubExpression(minPrecedence) {\n    var operator = token.value\n      , expression, marker;\n\n    if (trackLocations) marker = createLocationMarker();\n    if (isUnary(token)) {\n      markLocation();\n      next();\n      var argument = parseSubExpression(8);\n      if (argument == null) raiseUnexpectedToken('<expression>', token);\n      expression = finishNode(ast.unaryExpression(operator, argument));\n    }\n    if (null == expression) {\n      expression = parsePrimaryExpression();\n      if (null == expression) {\n        expression = parsePrefixExpression();\n      }\n    }\n    if (null == expression) return null;\n\n    var precedence;\n    while (true) {\n      operator = token.value;\n\n      precedence = (Punctuator === token.type || Keyword === token.type) ?\n        binaryPrecedence(operator) : 0;\n\n      if (precedence === 0 || precedence <= minPrecedence) break;\n      if ('^' === operator || '..' === operator) precedence--;\n      next();\n      var right = parseSubExpression(precedence);\n      if (null == right) raiseUnexpectedToken('<expression>', token);\n      if (trackLocations) locations.push(marker);\n      expression = finishNode(ast.binaryExpression(operator, expression, right));\n\n    }\n    return expression;\n  }\n\n  function parsePrefixExpression() {\n    var base, name, marker\n      , isLocal;\n\n    if (trackLocations) marker = createLocationMarker();\n    if (Identifier === token.type) {\n      name = token.value;\n      base = parseIdentifier();\n      if (options.scope) attachScope(base, isLocal = scopeHasName(name));\n    } else if (consume('(')) {\n      base = parseExpectedExpression();\n      expect(')');\n      if (options.scope) isLocal = base.isLocal;\n    } else {\n      return null;\n    }\n    var expression, identifier;\n    while (true) {\n      if (Punctuator === token.type) {\n        switch (token.value) {\n          case '[':\n            pushLocation(marker);\n            next();\n            expression = parseExpectedExpression();\n            base = finishNode(ast.indexExpression(base, expression));\n            expect(']');\n            break;\n          case '.':\n            pushLocation(marker);\n            next();\n            identifier = parseIdentifier();\n            if (options.scope) attachScope(identifier, isLocal);\n            base = finishNode(ast.memberExpression(base, '.', identifier));\n            break;\n          case ':':\n            pushLocation(marker);\n            next();\n            identifier = parseIdentifier();\n            if (options.scope) attachScope(identifier, isLocal);\n            base = finishNode(ast.memberExpression(base, ':', identifier));\n            pushLocation(marker);\n            base = parseCallExpression(base);\n            break;\n          case '(': case '{': // args\n            pushLocation(marker);\n            base = parseCallExpression(base);\n            break;\n          default:\n            return base;\n        }\n      } else if (StringLiteral === token.type) {\n        pushLocation(marker);\n        base = parseCallExpression(base);\n      } else {\n        break;\n      }\n    }\n\n    return base;\n  }\n\n  function parseCallExpression(base) {\n    if (Punctuator === token.type) {\n      switch (token.value) {\n        case '(':\n          next();\n          var expressions = [];\n          var expression = parseExpression();\n          if (null != expression) expressions.push(expression);\n          while (consume(',')) {\n            expression = parseExpectedExpression();\n            expressions.push(expression);\n          }\n\n          expect(')');\n          return finishNode(ast.callExpression(base, expressions));\n\n        case '{':\n          markLocation();\n          next();\n          var table = parseTableConstructor();\n          return finishNode(ast.tableCallExpression(base, table));\n      }\n    } else if (StringLiteral === token.type) {\n      return finishNode(ast.stringCallExpression(base, parsePrimaryExpression()));\n    }\n\n    raiseUnexpectedToken('function arguments', token);\n  }\n\n  function parsePrimaryExpression() {\n    var literals = StringLiteral | NumericLiteral | BooleanLiteral | NilLiteral | VarargLiteral\n      , value = token.value\n      , type = token.type\n      , marker;\n\n    if (trackLocations) marker = createLocationMarker();\n\n    if (type & literals) {\n      pushLocation(marker);\n      var raw = input.slice(token.range[0], token.range[1]);\n      next();\n      return finishNode(ast.literal(type, value, raw));\n    } else if (Keyword === type && 'function' === value) {\n      pushLocation(marker);\n      next();\n      return parseFunctionDeclaration(null);\n    } else if (consume('{')) {\n      pushLocation(marker);\n      return parseTableConstructor();\n    }\n  }\n\n  exports.parse = parse;\n\n  function parse(_input, _options) {\n    if ('undefined' === typeof _options && 'object' === typeof _input) {\n      _options = _input;\n      _input = undefined;\n    }\n    if (!_options) _options = {};\n\n    input = _input || '';\n    options = extend(defaultOptions, _options);\n    index = 0;\n    line = 1;\n    lineStart = 0;\n    length = input.length;\n    scopes = [[]];\n    scopeDepth = 0;\n    globals = [];\n    locations = [];\n\n    if (options.comments) comments = [];\n    if (!options.wait) return end();\n    return exports;\n  }\n  exports.write = write;\n\n  function write(_input) {\n    input += String(_input);\n    length = input.length;\n    return exports;\n  }\n  exports.end = end;\n\n  function end(_input) {\n    if ('undefined' !== typeof _input) write(_input);\n\n    length = input.length;\n    trackLocations = options.locations || options.ranges;\n    lookahead = lex();\n\n    var chunk = parseChunk();\n    if (options.comments) chunk.comments = comments;\n    if (options.scope) chunk.globals = globals;\n\n    if (locations.length > 0)\n      throw new Error('Location tracking failed. This is most likely a bug in luaparse');\n\n    return chunk;\n  }\n\n}));\n\n});\n\nace.define(\"ace/mode/lua_worker\",[], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar Mirror = require(\"../worker/mirror\").Mirror;\nvar luaparse = require(\"../mode/lua/luaparse\");\n\nvar Worker = exports.Worker = function(sender) {\n    Mirror.call(this, sender);\n    this.setTimeout(500);\n};\n\noop.inherits(Worker, Mirror);\n\n(function() {\n\n    this.onUpdate = function() {\n        var value = this.doc.getValue();\n        var errors = [];\n        try {\n            luaparse.parse(value);\n        } catch(e) {\n            if (e instanceof SyntaxError) {\n                errors.push({\n                    row: e.line - 1,\n                    column: e.column,\n                    text: e.message,\n                    type: \"error\"\n                });\n            }\n        }\n        this.sender.emit(\"annotate\", errors);\n    };\n\n}).call(Worker.prototype);\n\n});\n\nace.define(\"ace/lib/es5-shim\",[], function(require, exports, module) {\n\nfunction Empty() {}\n\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function bind(that) { // .length is 1\n        var target = this;\n        if (typeof target != \"function\") {\n            throw new TypeError(\"Function.prototype.bind called on incompatible \" + target);\n        }\n        var args = slice.call(arguments, 1); // for normal call\n        var bound = function () {\n\n            if (this instanceof bound) {\n\n                var result = target.apply(\n                    this,\n                    args.concat(slice.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                return target.apply(\n                    that,\n                    args.concat(slice.call(arguments))\n                );\n\n            }\n\n        };\n        if(target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            Empty.prototype = null;\n        }\n        return bound;\n    };\n}\nvar call = Function.prototype.call;\nvar prototypeOfArray = Array.prototype;\nvar prototypeOfObject = Object.prototype;\nvar slice = prototypeOfArray.slice;\nvar _toString = call.bind(prototypeOfObject.toString);\nvar owns = call.bind(prototypeOfObject.hasOwnProperty);\nvar defineGetter;\nvar defineSetter;\nvar lookupGetter;\nvar lookupSetter;\nvar supportsAccessors;\nif ((supportsAccessors = owns(prototypeOfObject, \"__defineGetter__\"))) {\n    defineGetter = call.bind(prototypeOfObject.__defineGetter__);\n    defineSetter = call.bind(prototypeOfObject.__defineSetter__);\n    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);\n    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);\n}\nif ([1,2].splice(0).length != 2) {\n    if(function() { // test IE < 9 to splice bug - see issue #138\n        function makeArray(l) {\n            var a = new Array(l+2);\n            a[0] = a[1] = 0;\n            return a;\n        }\n        var array = [], lengthBefore;\n        \n        array.splice.apply(array, makeArray(20));\n        array.splice.apply(array, makeArray(26));\n\n        lengthBefore = array.length; //46\n        array.splice(5, 0, \"XXX\"); // add one element\n\n        lengthBefore + 1 == array.length\n\n        if (lengthBefore + 1 == array.length) {\n            return true;// has right splice implementation without bugs\n        }\n    }()) {//IE 6/7\n        var array_splice = Array.prototype.splice;\n        Array.prototype.splice = function(start, deleteCount) {\n            if (!arguments.length) {\n                return [];\n            } else {\n                return array_splice.apply(this, [\n                    start === void 0 ? 0 : start,\n                    deleteCount === void 0 ? (this.length - start) : deleteCount\n                ].concat(slice.call(arguments, 2)))\n            }\n        };\n    } else {//IE8\n        Array.prototype.splice = function(pos, removeCount){\n            var length = this.length;\n            if (pos > 0) {\n                if (pos > length)\n                    pos = length;\n            } else if (pos == void 0) {\n                pos = 0;\n            } else if (pos < 0) {\n                pos = Math.max(length + pos, 0);\n            }\n\n            if (!(pos+removeCount < length))\n                removeCount = length - pos;\n\n            var removed = this.slice(pos, pos+removeCount);\n            var insert = slice.call(arguments, 2);\n            var add = insert.length;            \n            if (pos === length) {\n                if (add) {\n                    this.push.apply(this, insert);\n                }\n            } else {\n                var remove = Math.min(removeCount, length - pos);\n                var tailOldPos = pos + remove;\n                var tailNewPos = tailOldPos + add - remove;\n                var tailCount = length - tailOldPos;\n                var lengthAfterRemove = length - remove;\n\n                if (tailNewPos < tailOldPos) { // case A\n                    for (var i = 0; i < tailCount; ++i) {\n                        this[tailNewPos+i] = this[tailOldPos+i];\n                    }\n                } else if (tailNewPos > tailOldPos) { // case B\n                    for (i = tailCount; i--; ) {\n                        this[tailNewPos+i] = this[tailOldPos+i];\n                    }\n                } // else, add == remove (nothing to do)\n\n                if (add && pos === lengthAfterRemove) {\n                    this.length = lengthAfterRemove; // truncate array\n                    this.push.apply(this, insert);\n                } else {\n                    this.length = lengthAfterRemove + add; // reserves space\n                    for (i = 0; i < add; ++i) {\n                        this[pos+i] = insert[i];\n                    }\n                }\n            }\n            return removed;\n        };\n    }\n}\nif (!Array.isArray) {\n    Array.isArray = function isArray(obj) {\n        return _toString(obj) == \"[object Array]\";\n    };\n}\nvar boxedString = Object(\"a\"),\n    splitString = boxedString[0] != \"a\" || !(0 in boxedString);\n\nif (!Array.prototype.forEach) {\n    Array.prototype.forEach = function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    };\n}\nif (!Array.prototype.map) {\n    Array.prototype.map = function map(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            result = Array(length),\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self)\n                result[i] = fun.call(thisp, self[i], i, object);\n        }\n        return result;\n    };\n}\nif (!Array.prototype.filter) {\n    Array.prototype.filter = function filter(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                    object,\n            length = self.length >>> 0,\n            result = [],\n            value,\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                value = self[i];\n                if (fun.call(thisp, value, i, object)) {\n                    result.push(value);\n                }\n            }\n        }\n        return result;\n    };\n}\nif (!Array.prototype.every) {\n    Array.prototype.every = function every(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && !fun.call(thisp, self[i], i, object)) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\nif (!Array.prototype.some) {\n    Array.prototype.some = function some(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && fun.call(thisp, self[i], i, object)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\nif (!Array.prototype.reduce) {\n    Array.prototype.reduce = function reduce(fun /*, initial*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0;\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n        if (!length && arguments.length == 1) {\n            throw new TypeError(\"reduce of empty array with no initial value\");\n        }\n\n        var i = 0;\n        var result;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i++];\n                    break;\n                }\n                if (++i >= length) {\n                    throw new TypeError(\"reduce of empty array with no initial value\");\n                }\n            } while (true);\n        }\n\n        for (; i < length; i++) {\n            if (i in self) {\n                result = fun.call(void 0, result, self[i], i, object);\n            }\n        }\n\n        return result;\n    };\n}\nif (!Array.prototype.reduceRight) {\n    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0;\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n        if (!length && arguments.length == 1) {\n            throw new TypeError(\"reduceRight of empty array with no initial value\");\n        }\n\n        var result, i = length - 1;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i--];\n                    break;\n                }\n                if (--i < 0) {\n                    throw new TypeError(\"reduceRight of empty array with no initial value\");\n                }\n            } while (true);\n        }\n\n        do {\n            if (i in this) {\n                result = fun.call(void 0, result, self[i], i, object);\n            }\n        } while (i--);\n\n        return result;\n    };\n}\nif (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {\n    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\nif (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {\n    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {\n        var self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n        var i = length - 1;\n        if (arguments.length > 1) {\n            i = Math.min(i, toInteger(arguments[1]));\n        }\n        i = i >= 0 ? i : length - Math.abs(i);\n        for (; i >= 0; i--) {\n            if (i in self && sought === self[i]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\nif (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function getPrototypeOf(object) {\n        return object.__proto__ || (\n            object.constructor ?\n            object.constructor.prototype :\n            prototypeOfObject\n        );\n    };\n}\nif (!Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = \"Object.getOwnPropertyDescriptor called on a \" +\n                         \"non-object: \";\n    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n        if ((typeof object != \"object\" && typeof object != \"function\") || object === null)\n            throw new TypeError(ERR_NON_OBJECT + object);\n        if (!owns(object, property))\n            return;\n\n        var descriptor, getter, setter;\n        descriptor =  { enumerable: true, configurable: true };\n        if (supportsAccessors) {\n            var prototype = object.__proto__;\n            object.__proto__ = prototypeOfObject;\n\n            var getter = lookupGetter(object, property);\n            var setter = lookupSetter(object, property);\n            object.__proto__ = prototype;\n\n            if (getter || setter) {\n                if (getter) descriptor.get = getter;\n                if (setter) descriptor.set = setter;\n                return descriptor;\n            }\n        }\n        descriptor.value = object[property];\n        return descriptor;\n    };\n}\nif (!Object.getOwnPropertyNames) {\n    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {\n        return Object.keys(object);\n    };\n}\nif (!Object.create) {\n    var createEmpty;\n    if (Object.prototype.__proto__ === null) {\n        createEmpty = function () {\n            return { \"__proto__\": null };\n        };\n    } else {\n        createEmpty = function () {\n            var empty = {};\n            for (var i in empty)\n                empty[i] = null;\n            empty.constructor =\n            empty.hasOwnProperty =\n            empty.propertyIsEnumerable =\n            empty.isPrototypeOf =\n            empty.toLocaleString =\n            empty.toString =\n            empty.valueOf =\n            empty.__proto__ = null;\n            return empty;\n        }\n    }\n\n    Object.create = function create(prototype, properties) {\n        var object;\n        if (prototype === null) {\n            object = createEmpty();\n        } else {\n            if (typeof prototype != \"object\")\n                throw new TypeError(\"typeof prototype[\"+(typeof prototype)+\"] != 'object'\");\n            var Type = function () {};\n            Type.prototype = prototype;\n            object = new Type();\n            object.__proto__ = prototype;\n        }\n        if (properties !== void 0)\n            Object.defineProperties(object, properties);\n        return object;\n    };\n}\n\nfunction doesDefinePropertyWork(object) {\n    try {\n        Object.defineProperty(object, \"sentinel\", {});\n        return \"sentinel\" in object;\n    } catch (exception) {\n    }\n}\nif (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({});\n    var definePropertyWorksOnDom = typeof document == \"undefined\" ||\n        doesDefinePropertyWork(document.createElement(\"div\"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {\n        var definePropertyFallback = Object.defineProperty;\n    }\n}\n\nif (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = \"Property description must be an object: \";\n    var ERR_NON_OBJECT_TARGET = \"Object.defineProperty called on non-object: \"\n    var ERR_ACCESSORS_NOT_SUPPORTED = \"getters & setters can not be defined \" +\n                                      \"on this javascript engine\";\n\n    Object.defineProperty = function defineProperty(object, property, descriptor) {\n        if ((typeof object != \"object\" && typeof object != \"function\") || object === null)\n            throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n        if ((typeof descriptor != \"object\" && typeof descriptor != \"function\") || descriptor === null)\n            throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n        if (definePropertyFallback) {\n            try {\n                return definePropertyFallback.call(Object, object, property, descriptor);\n            } catch (exception) {\n            }\n        }\n        if (owns(descriptor, \"value\")) {\n\n            if (supportsAccessors && (lookupGetter(object, property) ||\n                                      lookupSetter(object, property)))\n            {\n                var prototype = object.__proto__;\n                object.__proto__ = prototypeOfObject;\n                delete object[property];\n                object[property] = descriptor.value;\n                object.__proto__ = prototype;\n            } else {\n                object[property] = descriptor.value;\n            }\n        } else {\n            if (!supportsAccessors)\n                throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n            if (owns(descriptor, \"get\"))\n                defineGetter(object, property, descriptor.get);\n            if (owns(descriptor, \"set\"))\n                defineSetter(object, property, descriptor.set);\n        }\n\n        return object;\n    };\n}\nif (!Object.defineProperties) {\n    Object.defineProperties = function defineProperties(object, properties) {\n        for (var property in properties) {\n            if (owns(properties, property))\n                Object.defineProperty(object, property, properties[property]);\n        }\n        return object;\n    };\n}\nif (!Object.seal) {\n    Object.seal = function seal(object) {\n        return object;\n    };\n}\nif (!Object.freeze) {\n    Object.freeze = function freeze(object) {\n        return object;\n    };\n}\ntry {\n    Object.freeze(function () {});\n} catch (exception) {\n    Object.freeze = (function freeze(freezeObject) {\n        return function freeze(object) {\n            if (typeof object == \"function\") {\n                return object;\n            } else {\n                return freezeObject(object);\n            }\n        };\n    })(Object.freeze);\n}\nif (!Object.preventExtensions) {\n    Object.preventExtensions = function preventExtensions(object) {\n        return object;\n    };\n}\nif (!Object.isSealed) {\n    Object.isSealed = function isSealed(object) {\n        return false;\n    };\n}\nif (!Object.isFrozen) {\n    Object.isFrozen = function isFrozen(object) {\n        return false;\n    };\n}\nif (!Object.isExtensible) {\n    Object.isExtensible = function isExtensible(object) {\n        if (Object(object) === object) {\n            throw new TypeError(); // TODO message\n        }\n        var name = '';\n        while (owns(object, name)) {\n            name += '?';\n        }\n        object[name] = true;\n        var returnValue = owns(object, name);\n        delete object[name];\n        return returnValue;\n    };\n}\nif (!Object.keys) {\n    var hasDontEnumBug = true,\n        dontEnums = [\n            \"toString\",\n            \"toLocaleString\",\n            \"valueOf\",\n            \"hasOwnProperty\",\n            \"isPrototypeOf\",\n            \"propertyIsEnumerable\",\n            \"constructor\"\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    for (var key in {\"toString\": null}) {\n        hasDontEnumBug = false;\n    }\n\n    Object.keys = function keys(object) {\n\n        if (\n            (typeof object != \"object\" && typeof object != \"function\") ||\n            object === null\n        ) {\n            throw new TypeError(\"Object.keys called on a non-object\");\n        }\n\n        var keys = [];\n        for (var name in object) {\n            if (owns(object, name)) {\n                keys.push(name);\n            }\n        }\n\n        if (hasDontEnumBug) {\n            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {\n                var dontEnum = dontEnums[i];\n                if (owns(object, dontEnum)) {\n                    keys.push(dontEnum);\n                }\n            }\n        }\n        return keys;\n    };\n\n}\nif (!Date.now) {\n    Date.now = function now() {\n        return new Date().getTime();\n    };\n}\nvar ws = \"\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\" +\n    \"\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\" +\n    \"\\u2029\\uFEFF\";\nif (!String.prototype.trim) {\n    ws = \"[\" + ws + \"]\";\n    var trimBeginRegexp = new RegExp(\"^\" + ws + ws + \"*\"),\n        trimEndRegexp = new RegExp(ws + ws + \"*$\");\n    String.prototype.trim = function trim() {\n        return String(this).replace(trimBeginRegexp, \"\").replace(trimEndRegexp, \"\");\n    };\n}\n\nfunction toInteger(n) {\n    n = +n;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction isPrimitive(input) {\n    var type = typeof input;\n    return (\n        input === null ||\n        type === \"undefined\" ||\n        type === \"boolean\" ||\n        type === \"number\" ||\n        type === \"string\"\n    );\n}\n\nfunction toPrimitive(input) {\n    var val, valueOf, toString;\n    if (isPrimitive(input)) {\n        return input;\n    }\n    valueOf = input.valueOf;\n    if (typeof valueOf === \"function\") {\n        val = valueOf.call(input);\n        if (isPrimitive(val)) {\n            return val;\n        }\n    }\n    toString = input.toString;\n    if (typeof toString === \"function\") {\n        val = toString.call(input);\n        if (isPrimitive(val)) {\n            return val;\n        }\n    }\n    throw new TypeError();\n}\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \"+o+\" to object\");\n    }\n    return Object(o);\n};\n\n});\n"]},"metadata":{},"sourceType":"script"}