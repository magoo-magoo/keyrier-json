{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar React = require(\"react\");\n\nvar isEqual = require(\"lodash.isequal\");\n\nvar editorOptions_1 = require(\"./editorOptions\");\n\nvar ace = editorOptions_1.getAceInstance();\n\nvar Range = ace.require(\"ace/range\").Range;\n\nvar ReactAce =\n/** @class */\nfunction (_super) {\n  __extends(ReactAce, _super);\n\n  function ReactAce(props) {\n    var _this = _super.call(this, props) || this;\n\n    editorOptions_1.editorEvents.forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n    _this.debounce = editorOptions_1.debounce;\n    return _this;\n  }\n\n  ReactAce.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var _a = this.props,\n        className = _a.className,\n        onBeforeLoad = _a.onBeforeLoad,\n        onValidate = _a.onValidate,\n        mode = _a.mode,\n        focus = _a.focus,\n        theme = _a.theme,\n        fontSize = _a.fontSize,\n        value = _a.value,\n        defaultValue = _a.defaultValue,\n        cursorStart = _a.cursorStart,\n        showGutter = _a.showGutter,\n        wrapEnabled = _a.wrapEnabled,\n        showPrintMargin = _a.showPrintMargin,\n        _b = _a.scrollMargin,\n        scrollMargin = _b === void 0 ? [0, 0, 0, 0] : _b,\n        keyboardHandler = _a.keyboardHandler,\n        onLoad = _a.onLoad,\n        commands = _a.commands,\n        annotations = _a.annotations,\n        markers = _a.markers,\n        placeholder = _a.placeholder;\n    this.editor = ace.edit(this.refEditor);\n\n    if (onBeforeLoad) {\n      onBeforeLoad(ace);\n    }\n\n    var editorProps = Object.keys(this.props.editorProps);\n\n    for (var i = 0; i < editorProps.length; i++) {\n      this.editor[editorProps[i]] = this.props.editorProps[editorProps[i]];\n    }\n\n    if (this.props.debounceChangePeriod) {\n      this.onChange = this.debounce(this.onChange, this.props.debounceChangePeriod);\n    }\n\n    this.editor.renderer.setScrollMargin(scrollMargin[0], scrollMargin[1], scrollMargin[2], scrollMargin[3]);\n    this.editor.getSession().setMode(\"ace/mode/\" + mode);\n    this.editor.setTheme(\"ace/theme/\" + theme);\n    this.editor.setFontSize(fontSize);\n    this.editor.getSession().setValue(!defaultValue ? value : defaultValue, cursorStart);\n\n    if (this.props.navigateToFileEnd) {\n      this.editor.navigateFileEnd();\n    }\n\n    this.editor.renderer.setShowGutter(showGutter);\n    this.editor.getSession().setUseWrapMode(wrapEnabled);\n    this.editor.setShowPrintMargin(showPrintMargin);\n    this.editor.on(\"focus\", this.onFocus);\n    this.editor.on(\"blur\", this.onBlur);\n    this.editor.on(\"copy\", this.onCopy);\n    this.editor.on(\"paste\", this.onPaste);\n    this.editor.on(\"change\", this.onChange);\n    this.editor.on(\"input\", this.onInput);\n\n    if (placeholder) {\n      this.updatePlaceholder();\n    }\n\n    this.editor.getSession().selection.on(\"changeSelection\", this.onSelectionChange);\n    this.editor.getSession().selection.on(\"changeCursor\", this.onCursorChange);\n\n    if (onValidate) {\n      this.editor.getSession().on(\"changeAnnotation\", function () {\n        // tslint:disable-next-line:no-shadowed-variable\n        var annotations = _this.editor.getSession().getAnnotations();\n\n        _this.props.onValidate(annotations);\n      });\n    }\n\n    this.editor.session.on(\"changeScrollTop\", this.onScroll);\n    this.editor.getSession().setAnnotations(annotations || []);\n\n    if (markers && markers.length > 0) {\n      this.handleMarkers(markers);\n    } // get a list of possible options to avoid 'misspelled option errors'\n\n\n    var availableOptions = this.editor.$options;\n    editorOptions_1.editorOptions.forEach(function (option) {\n      if (availableOptions.hasOwnProperty(option)) {\n        _this.editor.setOption(option, _this.props[option]);\n      } else if (_this.props[option]) {\n        console.warn(\"ReactAce: editor option \" + option + \" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?\");\n      }\n    });\n    this.handleOptions(this.props);\n\n    if (Array.isArray(commands)) {\n      commands.forEach(function (command) {\n        if (typeof command.exec === \"string\") {\n          _this.editor.commands.bindKey(command.bindKey, command.exec);\n        } else {\n          _this.editor.commands.addCommand(command);\n        }\n      });\n    }\n\n    if (keyboardHandler) {\n      this.editor.setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    if (className) {\n      this.refEditor.className += \" \" + className;\n    }\n\n    if (onLoad) {\n      onLoad(this.editor);\n    }\n\n    this.editor.resize();\n\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n\n  ReactAce.prototype.componentDidUpdate = function (prevProps) {\n    var oldProps = prevProps;\n    var nextProps = this.props;\n\n    for (var i = 0; i < editorOptions_1.editorOptions.length; i++) {\n      var option = editorOptions_1.editorOptions[i];\n\n      if (nextProps[option] !== oldProps[option]) {\n        this.editor.setOption(option, nextProps[option]);\n      }\n    }\n\n    if (nextProps.className !== oldProps.className) {\n      var appliedClasses = this.refEditor.className;\n      var appliedClassesArray_1 = appliedClasses.trim().split(\" \");\n      var oldClassesArray = oldProps.className.trim().split(\" \");\n      oldClassesArray.forEach(function (oldClass) {\n        var index = appliedClassesArray_1.indexOf(oldClass);\n        appliedClassesArray_1.splice(index, 1);\n      });\n      this.refEditor.className = \" \" + nextProps.className + \" \" + appliedClassesArray_1.join(\" \");\n    } // First process editor value, as it may create a new session (see issue #300)\n\n\n    if (this.editor && this.editor.getValue() !== nextProps.value) {\n      // editor.setValue is a synchronous function call, change event is emitted before setValue return.\n      this.silent = true;\n      var pos = this.editor.session.selection.toJSON();\n      this.editor.setValue(nextProps.value, nextProps.cursorStart);\n      this.editor.session.selection.fromJSON(pos);\n      this.silent = false;\n    }\n\n    if (nextProps.placeholder !== oldProps.placeholder) {\n      this.updatePlaceholder();\n    }\n\n    if (nextProps.mode !== oldProps.mode) {\n      this.editor.getSession().setMode(\"ace/mode/\" + nextProps.mode);\n    }\n\n    if (nextProps.theme !== oldProps.theme) {\n      this.editor.setTheme(\"ace/theme/\" + nextProps.theme);\n    }\n\n    if (nextProps.keyboardHandler !== oldProps.keyboardHandler) {\n      if (nextProps.keyboardHandler) {\n        this.editor.setKeyboardHandler(\"ace/keyboard/\" + nextProps.keyboardHandler);\n      } else {\n        this.editor.setKeyboardHandler(null);\n      }\n    }\n\n    if (nextProps.fontSize !== oldProps.fontSize) {\n      this.editor.setFontSize(nextProps.fontSize);\n    }\n\n    if (nextProps.wrapEnabled !== oldProps.wrapEnabled) {\n      this.editor.getSession().setUseWrapMode(nextProps.wrapEnabled);\n    }\n\n    if (nextProps.showPrintMargin !== oldProps.showPrintMargin) {\n      this.editor.setShowPrintMargin(nextProps.showPrintMargin);\n    }\n\n    if (nextProps.showGutter !== oldProps.showGutter) {\n      this.editor.renderer.setShowGutter(nextProps.showGutter);\n    }\n\n    if (!isEqual(nextProps.setOptions, oldProps.setOptions)) {\n      this.handleOptions(nextProps);\n    }\n\n    if (!isEqual(nextProps.annotations, oldProps.annotations)) {\n      this.editor.getSession().setAnnotations(nextProps.annotations || []);\n    }\n\n    if (!isEqual(nextProps.markers, oldProps.markers) && Array.isArray(nextProps.markers)) {\n      this.handleMarkers(nextProps.markers);\n    } // this doesn't look like it works at all....\n\n\n    if (!isEqual(nextProps.scrollMargin, oldProps.scrollMargin)) {\n      this.handleScrollMargins(nextProps.scrollMargin);\n    }\n\n    if (prevProps.height !== this.props.height || prevProps.width !== this.props.width) {\n      this.editor.resize();\n    }\n\n    if (this.props.focus && !prevProps.focus) {\n      this.editor.focus();\n    }\n  };\n\n  ReactAce.prototype.handleScrollMargins = function (margins) {\n    if (margins === void 0) {\n      margins = [0, 0, 0, 0];\n    }\n\n    this.editor.renderer.setScrollMargins(margins[0], margins[1], margins[2], margins[3]);\n  };\n\n  ReactAce.prototype.componentWillUnmount = function () {\n    this.editor.destroy();\n    this.editor = null;\n  };\n\n  ReactAce.prototype.onChange = function (event) {\n    if (this.props.onChange && !this.silent) {\n      var value = this.editor.getValue();\n      this.props.onChange(value, event);\n    }\n  };\n\n  ReactAce.prototype.onSelectionChange = function (event) {\n    if (this.props.onSelectionChange) {\n      var value = this.editor.getSelection();\n      this.props.onSelectionChange(value, event);\n    }\n  };\n\n  ReactAce.prototype.onCursorChange = function (event) {\n    if (this.props.onCursorChange) {\n      var value = this.editor.getSelection();\n      this.props.onCursorChange(value, event);\n    }\n  };\n\n  ReactAce.prototype.onInput = function (event) {\n    if (this.props.onInput) {\n      this.props.onInput(event);\n    }\n\n    if (this.props.placeholder) {\n      this.updatePlaceholder();\n    }\n  };\n\n  ReactAce.prototype.onFocus = function (event) {\n    if (this.props.onFocus) {\n      this.props.onFocus(event, this.editor);\n    }\n  };\n\n  ReactAce.prototype.onBlur = function (event) {\n    if (this.props.onBlur) {\n      this.props.onBlur(event, this.editor);\n    }\n  };\n\n  ReactAce.prototype.onCopy = function (text) {\n    if (this.props.onCopy) {\n      this.props.onCopy(text);\n    }\n  };\n\n  ReactAce.prototype.onPaste = function (text) {\n    if (this.props.onPaste) {\n      this.props.onPaste(text);\n    }\n  };\n\n  ReactAce.prototype.onScroll = function () {\n    if (this.props.onScroll) {\n      this.props.onScroll(this.editor);\n    }\n  };\n\n  ReactAce.prototype.handleOptions = function (props) {\n    var setOptions = Object.keys(props.setOptions);\n\n    for (var y = 0; y < setOptions.length; y++) {\n      this.editor.setOption(setOptions[y], props.setOptions[setOptions[y]]);\n    }\n  };\n\n  ReactAce.prototype.handleMarkers = function (markers) {\n    var _this = this; // remove foreground markers\n\n\n    var currentMarkers = this.editor.getSession().getMarkers(true);\n\n    for (var i in currentMarkers) {\n      if (currentMarkers.hasOwnProperty(i)) {\n        this.editor.getSession().removeMarker(currentMarkers[i].id);\n      }\n    } // remove background markers except active line marker and selected word marker\n\n\n    currentMarkers = this.editor.getSession().getMarkers(false);\n\n    for (var i in currentMarkers) {\n      if (currentMarkers.hasOwnProperty(i) && currentMarkers[i].clazz !== \"ace_active-line\" && currentMarkers[i].clazz !== \"ace_selected-word\") {\n        this.editor.getSession().removeMarker(currentMarkers[i].id);\n      }\n    } // add new markers\n\n\n    markers.forEach(function (_a) {\n      var startRow = _a.startRow,\n          startCol = _a.startCol,\n          endRow = _a.endRow,\n          endCol = _a.endCol,\n          className = _a.className,\n          type = _a.type,\n          _b = _a.inFront,\n          inFront = _b === void 0 ? false : _b;\n      var range = new Range(startRow, startCol, endRow, endCol);\n\n      _this.editor.getSession().addMarker(range, className, type, inFront);\n    });\n  };\n\n  ReactAce.prototype.updatePlaceholder = function () {\n    // Adapted from https://stackoverflow.com/questions/26695708/how-can-i-add-placeholder-text-when-the-editor-is-empty\n    var editor = this.editor;\n    var placeholder = this.props.placeholder;\n    var showPlaceholder = !editor.session.getValue().length;\n    var node = editor.renderer.placeholderNode;\n\n    if (!showPlaceholder && node) {\n      editor.renderer.scroller.removeChild(editor.renderer.placeholderNode);\n      editor.renderer.placeholderNode = null;\n    } else if (showPlaceholder && !node) {\n      node = editor.renderer.placeholderNode = document.createElement(\"div\");\n      node.textContent = placeholder || \"\";\n      node.className = \"ace_comment ace_placeholder\";\n      node.style.padding = \"0 9px\";\n      node.style.position = \"absolute\";\n      node.style.zIndex = \"3\";\n      editor.renderer.scroller.appendChild(node);\n    } else if (showPlaceholder && node) {\n      node.textContent = placeholder;\n    }\n  };\n\n  ReactAce.prototype.updateRef = function (item) {\n    this.refEditor = item;\n  };\n\n  ReactAce.prototype.render = function () {\n    var _a = this.props,\n        name = _a.name,\n        width = _a.width,\n        height = _a.height,\n        style = _a.style;\n\n    var divStyle = __assign({\n      width: width,\n      height: height\n    }, style);\n\n    return React.createElement(\"div\", {\n      ref: this.updateRef,\n      id: name,\n      style: divStyle\n    });\n  };\n\n  ReactAce.propTypes = {\n    mode: PropTypes.string,\n    focus: PropTypes.bool,\n    theme: PropTypes.string,\n    name: PropTypes.string,\n    className: PropTypes.string,\n    height: PropTypes.string,\n    width: PropTypes.string,\n    fontSize: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    showGutter: PropTypes.bool,\n    onChange: PropTypes.func,\n    onCopy: PropTypes.func,\n    onPaste: PropTypes.func,\n    onFocus: PropTypes.func,\n    onInput: PropTypes.func,\n    onBlur: PropTypes.func,\n    onScroll: PropTypes.func,\n    value: PropTypes.string,\n    defaultValue: PropTypes.string,\n    onLoad: PropTypes.func,\n    onSelectionChange: PropTypes.func,\n    onCursorChange: PropTypes.func,\n    onBeforeLoad: PropTypes.func,\n    onValidate: PropTypes.func,\n    minLines: PropTypes.number,\n    maxLines: PropTypes.number,\n    readOnly: PropTypes.bool,\n    highlightActiveLine: PropTypes.bool,\n    tabSize: PropTypes.number,\n    showPrintMargin: PropTypes.bool,\n    cursorStart: PropTypes.number,\n    debounceChangePeriod: PropTypes.number,\n    editorProps: PropTypes.object,\n    setOptions: PropTypes.object,\n    style: PropTypes.object,\n    scrollMargin: PropTypes.array,\n    annotations: PropTypes.array,\n    markers: PropTypes.array,\n    keyboardHandler: PropTypes.string,\n    wrapEnabled: PropTypes.bool,\n    enableSnippets: PropTypes.bool,\n    enableBasicAutocompletion: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    enableLiveAutocompletion: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    navigateToFileEnd: PropTypes.bool,\n    commands: PropTypes.array,\n    placeholder: PropTypes.string\n  };\n  ReactAce.defaultProps = {\n    name: \"ace-editor\",\n    focus: false,\n    mode: \"\",\n    theme: \"\",\n    height: \"500px\",\n    width: \"500px\",\n    value: \"\",\n    fontSize: 12,\n    enableSnippets: false,\n    showGutter: true,\n    onChange: null,\n    onPaste: null,\n    onLoad: null,\n    onScroll: null,\n    minLines: null,\n    maxLines: null,\n    readOnly: false,\n    highlightActiveLine: true,\n    showPrintMargin: true,\n    tabSize: 4,\n    cursorStart: 1,\n    editorProps: {},\n    style: {},\n    scrollMargin: [0, 0, 0, 0],\n    setOptions: {},\n    wrapEnabled: false,\n    enableBasicAutocompletion: false,\n    enableLiveAutocompletion: false,\n    placeholder: null,\n    navigateToFileEnd: true\n  };\n  return ReactAce;\n}(React.Component);\n\nexports.default = ReactAce;","map":{"version":3,"sources":["../src/ace.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PropTypes = require(\"prop-types\");\nvar React = require(\"react\");\nvar isEqual = require(\"lodash.isequal\");\nvar editorOptions_1 = require(\"./editorOptions\");\nvar ace = editorOptions_1.getAceInstance();\nvar Range = ace.require(\"ace/range\").Range;\nvar ReactAce = /** @class */ (function (_super) {\n    __extends(ReactAce, _super);\n    function ReactAce(props) {\n        var _this = _super.call(this, props) || this;\n        editorOptions_1.editorEvents.forEach(function (method) {\n            _this[method] = _this[method].bind(_this);\n        });\n        _this.debounce = editorOptions_1.debounce;\n        return _this;\n    }\n    ReactAce.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, className = _a.className, onBeforeLoad = _a.onBeforeLoad, onValidate = _a.onValidate, mode = _a.mode, focus = _a.focus, theme = _a.theme, fontSize = _a.fontSize, value = _a.value, defaultValue = _a.defaultValue, cursorStart = _a.cursorStart, showGutter = _a.showGutter, wrapEnabled = _a.wrapEnabled, showPrintMargin = _a.showPrintMargin, _b = _a.scrollMargin, scrollMargin = _b === void 0 ? [0, 0, 0, 0] : _b, keyboardHandler = _a.keyboardHandler, onLoad = _a.onLoad, commands = _a.commands, annotations = _a.annotations, markers = _a.markers, placeholder = _a.placeholder;\n        this.editor = ace.edit(this.refEditor);\n        if (onBeforeLoad) {\n            onBeforeLoad(ace);\n        }\n        var editorProps = Object.keys(this.props.editorProps);\n        for (var i = 0; i < editorProps.length; i++) {\n            this.editor[editorProps[i]] = this.props.editorProps[editorProps[i]];\n        }\n        if (this.props.debounceChangePeriod) {\n            this.onChange = this.debounce(this.onChange, this.props.debounceChangePeriod);\n        }\n        this.editor.renderer.setScrollMargin(scrollMargin[0], scrollMargin[1], scrollMargin[2], scrollMargin[3]);\n        this.editor.getSession().setMode(\"ace/mode/\" + mode);\n        this.editor.setTheme(\"ace/theme/\" + theme);\n        this.editor.setFontSize(fontSize);\n        this.editor\n            .getSession()\n            .setValue(!defaultValue ? value : defaultValue, cursorStart);\n        if (this.props.navigateToFileEnd) {\n            this.editor.navigateFileEnd();\n        }\n        this.editor.renderer.setShowGutter(showGutter);\n        this.editor.getSession().setUseWrapMode(wrapEnabled);\n        this.editor.setShowPrintMargin(showPrintMargin);\n        this.editor.on(\"focus\", this.onFocus);\n        this.editor.on(\"blur\", this.onBlur);\n        this.editor.on(\"copy\", this.onCopy);\n        this.editor.on(\"paste\", this.onPaste);\n        this.editor.on(\"change\", this.onChange);\n        this.editor.on(\"input\", this.onInput);\n        if (placeholder) {\n            this.updatePlaceholder();\n        }\n        this.editor\n            .getSession()\n            .selection.on(\"changeSelection\", this.onSelectionChange);\n        this.editor.getSession().selection.on(\"changeCursor\", this.onCursorChange);\n        if (onValidate) {\n            this.editor.getSession().on(\"changeAnnotation\", function () {\n                // tslint:disable-next-line:no-shadowed-variable\n                var annotations = _this.editor.getSession().getAnnotations();\n                _this.props.onValidate(annotations);\n            });\n        }\n        this.editor.session.on(\"changeScrollTop\", this.onScroll);\n        this.editor.getSession().setAnnotations(annotations || []);\n        if (markers && markers.length > 0) {\n            this.handleMarkers(markers);\n        }\n        // get a list of possible options to avoid 'misspelled option errors'\n        var availableOptions = this.editor.$options;\n        editorOptions_1.editorOptions.forEach(function (option) {\n            if (availableOptions.hasOwnProperty(option)) {\n                _this.editor.setOption(option, _this.props[option]);\n            }\n            else if (_this.props[option]) {\n                console.warn(\"ReactAce: editor option \" + option + \" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?\");\n            }\n        });\n        this.handleOptions(this.props);\n        if (Array.isArray(commands)) {\n            commands.forEach(function (command) {\n                if (typeof command.exec === \"string\") {\n                    _this.editor.commands.bindKey(command.bindKey, command.exec);\n                }\n                else {\n                    _this.editor.commands.addCommand(command);\n                }\n            });\n        }\n        if (keyboardHandler) {\n            this.editor.setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n        }\n        if (className) {\n            this.refEditor.className += \" \" + className;\n        }\n        if (onLoad) {\n            onLoad(this.editor);\n        }\n        this.editor.resize();\n        if (focus) {\n            this.editor.focus();\n        }\n    };\n    ReactAce.prototype.componentDidUpdate = function (prevProps) {\n        var oldProps = prevProps;\n        var nextProps = this.props;\n        for (var i = 0; i < editorOptions_1.editorOptions.length; i++) {\n            var option = editorOptions_1.editorOptions[i];\n            if (nextProps[option] !== oldProps[option]) {\n                this.editor.setOption(option, nextProps[option]);\n            }\n        }\n        if (nextProps.className !== oldProps.className) {\n            var appliedClasses = this.refEditor.className;\n            var appliedClassesArray_1 = appliedClasses.trim().split(\" \");\n            var oldClassesArray = oldProps.className.trim().split(\" \");\n            oldClassesArray.forEach(function (oldClass) {\n                var index = appliedClassesArray_1.indexOf(oldClass);\n                appliedClassesArray_1.splice(index, 1);\n            });\n            this.refEditor.className =\n                \" \" + nextProps.className + \" \" + appliedClassesArray_1.join(\" \");\n        }\n        // First process editor value, as it may create a new session (see issue #300)\n        if (this.editor && this.editor.getValue() !== nextProps.value) {\n            // editor.setValue is a synchronous function call, change event is emitted before setValue return.\n            this.silent = true;\n            var pos = this.editor.session.selection.toJSON();\n            this.editor.setValue(nextProps.value, nextProps.cursorStart);\n            this.editor.session.selection.fromJSON(pos);\n            this.silent = false;\n        }\n        if (nextProps.placeholder !== oldProps.placeholder) {\n            this.updatePlaceholder();\n        }\n        if (nextProps.mode !== oldProps.mode) {\n            this.editor.getSession().setMode(\"ace/mode/\" + nextProps.mode);\n        }\n        if (nextProps.theme !== oldProps.theme) {\n            this.editor.setTheme(\"ace/theme/\" + nextProps.theme);\n        }\n        if (nextProps.keyboardHandler !== oldProps.keyboardHandler) {\n            if (nextProps.keyboardHandler) {\n                this.editor.setKeyboardHandler(\"ace/keyboard/\" + nextProps.keyboardHandler);\n            }\n            else {\n                this.editor.setKeyboardHandler(null);\n            }\n        }\n        if (nextProps.fontSize !== oldProps.fontSize) {\n            this.editor.setFontSize(nextProps.fontSize);\n        }\n        if (nextProps.wrapEnabled !== oldProps.wrapEnabled) {\n            this.editor.getSession().setUseWrapMode(nextProps.wrapEnabled);\n        }\n        if (nextProps.showPrintMargin !== oldProps.showPrintMargin) {\n            this.editor.setShowPrintMargin(nextProps.showPrintMargin);\n        }\n        if (nextProps.showGutter !== oldProps.showGutter) {\n            this.editor.renderer.setShowGutter(nextProps.showGutter);\n        }\n        if (!isEqual(nextProps.setOptions, oldProps.setOptions)) {\n            this.handleOptions(nextProps);\n        }\n        if (!isEqual(nextProps.annotations, oldProps.annotations)) {\n            this.editor.getSession().setAnnotations(nextProps.annotations || []);\n        }\n        if (!isEqual(nextProps.markers, oldProps.markers) &&\n            Array.isArray(nextProps.markers)) {\n            this.handleMarkers(nextProps.markers);\n        }\n        // this doesn't look like it works at all....\n        if (!isEqual(nextProps.scrollMargin, oldProps.scrollMargin)) {\n            this.handleScrollMargins(nextProps.scrollMargin);\n        }\n        if (prevProps.height !== this.props.height ||\n            prevProps.width !== this.props.width) {\n            this.editor.resize();\n        }\n        if (this.props.focus && !prevProps.focus) {\n            this.editor.focus();\n        }\n    };\n    ReactAce.prototype.handleScrollMargins = function (margins) {\n        if (margins === void 0) { margins = [0, 0, 0, 0]; }\n        this.editor.renderer.setScrollMargins(margins[0], margins[1], margins[2], margins[3]);\n    };\n    ReactAce.prototype.componentWillUnmount = function () {\n        this.editor.destroy();\n        this.editor = null;\n    };\n    ReactAce.prototype.onChange = function (event) {\n        if (this.props.onChange && !this.silent) {\n            var value = this.editor.getValue();\n            this.props.onChange(value, event);\n        }\n    };\n    ReactAce.prototype.onSelectionChange = function (event) {\n        if (this.props.onSelectionChange) {\n            var value = this.editor.getSelection();\n            this.props.onSelectionChange(value, event);\n        }\n    };\n    ReactAce.prototype.onCursorChange = function (event) {\n        if (this.props.onCursorChange) {\n            var value = this.editor.getSelection();\n            this.props.onCursorChange(value, event);\n        }\n    };\n    ReactAce.prototype.onInput = function (event) {\n        if (this.props.onInput) {\n            this.props.onInput(event);\n        }\n        if (this.props.placeholder) {\n            this.updatePlaceholder();\n        }\n    };\n    ReactAce.prototype.onFocus = function (event) {\n        if (this.props.onFocus) {\n            this.props.onFocus(event, this.editor);\n        }\n    };\n    ReactAce.prototype.onBlur = function (event) {\n        if (this.props.onBlur) {\n            this.props.onBlur(event, this.editor);\n        }\n    };\n    ReactAce.prototype.onCopy = function (text) {\n        if (this.props.onCopy) {\n            this.props.onCopy(text);\n        }\n    };\n    ReactAce.prototype.onPaste = function (text) {\n        if (this.props.onPaste) {\n            this.props.onPaste(text);\n        }\n    };\n    ReactAce.prototype.onScroll = function () {\n        if (this.props.onScroll) {\n            this.props.onScroll(this.editor);\n        }\n    };\n    ReactAce.prototype.handleOptions = function (props) {\n        var setOptions = Object.keys(props.setOptions);\n        for (var y = 0; y < setOptions.length; y++) {\n            this.editor.setOption(setOptions[y], props.setOptions[setOptions[y]]);\n        }\n    };\n    ReactAce.prototype.handleMarkers = function (markers) {\n        var _this = this;\n        // remove foreground markers\n        var currentMarkers = this.editor.getSession().getMarkers(true);\n        for (var i in currentMarkers) {\n            if (currentMarkers.hasOwnProperty(i)) {\n                this.editor.getSession().removeMarker(currentMarkers[i].id);\n            }\n        }\n        // remove background markers except active line marker and selected word marker\n        currentMarkers = this.editor.getSession().getMarkers(false);\n        for (var i in currentMarkers) {\n            if (currentMarkers.hasOwnProperty(i) &&\n                currentMarkers[i].clazz !== \"ace_active-line\" &&\n                currentMarkers[i].clazz !== \"ace_selected-word\") {\n                this.editor.getSession().removeMarker(currentMarkers[i].id);\n            }\n        }\n        // add new markers\n        markers.forEach(function (_a) {\n            var startRow = _a.startRow, startCol = _a.startCol, endRow = _a.endRow, endCol = _a.endCol, className = _a.className, type = _a.type, _b = _a.inFront, inFront = _b === void 0 ? false : _b;\n            var range = new Range(startRow, startCol, endRow, endCol);\n            _this.editor.getSession().addMarker(range, className, type, inFront);\n        });\n    };\n    ReactAce.prototype.updatePlaceholder = function () {\n        // Adapted from https://stackoverflow.com/questions/26695708/how-can-i-add-placeholder-text-when-the-editor-is-empty\n        var editor = this.editor;\n        var placeholder = this.props.placeholder;\n        var showPlaceholder = !editor.session.getValue().length;\n        var node = editor.renderer.placeholderNode;\n        if (!showPlaceholder && node) {\n            editor.renderer.scroller.removeChild(editor.renderer.placeholderNode);\n            editor.renderer.placeholderNode = null;\n        }\n        else if (showPlaceholder && !node) {\n            node = editor.renderer.placeholderNode = document.createElement(\"div\");\n            node.textContent = placeholder || \"\";\n            node.className = \"ace_comment ace_placeholder\";\n            node.style.padding = \"0 9px\";\n            node.style.position = \"absolute\";\n            node.style.zIndex = \"3\";\n            editor.renderer.scroller.appendChild(node);\n        }\n        else if (showPlaceholder && node) {\n            node.textContent = placeholder;\n        }\n    };\n    ReactAce.prototype.updateRef = function (item) {\n        this.refEditor = item;\n    };\n    ReactAce.prototype.render = function () {\n        var _a = this.props, name = _a.name, width = _a.width, height = _a.height, style = _a.style;\n        var divStyle = __assign({ width: width, height: height }, style);\n        return React.createElement(\"div\", { ref: this.updateRef, id: name, style: divStyle });\n    };\n    ReactAce.propTypes = {\n        mode: PropTypes.string,\n        focus: PropTypes.bool,\n        theme: PropTypes.string,\n        name: PropTypes.string,\n        className: PropTypes.string,\n        height: PropTypes.string,\n        width: PropTypes.string,\n        fontSize: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        showGutter: PropTypes.bool,\n        onChange: PropTypes.func,\n        onCopy: PropTypes.func,\n        onPaste: PropTypes.func,\n        onFocus: PropTypes.func,\n        onInput: PropTypes.func,\n        onBlur: PropTypes.func,\n        onScroll: PropTypes.func,\n        value: PropTypes.string,\n        defaultValue: PropTypes.string,\n        onLoad: PropTypes.func,\n        onSelectionChange: PropTypes.func,\n        onCursorChange: PropTypes.func,\n        onBeforeLoad: PropTypes.func,\n        onValidate: PropTypes.func,\n        minLines: PropTypes.number,\n        maxLines: PropTypes.number,\n        readOnly: PropTypes.bool,\n        highlightActiveLine: PropTypes.bool,\n        tabSize: PropTypes.number,\n        showPrintMargin: PropTypes.bool,\n        cursorStart: PropTypes.number,\n        debounceChangePeriod: PropTypes.number,\n        editorProps: PropTypes.object,\n        setOptions: PropTypes.object,\n        style: PropTypes.object,\n        scrollMargin: PropTypes.array,\n        annotations: PropTypes.array,\n        markers: PropTypes.array,\n        keyboardHandler: PropTypes.string,\n        wrapEnabled: PropTypes.bool,\n        enableSnippets: PropTypes.bool,\n        enableBasicAutocompletion: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.array\n        ]),\n        enableLiveAutocompletion: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.array\n        ]),\n        navigateToFileEnd: PropTypes.bool,\n        commands: PropTypes.array,\n        placeholder: PropTypes.string\n    };\n    ReactAce.defaultProps = {\n        name: \"ace-editor\",\n        focus: false,\n        mode: \"\",\n        theme: \"\",\n        height: \"500px\",\n        width: \"500px\",\n        value: \"\",\n        fontSize: 12,\n        enableSnippets: false,\n        showGutter: true,\n        onChange: null,\n        onPaste: null,\n        onLoad: null,\n        onScroll: null,\n        minLines: null,\n        maxLines: null,\n        readOnly: false,\n        highlightActiveLine: true,\n        showPrintMargin: true,\n        tabSize: 4,\n        cursorStart: 1,\n        editorProps: {},\n        style: {},\n        scrollMargin: [0, 0, 0, 0],\n        setOptions: {},\n        wrapEnabled: false,\n        enableBasicAutocompletion: false,\n        enableLiveAutocompletion: false,\n        placeholder: null,\n        navigateToFileEnd: true\n    };\n    return ReactAce;\n}(React.Component));\nexports.default = ReactAce;\n//# sourceMappingURL=ace.js.map"]},"metadata":{},"sourceType":"script"}